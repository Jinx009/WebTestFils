{"version":3,"sources":["OBJMTLLoader.js"],"names":[],"mappings":"AAAA;;;;;;;AAOA,MAAM,YAAN,GAAqB,UAAW,OAAX,EAAqB;;AAEzC,MAAK,OAAL,GAAiB,YAAY,SAAd,GAA4B,OAA5B,GAAsC,MAAM,qBAA3D;AAEA,CAJD;;AAMA,MAAM,YAAN,CAAmB,SAAnB,GAA+B;;AAE9B,cAAa,MAAM,YAFW;;AAI9B,OAAM,UAAW,GAAX,EAAgB,MAAhB,EAAwB,MAAxB,EAAgC,UAAhC,EAA4C,OAA5C,EAAsD;;AAE3D,MAAI,QAAQ,IAAZ;;AAEA,MAAI,YAAY,IAAI,MAAM,SAAV,CAAqB,KAAK,OAA1B,CAAhB;AACA,YAAU,UAAV,CAAsB,IAAI,MAAJ,CAAY,CAAZ,EAAe,IAAI,WAAJ,CAAiB,GAAjB,IAAyB,CAAxC,CAAtB;AACA,YAAU,cAAV,CAA0B,KAAK,WAA/B;AACA,YAAU,IAAV,CAAgB,MAAhB,EAAwB,UAAW,SAAX,EAAuB;;AAE9C,OAAI,mBAAmB,SAAvB;AACA,oBAAiB,OAAjB;;AAEA,OAAI,SAAS,IAAI,MAAM,SAAV,CAAqB,MAAM,OAA3B,CAAb;AACA,UAAO,cAAP,CAAuB,MAAM,WAA7B;AACA,UAAO,IAAP,CAAa,GAAb,EAAkB,UAAW,IAAX,EAAkB;;AAEnC,QAAI,SAAS,MAAM,KAAN,CAAa,IAAb,CAAb;;AAEA,WAAO,QAAP,CAAiB,UAAW,MAAX,EAAoB;;AAEpC,SAAK,kBAAkB,MAAM,IAA7B,EAAoC;;AAEnC,UAAK,OAAO,QAAP,CAAgB,IAArB,EAA4B;;AAE3B,WAAI,WAAW,iBAAiB,MAAjB,CAAyB,OAAO,QAAP,CAAgB,IAAzC,CAAf;;AAEA,WAAK,QAAL,EAAgB,OAAO,QAAP,GAAkB,QAAlB;AAEhB;AAED;AAED,KAdD;;AAgBA,WAAQ,MAAR;AAEA,IAtBD,EAsBG,UAtBH,EAsBe,OAtBf;AAwBA,GA/BD,EA+BG,UA/BH,EA+Be,OA/Bf;AAiCA,EA5C6B;;AA8C9B,iBAAgB,UAAW,KAAX,EAAmB;;AAElC,OAAK,WAAL,GAAmB,KAAnB;AAEA,EAlD6B;;AAoD9B;;;;;;;AAOA,QAAO,UAAW,IAAX,EAAiB,cAAjB,EAAkC;;AAExC,WAAS,MAAT,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA2B;;AAE1B,UAAO,IAAI,MAAM,OAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,CAAP;AAEA;;AAED,WAAS,EAAT,CAAa,CAAb,EAAgB,CAAhB,EAAoB;;AAEnB,UAAO,IAAI,MAAM,OAAV,CAAmB,CAAnB,EAAsB,CAAtB,CAAP;AAEA;;AAED,WAAS,KAAT,CAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,OAAzB,EAAmC;;AAElC,UAAO,IAAI,MAAM,KAAV,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,OAA1B,CAAP;AAEA;;AAED,MAAI,cAAc,CAAlB;;AAEA,WAAS,KAAT,CAAgB,QAAhB,EAA0B,YAA1B,EAAyC;;AAExC,OAAK,SAAS,MAAT,GAAkB,CAAvB,EAA2B;;AAE1B,aAAS,QAAT,GAAoB,QAApB;;AAEA,aAAS,aAAT;AACA,aAAS,kBAAT;AACA,aAAS,qBAAT;;AAEA,WAAO,GAAP,CAAY,IAAZ;;AAEA,eAAW,IAAI,MAAM,QAAV,EAAX;AACA,WAAO,IAAI,MAAM,IAAV,CAAgB,QAAhB,EAA0B,QAA1B,CAAP;AAEA;;AAED,OAAK,aAAa,SAAlB,EAA8B,KAAK,IAAL,GAAY,QAAZ;;AAE9B,OAAK,iBAAiB,SAAtB,EAAkC;;AAEjC,eAAW,IAAI,MAAM,mBAAV,EAAX;AACA,aAAS,IAAT,GAAgB,YAAhB;;AAEA,SAAK,QAAL,GAAgB,QAAhB;AAEA;AAED;;AAED,MAAI,QAAQ,IAAI,MAAM,KAAV,EAAZ;AACA,MAAI,SAAS,KAAb;;AAEA,MAAI,WAAW,IAAI,MAAM,QAAV,EAAf;AACA,MAAI,WAAW,IAAI,MAAM,mBAAV,EAAf;AACA,MAAI,OAAO,IAAI,MAAM,IAAV,CAAgB,QAAhB,EAA0B,QAA1B,CAAX;;AAEA,MAAI,WAAW,EAAf;AACA,MAAI,UAAU,EAAd;AACA,MAAI,MAAM,EAAV;;AAEA,WAAS,QAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,YAA5B,EAA2C;;AAE1C,OAAK,iBAAiB,SAAtB,EAAkC;;AAEjC,aAAS,KAAT,CAAe,IAAf,CAAqB,MACpB,SAAU,CAAV,KAAkB,cAAc,CAAhC,CADoB,EAEpB,SAAU,CAAV,KAAkB,cAAc,CAAhC,CAFoB,EAGpB,SAAU,CAAV,KAAkB,cAAc,CAAhC,CAHoB,CAArB;AAMA,IARD,MAQO;;AAEN,aAAS,KAAT,CAAe,IAAf,CAAqB,MACpB,SAAU,CAAV,KAAkB,cAAc,CAAhC,CADoB,EAEpB,SAAU,CAAV,KAAkB,cAAc,CAAhC,CAFoB,EAGpB,SAAU,CAAV,KAAkB,cAAc,CAAhC,CAHoB,EAIpB,CACC,QAAS,SAAU,aAAc,CAAd,CAAV,IAAgC,CAAzC,EAA6C,KAA7C,EADD,EAEC,QAAS,SAAU,aAAc,CAAd,CAAV,IAAgC,CAAzC,EAA6C,KAA7C,EAFD,EAGC,QAAS,SAAU,aAAc,CAAd,CAAV,IAAgC,CAAzC,EAA6C,KAA7C,EAHD,CAJoB,CAArB;AAWA;AAED;;AAED,WAAS,OAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,EAA4B;;AAE3B,YAAS,aAAT,CAAwB,CAAxB,EAA4B,IAA5B,CAAkC,CACjC,IAAK,SAAU,CAAV,IAAgB,CAArB,EAAyB,KAAzB,EADiC,EAEjC,IAAK,SAAU,CAAV,IAAgB,CAArB,EAAyB,KAAzB,EAFiC,EAGjC,IAAK,SAAU,CAAV,IAAgB,CAArB,EAAyB,KAAzB,EAHiC,CAAlC;AAMA;;AAED,WAAS,gBAAT,CAA2B,KAA3B,EAAkC,GAAlC,EAAuC,YAAvC,EAAsD;;AAErD,OAAK,MAAO,CAAP,MAAe,SAApB,EAAgC;;AAE/B,aAAU,MAAO,CAAP,CAAV,EAAsB,MAAO,CAAP,CAAtB,EAAkC,MAAO,CAAP,CAAlC,EAA8C,YAA9C;;AAEA,QAAK,EAAI,QAAQ,SAAZ,KAA2B,IAAI,MAAJ,GAAa,CAA7C,EAAiD;;AAEhD,aAAS,IAAK,CAAL,CAAT,EAAmB,IAAK,CAAL,CAAnB,EAA6B,IAAK,CAAL,CAA7B;AAEA;AAED,IAVD,MAUO;;AAEN,QAAK,EAAI,iBAAiB,SAArB,KAAoC,aAAa,MAAb,GAAsB,CAA/D,EAAmE;;AAElE,cAAU,MAAO,CAAP,CAAV,EAAsB,MAAO,CAAP,CAAtB,EAAkC,MAAO,CAAP,CAAlC,EAA8C,CAAE,aAAc,CAAd,CAAF,EAAqB,aAAc,CAAd,CAArB,EAAwC,aAAc,CAAd,CAAxC,CAA9C;AACA,cAAU,MAAO,CAAP,CAAV,EAAsB,MAAO,CAAP,CAAtB,EAAkC,MAAO,CAAP,CAAlC,EAA8C,CAAE,aAAc,CAAd,CAAF,EAAqB,aAAc,CAAd,CAArB,EAAwC,aAAc,CAAd,CAAxC,CAA9C;AAEA,KALD,MAKO;;AAEN,cAAU,MAAO,CAAP,CAAV,EAAsB,MAAO,CAAP,CAAtB,EAAkC,MAAO,CAAP,CAAlC;AACA,cAAU,MAAO,CAAP,CAAV,EAAsB,MAAO,CAAP,CAAtB,EAAkC,MAAO,CAAP,CAAlC;AAEA;;AAED,QAAK,EAAI,QAAQ,SAAZ,KAA2B,IAAI,MAAJ,GAAa,CAA7C,EAAiD;;AAEhD,aAAS,IAAK,CAAL,CAAT,EAAmB,IAAK,CAAL,CAAnB,EAA6B,IAAK,CAAL,CAA7B;AACA,aAAS,IAAK,CAAL,CAAT,EAAmB,IAAK,CAAL,CAAnB,EAA6B,IAAK,CAAL,CAA7B;AAEA;AAED;AAED;;AAGD;;AAEA,MAAI,iBAAiB,+DAArB;;AAEA;;AAEA,MAAI,iBAAiB,gEAArB;;AAEA;;AAEA,MAAI,aAAa,4CAAjB;;AAEA;;AAEA,MAAI,gBAAgB,gCAApB;;AAEA;;AAEA,MAAI,gBAAgB,oEAApB;;AAEA;;AAEA,MAAI,gBAAgB,gGAApB;;AAEA;;AAEA,MAAI,gBAAgB,4EAApB;;AAEA;;AAEA,MAAI,QAAQ,KAAK,KAAL,CAAY,IAAZ,CAAZ;;AAEA,OAAM,IAAI,IAAI,CAAd,EAAiB,IAAI,MAAM,MAA3B,EAAmC,GAAnC,EAA0C;;AAEzC,OAAI,OAAO,MAAO,CAAP,CAAX;AACA,UAAO,KAAK,IAAL,EAAP;;AAEA,OAAI,MAAJ;;AAEA,OAAK,KAAK,MAAL,KAAgB,CAAhB,IAAqB,KAAK,MAAL,CAAa,CAAb,MAAqB,GAA/C,EAAqD;;AAEpD;AAEA,IAJD,MAIO,IAAK,CAAE,SAAS,eAAe,IAAf,CAAqB,IAArB,CAAX,MAA6C,IAAlD,EAAyD;;AAE/D;;AAEA,aAAS,IAAT,CAAe,OACd,WAAY,OAAQ,CAAR,CAAZ,CADc,EAEd,WAAY,OAAQ,CAAR,CAAZ,CAFc,EAGd,WAAY,OAAQ,CAAR,CAAZ,CAHc,CAAf;AAMA,IAVM,MAUA,IAAK,CAAE,SAAS,eAAe,IAAf,CAAqB,IAArB,CAAX,MAA6C,IAAlD,EAAyD;;AAE/D;;AAEA,YAAQ,IAAR,CAAc,OACb,WAAY,OAAQ,CAAR,CAAZ,CADa,EAEb,WAAY,OAAQ,CAAR,CAAZ,CAFa,EAGb,WAAY,OAAQ,CAAR,CAAZ,CAHa,CAAd;AAMA,IAVM,MAUA,IAAK,CAAE,SAAS,WAAW,IAAX,CAAiB,IAAjB,CAAX,MAAyC,IAA9C,EAAqD;;AAE3D;;AAEA,QAAI,IAAJ,CAAU,GACT,WAAY,OAAQ,CAAR,CAAZ,CADS,EAET,WAAY,OAAQ,CAAR,CAAZ,CAFS,CAAV;AAKA,IATM,MASA,IAAK,CAAE,SAAS,cAAc,IAAd,CAAoB,IAApB,CAAX,MAA4C,IAAjD,EAAwD;;AAE9D;;AAEA,qBAAkB,CAAE,OAAQ,CAAR,CAAF,EAAe,OAAQ,CAAR,CAAf,EAA4B,OAAQ,CAAR,CAA5B,EAAyC,OAAQ,CAAR,CAAzC,CAAlB;AAEA,IANM,MAMA,IAAK,CAAE,SAAS,cAAc,IAAd,CAAoB,IAApB,CAAX,MAA4C,IAAjD,EAAwD;;AAE9D;;AAEA,qBACC,CAAE,OAAQ,CAAR,CAAF,EAAe,OAAQ,CAAR,CAAf,EAA4B,OAAQ,CAAR,CAA5B,EAAyC,OAAQ,EAAR,CAAzC,CADD,EAC0D;AACzD,KAAE,OAAQ,CAAR,CAAF,EAAe,OAAQ,CAAR,CAAf,EAA4B,OAAQ,CAAR,CAA5B,EAAyC,OAAQ,EAAR,CAAzC,CAFD,CAEyD;AAFzD;AAKA,IATM,MASA,IAAK,CAAE,SAAS,cAAc,IAAd,CAAoB,IAApB,CAAX,MAA4C,IAAjD,EAAwD;;AAE9D;;AAEA,qBACC,CAAE,OAAQ,CAAR,CAAF,EAAe,OAAQ,CAAR,CAAf,EAA4B,OAAQ,EAAR,CAA5B,EAA0C,OAAQ,EAAR,CAA1C,CADD,EAC2D;AAC1D,KAAE,OAAQ,CAAR,CAAF,EAAe,OAAQ,CAAR,CAAf,EAA4B,OAAQ,EAAR,CAA5B,EAA0C,OAAQ,EAAR,CAA1C,CAFD,EAE2D;AAC1D,KAAE,OAAQ,CAAR,CAAF,EAAe,OAAQ,CAAR,CAAf,EAA4B,OAAQ,EAAR,CAA5B,EAA0C,OAAQ,EAAR,CAA1C,CAHD,CAG0D;AAH1D;AAMA,IAVM,MAUA,IAAK,CAAE,SAAS,cAAc,IAAd,CAAoB,IAApB,CAAX,MAA4C,IAAjD,EAAwD;;AAE9D;;AAEA,qBACC,CAAE,OAAQ,CAAR,CAAF,EAAe,OAAQ,CAAR,CAAf,EAA4B,OAAQ,CAAR,CAA5B,EAAyC,OAAQ,EAAR,CAAzC,CADD,EAC0D;AACzD,MAFD,EAEM;AACL,KAAE,OAAQ,CAAR,CAAF,EAAe,OAAQ,CAAR,CAAf,EAA4B,OAAQ,CAAR,CAA5B,EAAyC,OAAQ,EAAR,CAAzC,CAHD,CAGyD;AAHzD;AAMA,IAVM,MAUA,IAAK,MAAM,IAAN,CAAY,IAAZ,CAAL,EAA0B;;AAEhC;;AAEA;AACA,kBAAc,cAAc,SAAS,MAArC;AACA,eAAW,EAAX;AACA,aAAS,IAAI,MAAM,QAAV,EAAT;AACA,WAAO,IAAP,GAAc,KAAK,SAAL,CAAgB,CAAhB,EAAoB,IAApB,EAAd;AACA,UAAM,GAAN,CAAW,MAAX;AAEA,IAXM,MAWA,IAAK,MAAM,IAAN,CAAY,IAAZ,CAAL,EAA0B;;AAEhC;;AAEA,UAAO,KAAK,SAAL,CAAgB,CAAhB,EAAoB,IAApB,EAAP,EAAmC,SAAnC;AAEA,IANM,MAMA,IAAK,WAAW,IAAX,CAAiB,IAAjB,CAAL,EAA+B;;AAErC;;AAEA,UAAO,SAAP,EAAkB,KAAK,SAAL,CAAgB,CAAhB,EAAoB,IAApB,EAAlB;AAEA,IANM,MAMA,IAAK,WAAW,IAAX,CAAiB,IAAjB,CAAL,EAA+B;;AAErC;;AAEA,QAAK,cAAL,EAAsB;;AAErB,SAAI,UAAU,KAAK,SAAL,CAAgB,CAAhB,CAAd;AACA,eAAU,QAAQ,IAAR,EAAV;AACA,oBAAgB,OAAhB;AAEA;AAED,IAZM,MAYA,IAAK,MAAM,IAAN,CAAY,IAAZ,CAAL,EAA0B;;AAEhC;;AAEA,IAJM,MAIA;;AAEN,YAAQ,GAAR,CAAa,wCAAwC,IAArD;AAEA;AAED;;AAED;AACA,QAAO,SAAP,EAAkB,SAAlB;;AAEA,SAAO,KAAP;AAEA;;AApW6B,CAA/B;;AAwWA,MAAM,eAAN,CAAsB,SAAtB,CAAgC,KAAhC,CAAuC,MAAM,YAAN,CAAmB,SAA1D","file":"OBJMTLLoader-compiled.js","sourcesContent":["/**\n * Loads a Wavefront .obj file with materials\n *\n * @author mrdoob / http://mrdoob.com/\n * @author angelxuanchang\n */\n\nTHREE.OBJMTLLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.OBJMTLLoader.prototype = {\n\n\tconstructor: THREE.OBJMTLLoader,\n\n\tload: function ( url, mtlurl, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar mtlLoader = new THREE.MTLLoader( this.manager );\n\t\tmtlLoader.setBaseUrl( url.substr( 0, url.lastIndexOf( \"/\" ) + 1 ) );\n\t\tmtlLoader.setCrossOrigin( this.crossOrigin );\n\t\tmtlLoader.load( mtlurl, function ( materials ) {\n\n\t\t\tvar materialsCreator = materials;\n\t\t\tmaterialsCreator.preload();\n\n\t\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\t\tloader.setCrossOrigin( scope.crossOrigin );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\tvar object = scope.parse( text );\n\n\t\t\t\tobject.traverse( function ( object ) {\n\n\t\t\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\t\t\tif ( object.material.name ) {\n\n\t\t\t\t\t\t\tvar material = materialsCreator.create( object.material.name );\n\n\t\t\t\t\t\t\tif ( material ) object.material = material;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tonLoad( object );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\t/**\n\t * Parses loaded .obj file\n\t * @param data - content of .obj file\n\t * @param mtllibCallback - callback to handle mtllib declaration (optional)\n\t * @return {THREE.Object3D} - Object3D (with default material)\n\t */\n\n\tparse: function ( data, mtllibCallback ) {\n\n\t\tfunction vector( x, y, z ) {\n\n\t\t\treturn new THREE.Vector3( x, y, z );\n\n\t\t}\n\n\t\tfunction uv( u, v ) {\n\n\t\t\treturn new THREE.Vector2( u, v );\n\n\t\t}\n\n\t\tfunction face3( a, b, c, normals ) {\n\n\t\t\treturn new THREE.Face3( a, b, c, normals );\n\n\t\t}\n\n\t\tvar face_offset = 0;\n\n\t\tfunction meshN( meshName, materialName ) {\n\n\t\t\tif ( vertices.length > 0 ) {\n\n\t\t\t\tgeometry.vertices = vertices;\n\n\t\t\t\tgeometry.mergeVertices();\n\t\t\t\tgeometry.computeFaceNormals();\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\t\tobject.add( mesh );\n\n\t\t\t\tgeometry = new THREE.Geometry();\n\t\t\t\tmesh = new THREE.Mesh( geometry, material );\n\n\t\t\t}\n\n\t\t\tif ( meshName !== undefined ) mesh.name = meshName;\n\n\t\t\tif ( materialName !== undefined ) {\n\n\t\t\t\tmaterial = new THREE.MeshLambertMaterial();\n\t\t\t\tmaterial.name = materialName;\n\n\t\t\t\tmesh.material = material;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar group = new THREE.Group();\n\t\tvar object = group;\n\n\t\tvar geometry = new THREE.Geometry();\n\t\tvar material = new THREE.MeshLambertMaterial();\n\t\tvar mesh = new THREE.Mesh( geometry, material );\n\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\tfunction add_face( a, b, c, normals_inds ) {\n\n\t\t\tif ( normals_inds === undefined ) {\n\n\t\t\t\tgeometry.faces.push( face3(\n\t\t\t\t\tparseInt( a ) - ( face_offset + 1 ),\n\t\t\t\t\tparseInt( b ) - ( face_offset + 1 ),\n\t\t\t\t\tparseInt( c ) - ( face_offset + 1 )\n\t\t\t\t) );\n\n\t\t\t} else {\n\n\t\t\t\tgeometry.faces.push( face3(\n\t\t\t\t\tparseInt( a ) - ( face_offset + 1 ),\n\t\t\t\t\tparseInt( b ) - ( face_offset + 1 ),\n\t\t\t\t\tparseInt( c ) - ( face_offset + 1 ),\n\t\t\t\t\t[\n\t\t\t\t\t\tnormals[ parseInt( normals_inds[ 0 ] ) - 1 ].clone(),\n\t\t\t\t\t\tnormals[ parseInt( normals_inds[ 1 ] ) - 1 ].clone(),\n\t\t\t\t\t\tnormals[ parseInt( normals_inds[ 2 ] ) - 1 ].clone()\n\t\t\t\t\t]\n\t\t\t\t) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction add_uvs( a, b, c ) {\n\n\t\t\tgeometry.faceVertexUvs[ 0 ].push( [\n\t\t\t\tuvs[ parseInt( a ) - 1 ].clone(),\n\t\t\t\tuvs[ parseInt( b ) - 1 ].clone(),\n\t\t\t\tuvs[ parseInt( c ) - 1 ].clone()\n\t\t\t] );\n\n\t\t}\n\n\t\tfunction handle_face_line( faces, uvs, normals_inds ) {\n\n\t\t\tif ( faces[ 3 ] === undefined ) {\n\n\t\t\t\tadd_face( faces[ 0 ], faces[ 1 ], faces[ 2 ], normals_inds );\n\n\t\t\t\tif ( ! ( uvs === undefined ) && uvs.length > 0 ) {\n\n\t\t\t\t\tadd_uvs( uvs[ 0 ], uvs[ 1 ], uvs[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( ! ( normals_inds === undefined ) && normals_inds.length > 0 ) {\n\n\t\t\t\t\tadd_face( faces[ 0 ], faces[ 1 ], faces[ 3 ], [ normals_inds[ 0 ], normals_inds[ 1 ], normals_inds[ 3 ] ] );\n\t\t\t\t\tadd_face( faces[ 1 ], faces[ 2 ], faces[ 3 ], [ normals_inds[ 1 ], normals_inds[ 2 ], normals_inds[ 3 ] ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tadd_face( faces[ 0 ], faces[ 1 ], faces[ 3 ] );\n\t\t\t\t\tadd_face( faces[ 1 ], faces[ 2 ], faces[ 3 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( uvs === undefined ) && uvs.length > 0 ) {\n\n\t\t\t\t\tadd_uvs( uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] );\n\t\t\t\t\tadd_uvs( uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// v float float float\n\n\t\tvar vertex_pattern = /v( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)/;\n\n\t\t// vn float float float\n\n\t\tvar normal_pattern = /vn( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)/;\n\n\t\t// vt float float\n\n\t\tvar uv_pattern = /vt( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)/;\n\n\t\t// f vertex vertex vertex ...\n\n\t\tvar face_pattern1 = /f( +\\d+)( +\\d+)( +\\d+)( +\\d+)?/;\n\n\t\t// f vertex/uv vertex/uv vertex/uv ...\n\n\t\tvar face_pattern2 = /f( +(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+))?/;\n\n\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal ...\n\n\t\tvar face_pattern3 = /f( +(\\d+)\\/(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+)\\/(\\d+))?/;\n\n\t\t// f vertex//normal vertex//normal vertex//normal ...\n\n\t\tvar face_pattern4 = /f( +(\\d+)\\/\\/(\\d+))( +(\\d+)\\/\\/(\\d+))( +(\\d+)\\/\\/(\\d+))( +(\\d+)\\/\\/(\\d+))?/;\n\n\t\t//\n\n\t\tvar lines = data.split( \"\\n\" );\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tvar line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tvar result;\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t} else if ( ( result = vertex_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\tvertices.push( vector(\n\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\tparseFloat( result[ 2 ] ),\n\t\t\t\t\tparseFloat( result[ 3 ] )\n\t\t\t\t) );\n\n\t\t\t} else if ( ( result = normal_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\tnormals.push( vector(\n\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\tparseFloat( result[ 2 ] ),\n\t\t\t\t\tparseFloat( result[ 3 ] )\n\t\t\t\t) );\n\n\t\t\t} else if ( ( result = uv_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\n\n\t\t\t\tuvs.push( uv(\n\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\tparseFloat( result[ 2 ] )\n\t\t\t\t) );\n\n\t\t\t} else if ( ( result = face_pattern1.exec( line ) ) !== null ) {\n\n\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\n\n\t\t\t\thandle_face_line( [ result[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ] ] );\n\n\t\t\t} else if ( ( result = face_pattern2.exec( line ) ) !== null ) {\n\n\t\t\t\t// [\"f 1/1 2/2 3/3\", \" 1/1\", \"1\", \"1\", \" 2/2\", \"2\", \"2\", \" 3/3\", \"3\", \"3\", undefined, undefined, undefined]\n\n\t\t\t\thandle_face_line(\n\t\t\t\t\t[ result[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ] ], //faces\n\t\t\t\t\t[ result[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ] ] //uv\n\t\t\t\t);\n\n\t\t\t} else if ( ( result = face_pattern3.exec( line ) ) !== null ) {\n\n\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \" 1/1/1\", \"1\", \"1\", \"1\", \" 2/2/2\", \"2\", \"2\", \"2\", \" 3/3/3\", \"3\", \"3\", \"3\", undefined, undefined, undefined, undefined]\n\n\t\t\t\thandle_face_line(\n\t\t\t\t\t[ result[ 2 ], result[ 6 ], result[ 10 ], result[ 14 ] ], //faces\n\t\t\t\t\t[ result[ 3 ], result[ 7 ], result[ 11 ], result[ 15 ] ], //uv\n\t\t\t\t\t[ result[ 4 ], result[ 8 ], result[ 12 ], result[ 16 ] ] //normal\n\t\t\t\t);\n\n\t\t\t} else if ( ( result = face_pattern4.exec( line ) ) !== null ) {\n\n\t\t\t\t// [\"f 1//1 2//2 3//3\", \" 1//1\", \"1\", \"1\", \" 2//2\", \"2\", \"2\", \" 3//3\", \"3\", \"3\", undefined, undefined, undefined]\n\n\t\t\t\thandle_face_line(\n\t\t\t\t\t[ result[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ] ], //faces\n\t\t\t\t\t[ ], //uv\n\t\t\t\t\t[ result[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ] ] //normal\n\t\t\t\t);\n\n\t\t\t} else if ( /^o /.test( line ) ) {\n\n\t\t\t\t// object\n\n\t\t\t\tmeshN();\n\t\t\t\tface_offset = face_offset + vertices.length;\n\t\t\t\tvertices = [];\n\t\t\t\tobject = new THREE.Object3D();\n\t\t\t\tobject.name = line.substring( 2 ).trim();\n\t\t\t\tgroup.add( object );\n\n\t\t\t} else if ( /^g /.test( line ) ) {\n\n\t\t\t\t// group\n\n\t\t\t\tmeshN( line.substring( 2 ).trim(), undefined );\n\n\t\t\t} else if ( /^usemtl /.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tmeshN( undefined, line.substring( 7 ).trim() );\n\n\t\t\t} else if ( /^mtllib /.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tif ( mtllibCallback ) {\n\n\t\t\t\t\tvar mtlfile = line.substring( 7 );\n\t\t\t\t\tmtlfile = mtlfile.trim();\n\t\t\t\t\tmtllibCallback( mtlfile );\n\n\t\t\t\t}\n\n\t\t\t} else if ( /^s /.test( line ) ) {\n\n\t\t\t\t// Smooth shading\n\n\t\t\t} else {\n\n\t\t\t\tconsole.log( \"THREE.OBJMTLLoader: Unhandled line \" + line );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//Add last object\n\t\tmeshN( undefined, undefined );\n\n\t\treturn group;\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.OBJMTLLoader.prototype );\n"]}