{"version":3,"sources":["FlyControls.js"],"names":[],"mappings":"AAAA,QAAQ,IAAR,CAAc,4SAAd;;AAEA,MAAM,WAAN,GAAoB,UAAW,MAAX,EAAmB,UAAnB,EAAgC;;AAEnD,KAAK,eAAe,SAApB,EAAgC;;AAE/B,UAAQ,IAAR,CAAc,wEAAd;AACA,eAAa,QAAb;AAEA;;AAED,MAAK,MAAL,GAAc,MAAd;AACA,MAAK,UAAL,GAAkB,UAAlB;;AAEA,KAAK,UAAL,EAAkB,KAAK,UAAL,CAAgB,YAAhB,CAA8B,UAA9B,EAA0C,CAAE,CAA5C;;AAElB;;AAEA,MAAK,aAAL,GAAqB,GAArB;AACA,MAAK,SAAL,GAAiB,KAAjB;;AAEA,MAAK,UAAL,GAAkB,KAAlB;AACA,MAAK,WAAL,GAAmB,KAAnB;;AAEA;;AAEA;;AAEA,KAAI,QAAQ,IAAZ;AACA,KAAI,cAAc,EAAE,MAAM,QAAR,EAAlB;AACA,KAAI,MAAM,QAAV;;AAEA,MAAK,aAAL,GAAqB,IAAI,MAAM,UAAV,EAArB;;AAEA,MAAK,WAAL,GAAmB,CAAnB;;AAEA,MAAK,SAAL,GAAiB,EAAE,IAAI,CAAN,EAAS,MAAM,CAAf,EAAkB,MAAM,CAAxB,EAA2B,OAAO,CAAlC,EAAqC,SAAS,CAA9C,EAAiD,MAAM,CAAvD,EAA0D,SAAS,CAAnE,EAAsE,WAAW,CAAjF,EAAoF,SAAS,CAA7F,EAAgG,UAAU,CAA1G,EAA6G,UAAU,CAAvH,EAA0H,WAAW,CAArI,EAAjB;AACA,MAAK,UAAL,GAAkB,IAAI,MAAM,OAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,CAAlB;AACA,MAAK,cAAL,GAAsB,IAAI,MAAM,OAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,CAAtB;;AAEA,MAAK,OAAL,GAAe,UAAW,KAAX,EAAmB;;AAEjC,MAAK,MAAM,MAAX,EAAoB;;AAEnB;AAEA;;AAED;;AAEA,UAAS,MAAM,OAAf;;AAEC,QAAK,EAAL;AAAS,eAAY,KAAK,uBAAL,GAA+B,EAA/B,CAAmC;;AAExD,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,OAAf,GAAyB,CAAzB,CAA4B;AAC3C,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,IAAf,GAAsB,CAAtB,CAAyB;;AAExC,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,IAAf,GAAsB,CAAtB,CAAyB;AACxC,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,KAAf,GAAuB,CAAvB,CAA0B;;AAEzC,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,EAAf,GAAoB,CAApB,CAAuB;AACtC,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,IAAf,GAAsB,CAAtB,CAAyB;;AAExC,QAAK,EAAL;AAAS,UAAO,KAAK,SAAL,CAAe,OAAf,GAAyB,CAAzB,CAA4B;AAC5C,QAAK,EAAL;AAAS,YAAS,KAAK,SAAL,CAAe,SAAf,GAA2B,CAA3B,CAA8B;;AAEhD,QAAK,EAAL;AAAS,YAAS,KAAK,SAAL,CAAe,OAAf,GAAyB,CAAzB,CAA4B;AAC9C,QAAK,EAAL;AAAS,aAAU,KAAK,SAAL,CAAe,QAAf,GAA0B,CAA1B,CAA6B;;AAEhD,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,QAAf,GAA0B,CAA1B,CAA6B;AAC5C,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,SAAf,GAA2B,CAA3B,CAA8B;;AApB9C;;AAwBA,OAAK,oBAAL;AACA,OAAK,oBAAL;AAEA,EArCD;;AAuCA,MAAK,KAAL,GAAa,UAAW,KAAX,EAAmB;;AAE/B,UAAS,MAAM,OAAf;;AAEC,QAAK,EAAL;AAAS,eAAY,KAAK,uBAAL,GAA+B,CAA/B,CAAkC;;AAEvD,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,OAAf,GAAyB,CAAzB,CAA4B;AAC3C,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,IAAf,GAAsB,CAAtB,CAAyB;;AAExC,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,IAAf,GAAsB,CAAtB,CAAyB;AACxC,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,KAAf,GAAuB,CAAvB,CAA0B;;AAEzC,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,EAAf,GAAoB,CAApB,CAAuB;AACtC,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,IAAf,GAAsB,CAAtB,CAAyB;;AAExC,QAAK,EAAL;AAAS,UAAO,KAAK,SAAL,CAAe,OAAf,GAAyB,CAAzB,CAA4B;AAC5C,QAAK,EAAL;AAAS,YAAS,KAAK,SAAL,CAAe,SAAf,GAA2B,CAA3B,CAA8B;;AAEhD,QAAK,EAAL;AAAS,YAAS,KAAK,SAAL,CAAe,OAAf,GAAyB,CAAzB,CAA4B;AAC9C,QAAK,EAAL;AAAS,aAAU,KAAK,SAAL,CAAe,QAAf,GAA0B,CAA1B,CAA6B;;AAEhD,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,QAAf,GAA0B,CAA1B,CAA6B;AAC5C,QAAK,EAAL;AAAS,SAAM,KAAK,SAAL,CAAe,SAAf,GAA2B,CAA3B,CAA8B;;AApB9C;;AAwBA,OAAK,oBAAL;AACA,OAAK,oBAAL;AAEA,EA7BD;;AA+BA,MAAK,SAAL,GAAiB,UAAW,KAAX,EAAmB;;AAEnC,MAAK,KAAK,UAAL,KAAoB,QAAzB,EAAoC;;AAEnC,QAAK,UAAL,CAAgB,KAAhB;AAEA;;AAED,QAAM,cAAN;AACA,QAAM,eAAN;;AAEA,MAAK,KAAK,UAAV,EAAuB;;AAEtB,QAAK,WAAL;AAEA,GAJD,MAIO;;AAEN,WAAS,MAAM,MAAf;;AAEC,SAAK,CAAL;AAAQ,UAAK,SAAL,CAAe,OAAf,GAAyB,CAAzB,CAA4B;AACpC,SAAK,CAAL;AAAQ,UAAK,SAAL,CAAe,IAAf,GAAsB,CAAtB,CAAyB;;AAHlC;;AAOA,QAAK,oBAAL;AAEA;AAED,EA5BD;;AA8BA,MAAK,SAAL,GAAiB,UAAW,KAAX,EAAmB;;AAEnC,MAAK,CAAE,KAAK,UAAP,IAAqB,KAAK,WAAL,GAAmB,CAA7C,EAAiD;;AAEhD,OAAI,YAAY,KAAK,sBAAL,EAAhB;AACA,OAAI,YAAY,UAAU,IAAV,CAAgB,CAAhB,IAAsB,CAAtC;AACA,OAAI,aAAa,UAAU,IAAV,CAAgB,CAAhB,IAAsB,CAAvC;;AAEA,QAAK,SAAL,CAAe,OAAf,GAAyB,EAAM,MAAM,KAAN,GAAc,UAAU,MAAV,CAAkB,CAAlB,CAAhB,GAA0C,SAA9C,IAA4D,SAArF;AACA,QAAK,SAAL,CAAe,SAAf,GAA2B,CAAI,MAAM,KAAN,GAAc,UAAU,MAAV,CAAkB,CAAlB,CAAhB,GAA0C,UAA5C,IAA2D,UAAtF;;AAEA,QAAK,oBAAL;AAEA;AAED,EAfD;;AAiBA,MAAK,OAAL,GAAe,UAAW,KAAX,EAAmB;;AAEjC,QAAM,cAAN;AACA,QAAM,eAAN;;AAEA,MAAK,KAAK,UAAV,EAAuB;;AAEtB,QAAK,WAAL;;AAEA,QAAK,SAAL,CAAe,OAAf,GAAyB,KAAK,SAAL,CAAe,SAAf,GAA2B,CAApD;AAEA,GAND,MAMO;;AAEN,WAAS,MAAM,MAAf;;AAEC,SAAK,CAAL;AAAQ,UAAK,SAAL,CAAe,OAAf,GAAyB,CAAzB,CAA4B;AACpC,SAAK,CAAL;AAAQ,UAAK,SAAL,CAAe,IAAf,GAAsB,CAAtB,CAAyB;;AAHlC;;AAOA,QAAK,oBAAL;AAEA;;AAED,OAAK,oBAAL;AAEA,EA1BD;;AA4BA,MAAK,MAAL,GAAc,YAAY;;AAEzB,MAAI,iBAAiB,IAAI,MAAM,UAAV,EAArB;AACA,MAAI,eAAe,IAAI,MAAM,OAAV,EAAnB;;AAEA,SAAO,UAAW,KAAX,EAAmB;;AAEzB,OAAI,WAAW,QAAQ,MAAM,aAA7B;AACA,OAAI,UAAU,QAAQ,MAAM,SAA5B;;AAEA,SAAM,MAAN,CAAa,UAAb,CAAyB,MAAM,UAAN,CAAiB,CAAjB,GAAqB,QAA9C;AACA,SAAM,MAAN,CAAa,UAAb,CAAyB,MAAM,UAAN,CAAiB,CAAjB,GAAqB,QAA9C;AACA,SAAM,MAAN,CAAa,UAAb,CAAyB,MAAM,UAAN,CAAiB,CAAjB,GAAqB,QAA9C;;AAEA,SAAM,aAAN,CAAoB,GAApB,CAAyB,MAAM,cAAN,CAAqB,CAArB,GAAyB,OAAlD,EAA2D,MAAM,cAAN,CAAqB,CAArB,GAAyB,OAApF,EAA6F,MAAM,cAAN,CAAqB,CAArB,GAAyB,OAAtH,EAA+H,CAA/H,EAAmI,SAAnI;AACA,SAAM,MAAN,CAAa,UAAb,CAAwB,QAAxB,CAAkC,MAAM,aAAxC;;AAEA,OACC,aAAa,iBAAb,CAAgC,MAAM,MAAN,CAAa,QAA7C,IAA0D,GAA1D,IACA,KAAM,IAAI,eAAe,GAAf,CAAoB,MAAM,MAAN,CAAa,UAAjC,CAAV,IAA4D,GAF7D,EAGE;;AAED,UAAM,aAAN,CAAqB,WAArB;AACA,mBAAe,IAAf,CAAqB,MAAM,MAAN,CAAa,UAAlC;AACA,iBAAa,IAAb,CAAmB,MAAM,MAAN,CAAa,QAAhC;AAEA;AAED,GAvBD;AAyBA,EA9Ba,EAAd;;AAgCA,MAAK,oBAAL,GAA4B,YAAY;;AAEvC,MAAI,UAAY,KAAK,SAAL,CAAe,OAAf,IAA4B,KAAK,WAAL,IAAoB,CAAE,KAAK,SAAL,CAAe,IAAnE,GAA8E,CAA9E,GAAkF,CAAhG;;AAEA,OAAK,UAAL,CAAgB,CAAhB,GAAsB,CAAE,KAAK,SAAL,CAAe,IAAjB,GAAwB,KAAK,SAAL,CAAe,KAA7D;AACA,OAAK,UAAL,CAAgB,CAAhB,GAAsB,CAAE,KAAK,SAAL,CAAe,IAAjB,GAAwB,KAAK,SAAL,CAAe,EAA7D;AACA,OAAK,UAAL,CAAgB,CAAhB,GAAsB,CAAE,OAAF,GAAY,KAAK,SAAL,CAAe,IAAjD;;AAEA;AAEA,EAVD;;AAYA,MAAK,oBAAL,GAA4B,YAAY;;AAEvC,OAAK,cAAL,CAAoB,CAApB,GAA0B,CAAE,KAAK,SAAL,CAAe,SAAjB,GAA6B,KAAK,SAAL,CAAe,OAAtE;AACA,OAAK,cAAL,CAAoB,CAApB,GAA0B,CAAE,KAAK,SAAL,CAAe,QAAjB,GAA4B,KAAK,SAAL,CAAe,OAArE;AACA,OAAK,cAAL,CAAoB,CAApB,GAA0B,CAAE,KAAK,SAAL,CAAe,SAAjB,GAA6B,KAAK,SAAL,CAAe,QAAtE;;AAEA;AAEA,EARD;;AAUA,MAAK,sBAAL,GAA8B,YAAY;;AAEzC,MAAK,KAAK,UAAL,IAAmB,QAAxB,EAAmC;;AAElC,UAAO;AACN,UAAM,CAAE,KAAK,UAAL,CAAgB,WAAlB,EAA+B,KAAK,UAAL,CAAgB,YAA/C,CADA;AAEN,YAAQ,CAAE,KAAK,UAAL,CAAgB,UAAlB,EAA8B,KAAK,UAAL,CAAgB,SAA9C;AAFF,IAAP;AAKA,GAPD,MAOO;;AAEN,UAAO;AACN,UAAM,CAAE,OAAO,UAAT,EAAqB,OAAO,WAA5B,CADA;AAEN,YAAQ,CAAE,CAAF,EAAK,CAAL;AAFF,IAAP;AAKA;AAED,EAlBD;;AAoBA,UAAS,IAAT,CAAe,KAAf,EAAsB,EAAtB,EAA2B;;AAE1B,SAAO,YAAY;;AAElB,MAAG,KAAH,CAAU,KAAV,EAAiB,SAAjB;AAEA,GAJD;AAMA;;AAED,UAAS,WAAT,CAAsB,KAAtB,EAA8B;;AAE7B,QAAM,cAAN;AAEA;;AAED,MAAK,OAAL,GAAe,YAAY;;AAE1B,OAAK,UAAL,CAAgB,mBAAhB,CAAqC,aAArC,EAAoD,WAApD,EAAiE,KAAjE;AACA,OAAK,UAAL,CAAgB,mBAAhB,CAAqC,WAArC,EAAkD,UAAlD,EAA8D,KAA9D;AACA,OAAK,UAAL,CAAgB,mBAAhB,CAAqC,WAArC,EAAkD,UAAlD,EAA8D,KAA9D;AACA,OAAK,UAAL,CAAgB,mBAAhB,CAAqC,SAArC,EAAgD,QAAhD,EAA0D,KAA1D;;AAEA,SAAO,mBAAP,CAA4B,SAA5B,EAAuC,QAAvC,EAAiD,KAAjD;AACA,SAAO,mBAAP,CAA4B,OAA5B,EAAqC,MAArC,EAA6C,KAA7C;AAEA,EAVD;;AAYA,KAAI,aAAa,KAAM,IAAN,EAAY,KAAK,SAAjB,CAAjB;AACA,KAAI,aAAa,KAAM,IAAN,EAAY,KAAK,SAAjB,CAAjB;AACA,KAAI,WAAW,KAAM,IAAN,EAAY,KAAK,OAAjB,CAAf;AACA,KAAI,WAAW,KAAM,IAAN,EAAY,KAAK,OAAjB,CAAf;AACA,KAAI,SAAS,KAAM,IAAN,EAAY,KAAK,KAAjB,CAAb;;AAEA,MAAK,UAAL,CAAgB,gBAAhB,CAAkC,aAAlC,EAAiD,WAAjD,EAA8D,KAA9D;;AAEA,MAAK,UAAL,CAAgB,gBAAhB,CAAkC,WAAlC,EAA+C,UAA/C,EAA2D,KAA3D;AACA,MAAK,UAAL,CAAgB,gBAAhB,CAAkC,WAAlC,EAA+C,UAA/C,EAA2D,KAA3D;AACA,MAAK,UAAL,CAAgB,gBAAhB,CAAkC,SAAlC,EAA6C,QAA7C,EAAuD,KAAvD;;AAEA,QAAO,gBAAP,CAAyB,SAAzB,EAAoC,QAApC,EAA8C,KAA9C;AACA,QAAO,gBAAP,CAAyB,OAAzB,EAAkC,MAAlC,EAA0C,KAA1C;;AAEA,MAAK,oBAAL;AACA,MAAK,oBAAL;AAEA,CA/SD;;AAiTA,MAAM,WAAN,CAAkB,SAAlB,GAA8B,OAAO,MAAP,CAAe,MAAM,eAAN,CAAsB,SAArC,CAA9B;AACA,MAAM,WAAN,CAAkB,SAAlB,CAA4B,WAA5B,GAA0C,MAAM,WAAhD","file":"FlyControls-compiled.js","sourcesContent":["console.warn( \"THREE.FlyControls: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n\nTHREE.FlyControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.FlyControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document;\n\n\t}\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\tif ( domElement ) this.domElement.setAttribute( 'tabindex', - 1 );\n\n\t// API\n\n\tthis.movementSpeed = 1.0;\n\tthis.rollSpeed = 0.005;\n\n\tthis.dragToLook = false;\n\tthis.autoForward = false;\n\n\t// disable default target object behavior\n\n\t// internals\n\n\tvar scope = this;\n\tvar changeEvent = { type: \"change\" };\n\tvar EPS = 0.000001;\n\n\tthis.tmpQuaternion = new THREE.Quaternion();\n\n\tthis.mouseStatus = 0;\n\n\tthis.moveState = { up: 0, down: 0, left: 0, right: 0, forward: 0, back: 0, pitchUp: 0, pitchDown: 0, yawLeft: 0, yawRight: 0, rollLeft: 0, rollRight: 0 };\n\tthis.moveVector = new THREE.Vector3( 0, 0, 0 );\n\tthis.rotationVector = new THREE.Vector3( 0, 0, 0 );\n\n\tthis.keydown = function ( event ) {\n\n\t\tif ( event.altKey ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//event.preventDefault();\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 16: /* shift */ this.movementSpeedMultiplier = .1; break;\n\n\t\t\tcase 87: /*W*/ this.moveState.forward = 1; break;\n\t\t\tcase 83: /*S*/ this.moveState.back = 1; break;\n\n\t\t\tcase 65: /*A*/ this.moveState.left = 1; break;\n\t\t\tcase 68: /*D*/ this.moveState.right = 1; break;\n\n\t\t\tcase 82: /*R*/ this.moveState.up = 1; break;\n\t\t\tcase 70: /*F*/ this.moveState.down = 1; break;\n\n\t\t\tcase 38: /*up*/ this.moveState.pitchUp = 1; break;\n\t\t\tcase 40: /*down*/ this.moveState.pitchDown = 1; break;\n\n\t\t\tcase 37: /*left*/ this.moveState.yawLeft = 1; break;\n\t\t\tcase 39: /*right*/ this.moveState.yawRight = 1; break;\n\n\t\t\tcase 81: /*Q*/ this.moveState.rollLeft = 1; break;\n\t\t\tcase 69: /*E*/ this.moveState.rollRight = 1; break;\n\n\t\t}\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.keyup = function ( event ) {\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 16: /* shift */ this.movementSpeedMultiplier = 1; break;\n\n\t\t\tcase 87: /*W*/ this.moveState.forward = 0; break;\n\t\t\tcase 83: /*S*/ this.moveState.back = 0; break;\n\n\t\t\tcase 65: /*A*/ this.moveState.left = 0; break;\n\t\t\tcase 68: /*D*/ this.moveState.right = 0; break;\n\n\t\t\tcase 82: /*R*/ this.moveState.up = 0; break;\n\t\t\tcase 70: /*F*/ this.moveState.down = 0; break;\n\n\t\t\tcase 38: /*up*/ this.moveState.pitchUp = 0; break;\n\t\t\tcase 40: /*down*/ this.moveState.pitchDown = 0; break;\n\n\t\t\tcase 37: /*left*/ this.moveState.yawLeft = 0; break;\n\t\t\tcase 39: /*right*/ this.moveState.yawRight = 0; break;\n\n\t\t\tcase 81: /*Q*/ this.moveState.rollLeft = 0; break;\n\t\t\tcase 69: /*E*/ this.moveState.rollRight = 0; break;\n\n\t\t}\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.mousedown = function ( event ) {\n\n\t\tif ( this.domElement !== document ) {\n\n\t\t\tthis.domElement.focus();\n\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.dragToLook ) {\n\n\t\t\tthis.mouseStatus ++;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveState.forward = 1; break;\n\t\t\t\tcase 2: this.moveState.back = 1; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\n\t\t}\n\n\t};\n\n\tthis.mousemove = function ( event ) {\n\n\t\tif ( ! this.dragToLook || this.mouseStatus > 0 ) {\n\n\t\t\tvar container = this.getContainerDimensions();\n\t\t\tvar halfWidth = container.size[ 0 ] / 2;\n\t\t\tvar halfHeight = container.size[ 1 ] / 2;\n\n\t\t\tthis.moveState.yawLeft = - ( ( event.pageX - container.offset[ 0 ] ) - halfWidth ) / halfWidth;\n\t\t\tthis.moveState.pitchDown = ( ( event.pageY - container.offset[ 1 ] ) - halfHeight ) / halfHeight;\n\n\t\t\tthis.updateRotationVector();\n\n\t\t}\n\n\t};\n\n\tthis.mouseup = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.dragToLook ) {\n\n\t\t\tthis.mouseStatus --;\n\n\t\t\tthis.moveState.yawLeft = this.moveState.pitchDown = 0;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveState.forward = 0; break;\n\t\t\t\tcase 2: this.moveState.back = 0; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\n\t\t}\n\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.update = function () {\n\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\t\tvar lastPosition = new THREE.Vector3();\n\n\t\treturn function ( delta ) {\n\n\t\t\tvar moveMult = delta * scope.movementSpeed;\n\t\t\tvar rotMult = delta * scope.rollSpeed;\n\n\t\t\tscope.object.translateX( scope.moveVector.x * moveMult );\n\t\t\tscope.object.translateY( scope.moveVector.y * moveMult );\n\t\t\tscope.object.translateZ( scope.moveVector.z * moveMult );\n\n\t\t\tscope.tmpQuaternion.set( scope.rotationVector.x * rotMult, scope.rotationVector.y * rotMult, scope.rotationVector.z * rotMult, 1 ).normalize();\n\t\t\tscope.object.quaternion.multiply( scope.tmpQuaternion );\n\n\t\t\tif (\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS\n\t\t\t) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tlastPosition.copy( scope.object.position );\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tthis.updateMovementVector = function () {\n\n\t\tvar forward = ( this.moveState.forward || ( this.autoForward && ! this.moveState.back ) ) ? 1 : 0;\n\n\t\tthis.moveVector.x = ( - this.moveState.left + this.moveState.right );\n\t\tthis.moveVector.y = ( - this.moveState.down + this.moveState.up );\n\t\tthis.moveVector.z = ( - forward + this.moveState.back );\n\n\t\t//console.log( 'move:', [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\n\n\t};\n\n\tthis.updateRotationVector = function () {\n\n\t\tthis.rotationVector.x = ( - this.moveState.pitchDown + this.moveState.pitchUp );\n\t\tthis.rotationVector.y = ( - this.moveState.yawRight + this.moveState.yawLeft );\n\t\tthis.rotationVector.z = ( - this.moveState.rollRight + this.moveState.rollLeft );\n\n\t\t//console.log( 'rotate:', [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\n\n\t};\n\n\tthis.getContainerDimensions = function () {\n\n\t\tif ( this.domElement != document ) {\n\n\t\t\treturn {\n\t\t\t\tsize: [ this.domElement.offsetWidth, this.domElement.offsetHeight ],\n\t\t\t\toffset: [ this.domElement.offsetLeft, this.domElement.offsetTop ]\n\t\t\t};\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\tsize: [ window.innerWidth, window.innerHeight ],\n\t\t\t\toffset: [ 0, 0 ]\n\t\t\t};\n\n\t\t}\n\n\t};\n\n\tfunction bind( scope, fn ) {\n\n\t\treturn function () {\n\n\t\t\tfn.apply( scope, arguments );\n\n\t\t};\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', _mousedown, false );\n\t\tthis.domElement.removeEventListener( 'mousemove', _mousemove, false );\n\t\tthis.domElement.removeEventListener( 'mouseup', _mouseup, false );\n\n\t\twindow.removeEventListener( 'keydown', _keydown, false );\n\t\twindow.removeEventListener( 'keyup', _keyup, false );\n\n\t};\n\n\tvar _mousemove = bind( this, this.mousemove );\n\tvar _mousedown = bind( this, this.mousedown );\n\tvar _mouseup = bind( this, this.mouseup );\n\tvar _keydown = bind( this, this.keydown );\n\tvar _keyup = bind( this, this.keyup );\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\n\tthis.domElement.addEventListener( 'mousemove', _mousemove, false );\n\tthis.domElement.addEventListener( 'mousedown', _mousedown, false );\n\tthis.domElement.addEventListener( 'mouseup', _mouseup, false );\n\n\twindow.addEventListener( 'keydown', _keydown, false );\n\twindow.addEventListener( 'keyup', _keyup, false );\n\n\tthis.updateMovementVector();\n\tthis.updateRotationVector();\n\n};\n\nTHREE.FlyControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.FlyControls.prototype.constructor = THREE.FlyControls;\n"]}