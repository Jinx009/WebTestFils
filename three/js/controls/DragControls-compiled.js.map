{"version":3,"sources":["DragControls.js"],"names":[],"mappings":"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","file":"DragControls-compiled.js","sourcesContent":["console.warn( \"THREE.DragControls: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n\nTHREE.DragControls = function ( _objects, _camera, _domElement ) {\n\n\tvar _plane = new THREE.Plane();\n\tvar _raycaster = new THREE.Raycaster();\n\n\tvar _mouse = new THREE.Vector2();\n\tvar _offset = new THREE.Vector3();\n\tvar _intersection = new THREE.Vector3();\n\tvar _worldPosition = new THREE.Vector3();\n\tvar _inverseMatrix = new THREE.Matrix4();\n\tvar _intersections = [];\n\n\tvar _selected = null, _hovered = null;\n\n\t//\n\n\tvar scope = this;\n\n\tfunction activate() {\n\n\t\t_domElement.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\t\t_domElement.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\t\t_domElement.addEventListener( 'mouseup', onDocumentMouseCancel, false );\n\t\t_domElement.addEventListener( 'mouseleave', onDocumentMouseCancel, false );\n\t\t_domElement.addEventListener( 'touchmove', onDocumentTouchMove, false );\n\t\t_domElement.addEventListener( 'touchstart', onDocumentTouchStart, false );\n\t\t_domElement.addEventListener( 'touchend', onDocumentTouchEnd, false );\n\n\t}\n\n\tfunction deactivate() {\n\n\t\t_domElement.removeEventListener( 'mousemove', onDocumentMouseMove, false );\n\t\t_domElement.removeEventListener( 'mousedown', onDocumentMouseDown, false );\n\t\t_domElement.removeEventListener( 'mouseup', onDocumentMouseCancel, false );\n\t\t_domElement.removeEventListener( 'mouseleave', onDocumentMouseCancel, false );\n\t\t_domElement.removeEventListener( 'touchmove', onDocumentTouchMove, false );\n\t\t_domElement.removeEventListener( 'touchstart', onDocumentTouchStart, false );\n\t\t_domElement.removeEventListener( 'touchend', onDocumentTouchEnd, false );\n\n\t\t_domElement.style.cursor = '';\n\n\t}\n\n\tfunction dispose() {\n\n\t\tdeactivate();\n\n\t}\n\n\tfunction getObjects() {\n\n\t\treturn _objects;\n\n\t}\n\n\tfunction onDocumentMouseMove( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tvar rect = _domElement.getBoundingClientRect();\n\n\t\t_mouse.x = ( ( event.clientX - rect.left ) / rect.width ) * 2 - 1;\n\t\t_mouse.y = - ( ( event.clientY - rect.top ) / rect.height ) * 2 + 1;\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\n\t\tif ( _selected && scope.enabled ) {\n\n\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( { type: 'drag', object: _selected } );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t_intersections.length = 0;\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\t\t_raycaster.intersectObjects( _objects, true, _intersections );\n\n\t\tif ( _intersections.length > 0 ) {\n\n\t\t\tvar object = _intersections[ 0 ].object;\n\n\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( object.matrixWorld ) );\n\n\t\t\tif ( _hovered !== object ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'hoveron', object: object } );\n\n\t\t\t\t_domElement.style.cursor = 'pointer';\n\t\t\t\t_hovered = object;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( _hovered !== null ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'hoveroff', object: _hovered } );\n\n\t\t\t\t_domElement.style.cursor = 'auto';\n\t\t\t\t_hovered = null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction onDocumentMouseDown( event ) {\n\n\t\tevent.preventDefault();\n\n\t\t_intersections.length = 0;\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\t\t_raycaster.intersectObjects( _objects, true, _intersections );\n\n\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t_selected = ( scope.transformGroup === true ) ? _objects[ 0 ] : _intersections[ 0 ].object;\n\n\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_inverseMatrix.getInverse( _selected.parent.matrixWorld );\n\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t}\n\n\t\t\t_domElement.style.cursor = 'move';\n\n\t\t\tscope.dispatchEvent( { type: 'dragstart', object: _selected } );\n\n\t\t}\n\n\n\t}\n\n\tfunction onDocumentMouseCancel( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tif ( _selected ) {\n\n\t\t\tscope.dispatchEvent( { type: 'dragend', object: _selected } );\n\n\t\t\t_selected = null;\n\n\t\t}\n\n\t\t_domElement.style.cursor = _hovered ? 'pointer' : 'auto';\n\n\t}\n\n\tfunction onDocumentTouchMove( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent = event.changedTouches[ 0 ];\n\n\t\tvar rect = _domElement.getBoundingClientRect();\n\n\t\t_mouse.x = ( ( event.clientX - rect.left ) / rect.width ) * 2 - 1;\n\t\t_mouse.y = - ( ( event.clientY - rect.top ) / rect.height ) * 2 + 1;\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\n\t\tif ( _selected && scope.enabled ) {\n\n\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( { type: 'drag', object: _selected } );\n\n\t\t\treturn;\n\n\t\t}\n\n\t}\n\n\tfunction onDocumentTouchStart( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent = event.changedTouches[ 0 ];\n\n\t\tvar rect = _domElement.getBoundingClientRect();\n\n\t\t_mouse.x = ( ( event.clientX - rect.left ) / rect.width ) * 2 - 1;\n\t\t_mouse.y = - ( ( event.clientY - rect.top ) / rect.height ) * 2 + 1;\n\n\t\t_intersections.length = 0;\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\t\t _raycaster.intersectObjects( _objects, true, _intersections );\n\n\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t_selected = ( scope.transformGroup === true ) ? _objects[ 0 ] : _intersections[ 0 ].object;\n\n\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_inverseMatrix.getInverse( _selected.parent.matrixWorld );\n\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t}\n\n\t\t\t_domElement.style.cursor = 'move';\n\n\t\t\tscope.dispatchEvent( { type: 'dragstart', object: _selected } );\n\n\t\t}\n\n\n\t}\n\n\tfunction onDocumentTouchEnd( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tif ( _selected ) {\n\n\t\t\tscope.dispatchEvent( { type: 'dragend', object: _selected } );\n\n\t\t\t_selected = null;\n\n\t\t}\n\n\t\t_domElement.style.cursor = 'auto';\n\n\t}\n\n\tactivate();\n\n\t// API\n\n\tthis.enabled = true;\n\tthis.transformGroup = false;\n\n\tthis.activate = activate;\n\tthis.deactivate = deactivate;\n\tthis.dispose = dispose;\n\tthis.getObjects = getObjects;\n\n};\n\nTHREE.DragControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.DragControls.prototype.constructor = THREE.DragControls;\n"]}