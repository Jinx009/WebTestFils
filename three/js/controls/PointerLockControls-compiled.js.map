{"version":3,"sources":["PointerLockControls.js"],"names":[],"mappings":"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","file":"PointerLockControls-compiled.js","sourcesContent":["console.warn( \"THREE.PointerLockControls: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n\nTHREE.PointerLockControls = function ( camera, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document.body;\n\n\t}\n\n\tthis.domElement = domElement;\n\tthis.isLocked = false;\n\n\t// Set to constrain the pitch of the camera\n\t// Range is 0 to Math.PI radians\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar lockEvent = { type: 'lock' };\n\tvar unlockEvent = { type: 'unlock' };\n\n\tvar euler = new THREE.Euler( 0, 0, 0, 'YXZ' );\n\n\tvar PI_2 = Math.PI / 2;\n\n\tvar vec = new THREE.Vector3();\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.isLocked === false ) return;\n\n\t\tvar movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n\t\tvar movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n\t\teuler.setFromQuaternion( camera.quaternion );\n\n\t\teuler.y -= movementX * 0.002;\n\t\teuler.x -= movementY * 0.002;\n\n\t\teuler.x = Math.max( PI_2 - scope.maxPolarAngle, Math.min( PI_2 - scope.minPolarAngle, euler.x ) );\n\n\t\tcamera.quaternion.setFromEuler( euler );\n\n\t\tscope.dispatchEvent( changeEvent );\n\n\t}\n\n\tfunction onPointerlockChange() {\n\n\t\tif ( scope.domElement.ownerDocument.pointerLockElement === scope.domElement ) {\n\n\t\t\tscope.dispatchEvent( lockEvent );\n\n\t\t\tscope.isLocked = true;\n\n\t\t} else {\n\n\t\t\tscope.dispatchEvent( unlockEvent );\n\n\t\t\tscope.isLocked = false;\n\n\t\t}\n\n\t}\n\n\tfunction onPointerlockError() {\n\n\t\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\n\n\t}\n\n\tthis.connect = function () {\n\n\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockchange', onPointerlockChange, false );\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockerror', onPointerlockError, false );\n\n\t};\n\n\tthis.disconnect = function () {\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockchange', onPointerlockChange, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockerror', onPointerlockError, false );\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tthis.disconnect();\n\n\t};\n\n\tthis.getObject = function () { // retaining this method for backward compatibility\n\n\t\treturn camera;\n\n\t};\n\n\tthis.getDirection = function () {\n\n\t\tvar direction = new THREE.Vector3( 0, 0, - 1 );\n\n\t\treturn function ( v ) {\n\n\t\t\treturn v.copy( direction ).applyQuaternion( camera.quaternion );\n\n\t\t};\n\n\t}();\n\n\tthis.moveForward = function ( distance ) {\n\n\t\t// move forward parallel to the xz-plane\n\t\t// assumes camera.up is y-up\n\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tvec.crossVectors( camera.up, vec );\n\n\t\tcamera.position.addScaledVector( vec, distance );\n\n\t};\n\n\tthis.moveRight = function ( distance ) {\n\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tcamera.position.addScaledVector( vec, distance );\n\n\t};\n\n\tthis.lock = function () {\n\n\t\tthis.domElement.requestPointerLock();\n\n\t};\n\n\tthis.unlock = function () {\n\n\t\tscope.domElement.ownerDocument.exitPointerLock();\n\n\t};\n\n\tthis.connect();\n\n};\n\nTHREE.PointerLockControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.PointerLockControls.prototype.constructor = THREE.PointerLockControls;\n"]}