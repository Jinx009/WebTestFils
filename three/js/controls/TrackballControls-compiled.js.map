{"version":3,"sources":["TrackballControls.js"],"names":[],"mappings":"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","file":"TrackballControls-compiled.js","sourcesContent":["console.warn( \"THREE.TrackballControls: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n\nTHREE.TrackballControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.TrackballControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.TrackballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tvar scope = this;\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\tthis.mouseButtons = { LEFT: THREE.MOUSE.ROTATE, MIDDLE: THREE.MOUSE.ZOOM, RIGHT: THREE.MOUSE.PAN };\n\n\t// internals\n\n\tthis.target = new THREE.Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new THREE.Vector3();\n\tvar lastZoom = 1;\n\n\tvar _state = STATE.NONE,\n\t\t_keyState = STATE.NONE,\n\n\t\t_eye = new THREE.Vector3(),\n\n\t\t_movePrev = new THREE.Vector2(),\n\t\t_moveCurr = new THREE.Vector2(),\n\n\t\t_lastAxis = new THREE.Vector3(),\n\t\t_lastAngle = 0,\n\n\t\t_zoomStart = new THREE.Vector2(),\n\t\t_zoomEnd = new THREE.Vector2(),\n\n\t\t_touchZoomDistanceStart = 0,\n\t\t_touchZoomDistanceEnd = 0,\n\n\t\t_panStart = new THREE.Vector2(),\n\t\t_panEnd = new THREE.Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tvar box = scope.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tvar d = scope.domElement.ownerDocument.documentElement;\n\t\tscope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tscope.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tscope.screen.width = box.width;\n\t\tscope.screen.height = box.height;\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new THREE.Vector2();\n\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - scope.screen.left ) / scope.screen.width,\n\t\t\t\t( pageY - scope.screen.top ) / scope.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseOnCircle = ( function () {\n\n\t\tvar vector = new THREE.Vector2();\n\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( ( pageX - scope.screen.width * 0.5 - scope.screen.left ) / ( scope.screen.width * 0.5 ) ),\n\t\t\t\t( ( scope.screen.height + 2 * ( scope.screen.top - pageY ) ) / scope.screen.width ) // screen.width intentional\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = ( function () {\n\n\t\tvar axis = new THREE.Vector3(),\n\t\t\tquaternion = new THREE.Quaternion(),\n\t\t\teyeDirection = new THREE.Vector3(),\n\t\t\tobjectUpDirection = new THREE.Vector3(),\n\t\t\tobjectSidewaysDirection = new THREE.Vector3(),\n\t\t\tmoveDirection = new THREE.Vector3(),\n\t\t\tangle;\n\n\t\treturn function rotateCamera() {\n\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\tangle = moveDirection.length();\n\n\t\t\tif ( angle ) {\n\n\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\n\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\tobjectUpDirection.copy( scope.object.up ).normalize();\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\tangle *= scope.rotateSpeed;\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t_lastAngle = angle;\n\n\t\t\t} else if ( ! scope.staticMoving && _lastAngle ) {\n\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - scope.dynamicDampingFactor );\n\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t}\n\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t};\n\n\t}() );\n\n\n\tthis.zoomCamera = function () {\n\n\t\tvar factor;\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom *= factor;\n\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * scope.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom /= factor;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = ( function () {\n\n\t\tvar mouseChange = new THREE.Vector2(),\n\t\t\tobjectUp = new THREE.Vector3(),\n\t\t\tpan = new THREE.Vector3();\n\n\t\treturn function panCamera() {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tif ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tvar scale_x = ( scope.object.right - scope.object.left ) / scope.object.zoom / scope.domElement.clientWidth;\n\t\t\t\t\tvar scale_y = ( scope.object.top - scope.object.bottom ) / scope.object.zoom / scope.domElement.clientWidth;\n\n\t\t\t\t\tmouseChange.x *= scale_x;\n\t\t\t\t\tmouseChange.y *= scale_y;\n\n\t\t\t\t}\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * scope.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( scope.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( scope.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\tscope.object.position.add( pan );\n\t\t\t\tscope.target.add( pan );\n\n\t\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( scope.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.checkDistances = function () {\n\n\t\tif ( ! scope.noZoom || ! scope.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > scope.maxDistance * scope.maxDistance ) {\n\n\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.maxDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < scope.minDistance * scope.minDistance ) {\n\n\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.minDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\tif ( ! scope.noRotate ) {\n\n\t\t\tscope.rotateCamera();\n\n\t\t}\n\n\t\tif ( ! scope.noZoom ) {\n\n\t\t\tscope.zoomCamera();\n\n\t\t}\n\n\t\tif ( ! scope.noPan ) {\n\n\t\t\tscope.panCamera();\n\n\t\t}\n\n\t\tscope.object.position.addVectors( scope.target, _eye );\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscope.checkDistances();\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\n\t\t\t}\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS || lastZoom !== scope.object.zoom ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastZoom = scope.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_keyState = STATE.NONE;\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.up.copy( scope.up0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\n\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\tscope.object.lookAt( scope.target );\n\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( scope.object.position );\n\t\tlastZoom = scope.object.zoom;\n\n\t};\n\n\t// listeners\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction keydown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\tif ( _keyState !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === scope.keys[ STATE.ROTATE ] && ! scope.noRotate ) {\n\n\t\t\t_keyState = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === scope.keys[ STATE.ZOOM ] && ! scope.noZoom ) {\n\n\t\t\t_keyState = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === scope.keys[ STATE.PAN ] && ! scope.noPan ) {\n\n\t\t\t_keyState = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup() {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t_keyState = STATE.NONE;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase scope.mouseButtons.LEFT:\n\t\t\t\t\t_state = STATE.ROTATE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.mouseButtons.MIDDLE:\n\t\t\t\t\t_state = STATE.ZOOM;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.mouseButtons.RIGHT:\n\t\t\t\t\t_state = STATE.PAN;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t_state = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy( _panStart );\n\n\t\t}\n\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove, false );\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp, false );\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tif ( scope.noZoom === true ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.deltaMode ) {\n\n\t\t\tcase 2:\n\t\t\t\t// Zoom in pages\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t// Zoom in lines\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tscope.dispatchEvent( startEvent );\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 0:\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', mousewheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', touchend, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp, false );\n\n\t\twindow.removeEventListener( 'keydown', keydown, false );\n\t\twindow.removeEventListener( 'keyup', keyup, false );\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\n\tthis.domElement.addEventListener( 'pointerdown', onPointerDown, false );\n\tthis.domElement.addEventListener( 'wheel', mousewheel, false );\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\tthis.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove, false );\n\tthis.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTHREE.TrackballControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.TrackballControls.prototype.constructor = THREE.TrackballControls;\n"]}