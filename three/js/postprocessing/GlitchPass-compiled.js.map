{"version":3,"sources":["GlitchPass.js"],"names":[],"mappings":"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","file":"GlitchPass-compiled.js","sourcesContent":["console.warn( \"THREE.GlitchPass: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n\nTHREE.GlitchPass = function ( dt_size ) {\n\n\tTHREE.Pass.call( this );\n\n\tif ( THREE.DigitalGlitch === undefined ) console.error( \"THREE.GlitchPass relies on THREE.DigitalGlitch\" );\n\n\tvar shader = THREE.DigitalGlitch;\n\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\tif ( dt_size == undefined ) dt_size = 64;\n\n\n\tthis.uniforms[ \"tDisp\" ].value = this.generateHeightmap( dt_size );\n\n\n\tthis.material = new THREE.ShaderMaterial( {\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\t} );\n\n\tthis.fsQuad = new THREE.Pass.FullScreenQuad( this.material );\n\n\tthis.goWild = false;\n\tthis.curF = 0;\n\tthis.generateTrigger();\n\n};\n\nTHREE.GlitchPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.GlitchPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.uniforms[ 'seed' ].value = Math.random();//default seeding\n\t\tthis.uniforms[ 'byp' ].value = 0;\n\n\t\tif ( this.curF % this.randX == 0 || this.goWild == true ) {\n\n\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 30;\n\t\t\tthis.uniforms[ 'angle' ].value = THREE.MathUtils.randFloat( - Math.PI, Math.PI );\n\t\t\tthis.uniforms[ 'seed_x' ].value = THREE.MathUtils.randFloat( - 1, 1 );\n\t\t\tthis.uniforms[ 'seed_y' ].value = THREE.MathUtils.randFloat( - 1, 1 );\n\t\t\tthis.uniforms[ 'distortion_x' ].value = THREE.MathUtils.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'distortion_y' ].value = THREE.MathUtils.randFloat( 0, 1 );\n\t\t\tthis.curF = 0;\n\t\t\tthis.generateTrigger();\n\n\t\t} else if ( this.curF % this.randX < this.randX / 5 ) {\n\n\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 90;\n\t\t\tthis.uniforms[ 'angle' ].value = THREE.MathUtils.randFloat( - Math.PI, Math.PI );\n\t\t\tthis.uniforms[ 'distortion_x' ].value = THREE.MathUtils.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'distortion_y' ].value = THREE.MathUtils.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'seed_x' ].value = THREE.MathUtils.randFloat( - 0.3, 0.3 );\n\t\t\tthis.uniforms[ 'seed_y' ].value = THREE.MathUtils.randFloat( - 0.3, 0.3 );\n\n\t\t} else if ( this.goWild == false ) {\n\n\t\t\tthis.uniforms[ 'byp' ].value = 1;\n\n\t\t}\n\n\t\tthis.curF ++;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\tif ( this.clear ) renderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t},\n\n\tgenerateTrigger: function () {\n\n\t\tthis.randX = THREE.MathUtils.randInt( 120, 240 );\n\n\t},\n\n\tgenerateHeightmap: function ( dt_size ) {\n\n\t\tvar data_arr = new Float32Array( dt_size * dt_size * 3 );\n\t\tvar length = dt_size * dt_size;\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar val = THREE.MathUtils.randFloat( 0, 1 );\n\t\t\tdata_arr[ i * 3 + 0 ] = val;\n\t\t\tdata_arr[ i * 3 + 1 ] = val;\n\t\t\tdata_arr[ i * 3 + 2 ] = val;\n\n\t\t}\n\n\t\treturn new THREE.DataTexture( data_arr, dt_size, dt_size, THREE.RGBFormat, THREE.FloatType );\n\n\t}\n\n} );\n"]}