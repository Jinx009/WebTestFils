{"version":3,"sources":["CSS3DRenderer.js"],"names":[],"mappings":"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","file":"CSS3DRenderer-compiled.js","sourcesContent":["console.warn( \"THREE.CSS3DRenderer: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n/**\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n */\n\nTHREE.CSS3DObject = function ( element ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.element = element || document.createElement( 'div' );\n\tthis.element.style.position = 'absolute';\n\tthis.element.style.pointerEvents = 'auto';\n\n\tthis.addEventListener( 'removed', function () {\n\n\t\tthis.traverse( function ( object ) {\n\n\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n};\n\nTHREE.CSS3DObject.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.CSS3DObject,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tTHREE.Object3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n} );\n\nTHREE.CSS3DSprite = function ( element ) {\n\n\tTHREE.CSS3DObject.call( this, element );\n\n};\n\nTHREE.CSS3DSprite.prototype = Object.create( THREE.CSS3DObject.prototype );\nTHREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite;\n\n//\n\nTHREE.CSS3DRenderer = function () {\n\n\tvar _this = this;\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar matrix = new THREE.Matrix4();\n\n\tvar cache = {\n\t\tcamera: { fov: 0, style: '' },\n\t\tobjects: new WeakMap()\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tthis.domElement = domElement;\n\n\tvar cameraElement = document.createElement( 'div' );\n\n\tcameraElement.style.WebkitTransformStyle = 'preserve-3d';\n\tcameraElement.style.transformStyle = 'preserve-3d';\n\tcameraElement.style.pointerEvents = 'none';\n\n\tdomElement.appendChild( cameraElement );\n\n\tvar isIE = /Trident/i.test( navigator.userAgent );\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t\tcameraElement.style.width = width + 'px';\n\t\tcameraElement.style.height = height + 'px';\n\n\t};\n\n\tfunction epsilon( value ) {\n\n\t\treturn Math.abs( value ) < 1e-10 ? 0 : value;\n\n\t}\n\n\tfunction getCameraCSSMatrix( matrix ) {\n\n\t\tvar elements = matrix.elements;\n\n\t\treturn 'matrix3d(' +\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\tepsilon( elements[ 15 ] ) +\n\t\t')';\n\n\t}\n\n\tfunction getObjectCSSMatrix( matrix, cameraCSSMatrix ) {\n\n\t\tvar elements = matrix.elements;\n\t\tvar matrix3d = 'matrix3d(' +\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\tepsilon( elements[ 15 ] ) +\n\t\t')';\n\n\t\tif ( isIE ) {\n\n\t\t\treturn 'translate(-50%,-50%)' +\n\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)' +\n\t\t\t\tcameraCSSMatrix +\n\t\t\t\tmatrix3d;\n\n\t\t}\n\n\t\treturn 'translate(-50%,-50%)' + matrix3d;\n\n\t}\n\n\tfunction renderObject( object, scene, camera, cameraCSSMatrix ) {\n\n\t\tif ( object instanceof THREE.CSS3DObject ) {\n\n\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\tvar style;\n\n\t\t\tif ( object instanceof THREE.CSS3DSprite ) {\n\n\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\tmatrix.copy( camera.matrixWorldInverse );\n\t\t\t\tmatrix.transpose();\n\t\t\t\tmatrix.copyPosition( object.matrixWorld );\n\t\t\t\tmatrix.scale( object.scale );\n\n\t\t\t\tmatrix.elements[ 3 ] = 0;\n\t\t\t\tmatrix.elements[ 7 ] = 0;\n\t\t\t\tmatrix.elements[ 11 ] = 0;\n\t\t\t\tmatrix.elements[ 15 ] = 1;\n\n\t\t\t\tstyle = getObjectCSSMatrix( matrix, cameraCSSMatrix );\n\n\t\t\t} else {\n\n\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld, cameraCSSMatrix );\n\n\t\t\t}\n\n\t\t\tvar element = object.element;\n\t\t\tvar cachedObject = cache.objects.get( object );\n\n\t\t\tif ( cachedObject === undefined || cachedObject.style !== style ) {\n\n\t\t\t\telement.style.WebkitTransform = style;\n\t\t\t\telement.style.transform = style;\n\n\t\t\t\tvar objectData = { style: style };\n\n\t\t\t\tif ( isIE ) {\n\n\t\t\t\t\tobjectData.distanceToCameraSquared = getDistanceToSquared( camera, object );\n\n\t\t\t\t}\n\n\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t}\n\n\t\t\telement.style.display = object.visible ? '' : 'none';\n\n\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], scene, camera, cameraCSSMatrix );\n\n\t\t}\n\n\t}\n\n\tvar getDistanceToSquared = function () {\n\n\t\tvar a = new THREE.Vector3();\n\t\tvar b = new THREE.Vector3();\n\n\t\treturn function ( object1, object2 ) {\n\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn a.distanceToSquared( b );\n\n\t\t};\n\n\t}();\n\n\tfunction filterAndFlatten( scene ) {\n\n\t\tvar result = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.CSS3DObject ) result.push( object );\n\n\t\t} );\n\n\t\treturn result;\n\n\t}\n\n\tfunction zOrder( scene ) {\n\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\treturn distanceA - distanceB;\n\n\t\t} );\n\n\t\tvar zMax = sorted.length;\n\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t}\n\n\t}\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tvar fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\n\n\t\tif ( cache.camera.fov !== fov ) {\n\n\t\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\t\tdomElement.style.WebkitPerspective = fov + 'px';\n\t\t\t\tdomElement.style.perspective = fov + 'px';\n\n\t\t\t} else {\n\n\t\t\t\tdomElement.style.WebkitPerspective = '';\n\t\t\t\tdomElement.style.perspective = '';\n\n\t\t\t}\n\n\t\t\tcache.camera.fov = fov;\n\n\t\t}\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( camera.isOrthographicCamera ) {\n\n\t\t\tvar tx = - ( camera.right + camera.left ) / 2;\n\t\t\tvar ty = ( camera.top + camera.bottom ) / 2;\n\n\t\t}\n\n\t\tvar cameraCSSMatrix = camera.isOrthographicCamera ?\n\t\t\t'scale(' + fov + ')' + 'translate(' + epsilon( tx ) + 'px,' + epsilon( ty ) + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse ) :\n\t\t\t'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse );\n\n\t\tvar style = cameraCSSMatrix +\n\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n\n\t\tif ( cache.camera.style !== style && ! isIE ) {\n\n\t\t\tcameraElement.style.WebkitTransform = style;\n\t\t\tcameraElement.style.transform = style;\n\n\t\t\tcache.camera.style = style;\n\n\t\t}\n\n\t\trenderObject( scene, scene, camera, cameraCSSMatrix );\n\n\t\tif ( isIE ) {\n\n\t\t\t// IE10 and 11 does not support 'preserve-3d'.\n\t\t\t// Thus, z-order in 3D will not work.\n\t\t\t// We have to calc z-order manually and set CSS z-index for IE.\n\t\t\t// FYI: z-index can't handle object intersection\n\t\t\tzOrder( scene );\n\n\t\t}\n\n\t};\n\n};\n"]}