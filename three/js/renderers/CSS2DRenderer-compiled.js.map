{"version":3,"sources":["CSS2DRenderer.js"],"names":[],"mappings":"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","file":"CSS2DRenderer-compiled.js","sourcesContent":["console.warn( \"THREE.CSS2DRenderer: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n\nTHREE.CSS2DObject = function ( element ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.element = element || document.createElement( 'div' );\n\n\tthis.element.style.position = 'absolute';\n\n\tthis.addEventListener( 'removed', function () {\n\n\t\tthis.traverse( function ( object ) {\n\n\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n};\n\nTHREE.CSS2DObject.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.CSS2DObject,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tTHREE.Object3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n//\n\nTHREE.CSS2DRenderer = function () {\n\n\tvar _this = this;\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar vector = new THREE.Vector3();\n\tvar viewMatrix = new THREE.Matrix4();\n\tvar viewProjectionMatrix = new THREE.Matrix4();\n\n\tvar cache = {\n\t\tobjects: new WeakMap()\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tthis.domElement = domElement;\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t};\n\n\tvar renderObject = function ( object, scene, camera ) {\n\n\t\tif ( object instanceof THREE.CSS2DObject ) {\n\n\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\tvector.setFromMatrixPosition( object.matrixWorld );\n\t\t\tvector.applyMatrix4( viewProjectionMatrix );\n\n\t\t\tvar element = object.element;\n\t\t\tvar style = 'translate(-50%,-50%) translate(' + ( vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - vector.y * _heightHalf + _heightHalf ) + 'px)';\n\n\t\t\telement.style.WebkitTransform = style;\n\t\t\telement.style.MozTransform = style;\n\t\t\telement.style.oTransform = style;\n\t\t\telement.style.transform = style;\n\n\t\t\telement.style.display = ( object.visible && vector.z >= - 1 && vector.z <= 1 ) ? '' : 'none';\n\n\t\t\tvar objectData = {\n\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\n\t\t\t};\n\n\t\t\tcache.objects.set( object, objectData );\n\n\t\t\tif ( element.parentNode !== domElement ) {\n\n\t\t\t\tdomElement.appendChild( element );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], scene, camera );\n\n\t\t}\n\n\t};\n\n\tvar getDistanceToSquared = function () {\n\n\t\tvar a = new THREE.Vector3();\n\t\tvar b = new THREE.Vector3();\n\n\t\treturn function ( object1, object2 ) {\n\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn a.distanceToSquared( b );\n\n\t\t};\n\n\t}();\n\n\tvar filterAndFlatten = function ( scene ) {\n\n\t\tvar result = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.CSS2DObject ) result.push( object );\n\n\t\t} );\n\n\t\treturn result;\n\n\t};\n\n\tvar zOrder = function ( scene ) {\n\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\treturn distanceA - distanceB;\n\n\t\t} );\n\n\t\tvar zMax = sorted.length;\n\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t}\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tviewMatrix.copy( camera.matrixWorldInverse );\n\t\tviewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, viewMatrix );\n\n\t\trenderObject( scene, scene, camera );\n\t\tzOrder( scene );\n\n\t};\n\n};\n"]}