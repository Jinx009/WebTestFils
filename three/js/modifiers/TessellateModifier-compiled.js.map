{"version":3,"sources":["TessellateModifier.js"],"names":[],"mappings":"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","file":"TessellateModifier-compiled.js","sourcesContent":["console.warn( \"THREE.TessellateModifier: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n/**\n * Break faces with edges longer than maxEdgeLength\n * - not recursive\n */\n\nTHREE.TessellateModifier = function ( maxEdgeLength ) {\n\n\tthis.maxEdgeLength = maxEdgeLength;\n\n};\n\nTHREE.TessellateModifier.prototype.modify = function ( geometry ) {\n\n\tvar edge;\n\n\tvar faces = [];\n\tvar faceVertexUvs = [];\n\tvar maxEdgeLengthSquared = this.maxEdgeLength * this.maxEdgeLength;\n\n\tfor ( var i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\tfaceVertexUvs[ i ] = [];\n\n\t}\n\n\tfor ( var i = 0, il = geometry.faces.length; i < il; i ++ ) {\n\n\t\tvar face = geometry.faces[ i ];\n\n\t\tif ( face instanceof THREE.Face3 ) {\n\n\t\t\tvar a = face.a;\n\t\t\tvar b = face.b;\n\t\t\tvar c = face.c;\n\n\t\t\tvar va = geometry.vertices[ a ];\n\t\t\tvar vb = geometry.vertices[ b ];\n\t\t\tvar vc = geometry.vertices[ c ];\n\n\t\t\tvar dab = va.distanceToSquared( vb );\n\t\t\tvar dbc = vb.distanceToSquared( vc );\n\t\t\tvar dac = va.distanceToSquared( vc );\n\n\t\t\tif ( dab > maxEdgeLengthSquared || dbc > maxEdgeLengthSquared || dac > maxEdgeLengthSquared ) {\n\n\t\t\t\tvar m = geometry.vertices.length;\n\n\t\t\t\tvar triA = face.clone();\n\t\t\t\tvar triB = face.clone();\n\n\t\t\t\tif ( dab >= dbc && dab >= dac ) {\n\n\t\t\t\t\tvar vm = va.clone();\n\t\t\t\t\tvm.lerp( vb, 0.5 );\n\n\t\t\t\t\ttriA.a = a;\n\t\t\t\t\ttriA.b = m;\n\t\t\t\t\ttriA.c = c;\n\n\t\t\t\t\ttriB.a = m;\n\t\t\t\t\ttriB.b = b;\n\t\t\t\t\ttriB.c = c;\n\n\t\t\t\t\tif ( face.vertexNormals.length === 3 ) {\n\n\t\t\t\t\t\tvar vnm = face.vertexNormals[ 0 ].clone();\n\t\t\t\t\t\tvnm.lerp( face.vertexNormals[ 1 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexNormals[ 1 ].copy( vnm );\n\t\t\t\t\t\ttriB.vertexNormals[ 0 ].copy( vnm );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( face.vertexColors.length === 3 ) {\n\n\t\t\t\t\t\tvar vcm = face.vertexColors[ 0 ].clone();\n\t\t\t\t\t\tvcm.lerp( face.vertexColors[ 1 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexColors[ 1 ].copy( vcm );\n\t\t\t\t\t\ttriB.vertexColors[ 0 ].copy( vcm );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tedge = 0;\n\n\t\t\t\t} else if ( dbc >= dab && dbc >= dac ) {\n\n\t\t\t\t\tvar vm = vb.clone();\n\t\t\t\t\tvm.lerp( vc, 0.5 );\n\n\t\t\t\t\ttriA.a = a;\n\t\t\t\t\ttriA.b = b;\n\t\t\t\t\ttriA.c = m;\n\n\t\t\t\t\ttriB.a = m;\n\t\t\t\t\ttriB.b = c;\n\t\t\t\t\ttriB.c = a;\n\n\t\t\t\t\tif ( face.vertexNormals.length === 3 ) {\n\n\t\t\t\t\t\tvar vnm = face.vertexNormals[ 1 ].clone();\n\t\t\t\t\t\tvnm.lerp( face.vertexNormals[ 2 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexNormals[ 2 ].copy( vnm );\n\n\t\t\t\t\t\ttriB.vertexNormals[ 0 ].copy( vnm );\n\t\t\t\t\t\ttriB.vertexNormals[ 1 ].copy( face.vertexNormals[ 2 ] );\n\t\t\t\t\t\ttriB.vertexNormals[ 2 ].copy( face.vertexNormals[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( face.vertexColors.length === 3 ) {\n\n\t\t\t\t\t\tvar vcm = face.vertexColors[ 1 ].clone();\n\t\t\t\t\t\tvcm.lerp( face.vertexColors[ 2 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexColors[ 2 ].copy( vcm );\n\n\t\t\t\t\t\ttriB.vertexColors[ 0 ].copy( vcm );\n\t\t\t\t\t\ttriB.vertexColors[ 1 ].copy( face.vertexColors[ 2 ] );\n\t\t\t\t\t\ttriB.vertexColors[ 2 ].copy( face.vertexColors[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tedge = 1;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar vm = va.clone();\n\t\t\t\t\tvm.lerp( vc, 0.5 );\n\n\t\t\t\t\ttriA.a = a;\n\t\t\t\t\ttriA.b = b;\n\t\t\t\t\ttriA.c = m;\n\n\t\t\t\t\ttriB.a = m;\n\t\t\t\t\ttriB.b = b;\n\t\t\t\t\ttriB.c = c;\n\n\t\t\t\t\tif ( face.vertexNormals.length === 3 ) {\n\n\t\t\t\t\t\tvar vnm = face.vertexNormals[ 0 ].clone();\n\t\t\t\t\t\tvnm.lerp( face.vertexNormals[ 2 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexNormals[ 2 ].copy( vnm );\n\t\t\t\t\t\ttriB.vertexNormals[ 0 ].copy( vnm );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( face.vertexColors.length === 3 ) {\n\n\t\t\t\t\t\tvar vcm = face.vertexColors[ 0 ].clone();\n\t\t\t\t\t\tvcm.lerp( face.vertexColors[ 2 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexColors[ 2 ].copy( vcm );\n\t\t\t\t\t\ttriB.vertexColors[ 0 ].copy( vcm );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tedge = 2;\n\n\t\t\t\t}\n\n\t\t\t\tfaces.push( triA, triB );\n\t\t\t\tgeometry.vertices.push( vm );\n\n\t\t\t\tfor ( var j = 0, jl = geometry.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\t\tif ( geometry.faceVertexUvs[ j ].length ) {\n\n\t\t\t\t\t\tvar uvs = geometry.faceVertexUvs[ j ][ i ];\n\n\t\t\t\t\t\tvar uvA = uvs[ 0 ];\n\t\t\t\t\t\tvar uvB = uvs[ 1 ];\n\t\t\t\t\t\tvar uvC = uvs[ 2 ];\n\n\t\t\t\t\t\t// AB\n\n\t\t\t\t\t\tif ( edge === 0 ) {\n\n\t\t\t\t\t\t\tvar uvM = uvA.clone();\n\t\t\t\t\t\t\tuvM.lerp( uvB, 0.5 );\n\n\t\t\t\t\t\t\tvar uvsTriA = [ uvA.clone(), uvM.clone(), uvC.clone() ];\n\t\t\t\t\t\t\tvar uvsTriB = [ uvM.clone(), uvB.clone(), uvC.clone() ];\n\n\t\t\t\t\t\t\t// BC\n\n\t\t\t\t\t\t} else if ( edge === 1 ) {\n\n\t\t\t\t\t\t\tvar uvM = uvB.clone();\n\t\t\t\t\t\t\tuvM.lerp( uvC, 0.5 );\n\n\t\t\t\t\t\t\tvar uvsTriA = [ uvA.clone(), uvB.clone(), uvM.clone() ];\n\t\t\t\t\t\t\tvar uvsTriB = [ uvM.clone(), uvC.clone(), uvA.clone() ];\n\n\t\t\t\t\t\t\t// AC\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar uvM = uvA.clone();\n\t\t\t\t\t\t\tuvM.lerp( uvC, 0.5 );\n\n\t\t\t\t\t\t\tvar uvsTriA = [ uvA.clone(), uvB.clone(), uvM.clone() ];\n\t\t\t\t\t\t\tvar uvsTriB = [ uvM.clone(), uvB.clone(), uvC.clone() ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfaceVertexUvs[ j ].push( uvsTriA, uvsTriB );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfaces.push( face );\n\n\t\t\t\tfor ( var j = 0, jl = geometry.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\t\tfaceVertexUvs[ j ].push( geometry.faceVertexUvs[ j ][ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgeometry.faces = faces;\n\tgeometry.faceVertexUvs = faceVertexUvs;\n\n};\n"]}