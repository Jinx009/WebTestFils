{"version":3,"sources":["SelectionBox.js"],"names":[],"mappings":"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","file":"SelectionBox-compiled.js","sourcesContent":["console.warn( \"THREE.SelectionBox: As part of the transition to ES6 Modules, the files in 'examples/js' were deprecated in May 2020 (r117) and will be deleted in December 2020 (r124). You can find more information about developing using ES6 Modules in https://threejs.org/docs/#manual/en/introduction/Installation.\" );\n/**\n * This is a class to check whether objects are in a selection area in 3D space\n */\n\nTHREE.SelectionBox = ( function () {\n\n\tvar frustum = new THREE.Frustum();\n\tvar center = new THREE.Vector3();\n\n\tvar tmpPoint = new THREE.Vector3();\n\n\tvar vecNear = new THREE.Vector3();\n\tvar vecTopLeft = new THREE.Vector3();\n\tvar vecTopRight = new THREE.Vector3();\n\tvar vecDownRight = new THREE.Vector3();\n\tvar vecDownLeft = new THREE.Vector3();\n\n\tvar vecFarTopLeft = new THREE.Vector3();\n\tvar vecFarTopRight = new THREE.Vector3();\n\tvar vecFarDownRight = new THREE.Vector3();\n\tvar vecFarDownLeft = new THREE.Vector3();\n\n\tvar vectemp1 = new THREE.Vector3();\n\tvar vectemp2 = new THREE.Vector3();\n\tvar vectemp3 = new THREE.Vector3();\n\n\tfunction SelectionBox( camera, scene, deep ) {\n\n\t\tthis.camera = camera;\n\t\tthis.scene = scene;\n\t\tthis.startPoint = new THREE.Vector3();\n\t\tthis.endPoint = new THREE.Vector3();\n\t\tthis.collection = [];\n\t\tthis.deep = deep || Number.MAX_VALUE;\n\n\t}\n\n\tSelectionBox.prototype.select = function ( startPoint, endPoint ) {\n\n\t\tthis.startPoint = startPoint || this.startPoint;\n\t\tthis.endPoint = endPoint || this.endPoint;\n\t\tthis.collection = [];\n\n\t\tthis.updateFrustum( this.startPoint, this.endPoint );\n\t\tthis.searchChildInFrustum( frustum, this.scene );\n\n\t\treturn this.collection;\n\n\t};\n\n\tSelectionBox.prototype.updateFrustum = function ( startPoint, endPoint ) {\n\n\t\tstartPoint = startPoint || this.startPoint;\n\t\tendPoint = endPoint || this.endPoint;\n\n\t\t// Avoid invalid frustum\n\n\t\tif ( startPoint.x === endPoint.x ) {\n\n\t\t\tendPoint.x += Number.EPSILON;\n\n\t\t}\n\n\t\tif ( startPoint.y === endPoint.y ) {\n\n\t\t\tendPoint.y += Number.EPSILON;\n\n\t\t}\n\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.camera.updateMatrixWorld();\n\n\t\tif ( this.camera.isPerspectiveCamera ) {\n\n\t\t\ttmpPoint.copy( startPoint );\n\t\t\ttmpPoint.x = Math.min( startPoint.x, endPoint.x );\n\t\t\ttmpPoint.y = Math.max( startPoint.y, endPoint.y );\n\t\t\tendPoint.x = Math.max( startPoint.x, endPoint.x );\n\t\t\tendPoint.y = Math.min( startPoint.y, endPoint.y );\n\n\t\t\tvecNear.setFromMatrixPosition( this.camera.matrixWorld );\n\t\t\tvecTopLeft.copy( tmpPoint );\n\t\t\tvecTopRight.set( endPoint.x, tmpPoint.y, 0 );\n\t\t\tvecDownRight.copy( endPoint );\n\t\t\tvecDownLeft.set( tmpPoint.x, endPoint.y, 0 );\n\n\t\t\tvecTopLeft.unproject( this.camera );\n\t\t\tvecTopRight.unproject( this.camera );\n\t\t\tvecDownRight.unproject( this.camera );\n\t\t\tvecDownLeft.unproject( this.camera );\n\n\t\t\tvectemp1.copy( vecTopLeft ).sub( vecNear );\n\t\t\tvectemp2.copy( vecTopRight ).sub( vecNear );\n\t\t\tvectemp3.copy( vecDownRight ).sub( vecNear );\n\t\t\tvectemp1.normalize();\n\t\t\tvectemp2.normalize();\n\t\t\tvectemp3.normalize();\n\n\t\t\tvectemp1.multiplyScalar( this.deep );\n\t\t\tvectemp2.multiplyScalar( this.deep );\n\t\t\tvectemp3.multiplyScalar( this.deep );\n\t\t\tvectemp1.add( vecNear );\n\t\t\tvectemp2.add( vecNear );\n\t\t\tvectemp3.add( vecNear );\n\n\t\t\tvar planes = frustum.planes;\n\n\t\t\tplanes[ 0 ].setFromCoplanarPoints( vecNear, vecTopLeft, vecTopRight );\n\t\t\tplanes[ 1 ].setFromCoplanarPoints( vecNear, vecTopRight, vecDownRight );\n\t\t\tplanes[ 2 ].setFromCoplanarPoints( vecDownRight, vecDownLeft, vecNear );\n\t\t\tplanes[ 3 ].setFromCoplanarPoints( vecDownLeft, vecTopLeft, vecNear );\n\t\t\tplanes[ 4 ].setFromCoplanarPoints( vecTopRight, vecDownRight, vecDownLeft );\n\t\t\tplanes[ 5 ].setFromCoplanarPoints( vectemp3, vectemp2, vectemp1 );\n\t\t\tplanes[ 5 ].normal.multiplyScalar( - 1 );\n\n\t\t} else if ( this.camera.isOrthographicCamera ) {\n\n\t\t\tvar left = Math.min( startPoint.x, endPoint.x );\n\t\t\tvar top = Math.max( startPoint.y, endPoint.y );\n\t\t\tvar right = Math.max( startPoint.x, endPoint.x );\n\t\t\tvar down = Math.min( startPoint.y, endPoint.y );\n\n\t\t\tvecTopLeft.set( left, top, - 1 );\n\t\t\tvecTopRight.set( right, top, - 1 );\n\t\t\tvecDownRight.set( right, down, - 1 );\n\t\t\tvecDownLeft.set( left, down, - 1 );\n\n\t\t\tvecFarTopLeft.set( left, top, 1 );\n\t\t\tvecFarTopRight.set( right, top, 1 );\n\t\t\tvecFarDownRight.set( right, down, 1 );\n\t\t\tvecFarDownLeft.set( left, down, 1 );\n\n\t\t\tvecTopLeft.unproject( this.camera );\n\t\t\tvecTopRight.unproject( this.camera );\n\t\t\tvecDownRight.unproject( this.camera );\n\t\t\tvecDownLeft.unproject( this.camera );\n\n\t\t\tvecFarTopLeft.unproject( this.camera );\n\t\t\tvecFarTopRight.unproject( this.camera );\n\t\t\tvecFarDownRight.unproject( this.camera );\n\t\t\tvecFarDownLeft.unproject( this.camera );\n\n\t\t\tvar planes = frustum.planes;\n\n\t\t\tplanes[ 0 ].setFromCoplanarPoints( vecTopLeft, vecFarTopLeft, vecFarTopRight );\n\t\t\tplanes[ 1 ].setFromCoplanarPoints( vecTopRight, vecFarTopRight, vecFarDownRight );\n\t\t\tplanes[ 2 ].setFromCoplanarPoints( vecFarDownRight, vecFarDownLeft, vecDownLeft );\n\t\t\tplanes[ 3 ].setFromCoplanarPoints( vecFarDownLeft, vecFarTopLeft, vecTopLeft );\n\t\t\tplanes[ 4 ].setFromCoplanarPoints( vecTopRight, vecDownRight, vecDownLeft );\n\t\t\tplanes[ 5 ].setFromCoplanarPoints( vecFarDownRight, vecFarTopRight, vecFarTopLeft );\n\t\t\tplanes[ 5 ].normal.multiplyScalar( - 1 );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.SelectionBox: Unsupported camera type.' );\n\n\t\t}\n\n\t};\n\n\tSelectionBox.prototype.searchChildInFrustum = function ( frustum, object ) {\n\n\t\tif ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\tif ( object.material !== undefined ) {\n\n\t\t\t\tif ( object.geometry.boundingSphere === null ) object.geometry.computeBoundingSphere();\n\n\t\t\t\tcenter.copy( object.geometry.boundingSphere.center );\n\n\t\t\t\tcenter.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tif ( frustum.containsPoint( center ) ) {\n\n\t\t\t\t\tthis.collection.push( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.children.length > 0 ) {\n\n\t\t\tfor ( var x = 0; x < object.children.length; x ++ ) {\n\n\t\t\t\tthis.searchChildInFrustum( frustum, object.children[ x ] );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\treturn SelectionBox;\n\n} )();\n"]}