{"version":3,"sources":["XLoader.js"],"names":[],"mappings":"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","file":"XLoader-compiled.js","sourcesContent":["/**\n * @author adrs2002 / https://github.com/adrs2002\n */\n\nimport {\n\tAnimationClip,\n\tAnimationMixer,\n\tBone,\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tFrontSide,\n\tLoader,\n\tLoaderUtils,\n\tMatrix4,\n\tMesh,\n\tMeshPhongMaterial,\n\tQuaternion,\n\tSkeleton,\n\tSkinnedMesh,\n\tTextureLoader,\n\tUint16BufferAttribute,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar XLoader = ( function () {\n\n\tvar classCallCheck = function ( instance, Constructor ) {\n\n\t\tif ( ! ( instance instanceof Constructor ) ) {\n\n\t\t\tthrow new TypeError( \"Cannot call a class as a function\" );\n\n\t\t}\n\n\t};\n\n\tvar createClass = function () {\n\n\t\tfunction defineProperties( target, props ) {\n\n\t\t\tfor ( var i = 0; i < props.length; i ++ ) {\n\n\t\t\t\tvar descriptor = props[ i ];\n\t\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\t\tdescriptor.configurable = true;\n\t\t\t\tif ( \"value\" in descriptor ) descriptor.writable = true;\n\t\t\t\tObject.defineProperty( target, descriptor.key, descriptor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn function ( Constructor, protoProps, staticProps ) {\n\n\t\t\tif ( protoProps ) defineProperties( Constructor.prototype, protoProps );\n\t\t\tif ( staticProps ) defineProperties( Constructor, staticProps );\n\t\t\treturn Constructor;\n\n\t\t};\n\n\t}();\n\n\tvar XboneInf = function XboneInf() {\n\n\t\tclassCallCheck( this, XboneInf );\n\n\t\tthis.boneName = \"\";\n\t\tthis.BoneIndex = 0;\n\t\tthis.Indeces = [];\n\t\tthis.Weights = [];\n\t\tthis.initMatrix = null;\n\t\tthis.OffsetMatrix = null;\n\n\t};\n\n\tvar XAnimationInfo = function XAnimationInfo() {\n\n\t\tclassCallCheck( this, XAnimationInfo );\n\n\t\tthis.animeName = \"\";\n\t\tthis.boneName = \"\";\n\t\tthis.targetBone = null;\n\t\tthis.keyType = 4;\n\t\tthis.frameStartLv = 0;\n\t\tthis.keyFrames = [];\n\t\tthis.InverseMx = null;\n\n\t};\n\n\tvar XAnimationObj = function () {\n\n\t\tfunction XAnimationObj( _flags ) {\n\n\t\t\tclassCallCheck( this, XAnimationObj );\n\n\t\t\tthis.fps = 30;\n\t\t\tthis.name = 'xanimation';\n\t\t\tthis.length = 0;\n\t\t\tthis.hierarchy = [];\n\t\t\tthis.putFlags = _flags;\n\t\t\tif ( this.putFlags.putPos === undefined ) {\n\n\t\t\t\tthis.putFlags.putPos = true;\n\n\t\t\t}\n\t\t\tif ( this.putFlags.putRot === undefined ) {\n\n\t\t\t\tthis.putFlags.putRot = true;\n\n\t\t\t}\n\t\t\tif ( this.putFlags.putScl === undefined ) {\n\n\t\t\t\tthis.putFlags.putScl = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcreateClass( XAnimationObj, [ {\n\t\t\tkey: \"make\",\n\t\t\tvalue: function make( XAnimationInfoArray ) {\n\n\t\t\t\tfor ( var i = 0; i < XAnimationInfoArray.length; i ++ ) {\n\n\t\t\t\t\tthis.hierarchy.push( this.makeBonekeys( XAnimationInfoArray[ i ] ) );\n\n\t\t\t\t}\n\t\t\t\tthis.length = this.hierarchy[ 0 ].keys[ this.hierarchy[ 0 ].keys.length - 1 ].time;\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"clone\",\n\t\t\tvalue: function clone() {\n\n\t\t\t\treturn Object.assign( {}, this );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"makeBonekeys\",\n\t\t\tvalue: function makeBonekeys( XAnimationInfo ) {\n\n\t\t\t\tvar refObj = {};\n\t\t\t\trefObj.name = XAnimationInfo.boneName;\n\t\t\t\trefObj.parent = \"\";\n\t\t\t\trefObj.keys = this.keyFrameRefactor( XAnimationInfo );\n\t\t\t\trefObj.copy = function () {\n\n\t\t\t\t\treturn Object.assign( {}, this );\n\n\t\t\t\t};\n\t\t\t\treturn refObj;\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"keyFrameRefactor\",\n\t\t\tvalue: function keyFrameRefactor( XAnimationInfo ) {\n\n\t\t\t\tvar keys = [];\n\t\t\t\tfor ( var i = 0; i < XAnimationInfo.keyFrames.length; i ++ ) {\n\n\t\t\t\t\tvar keyframe = {};\n\t\t\t\t\tkeyframe.time = XAnimationInfo.keyFrames[ i ].time * this.fps;\n\t\t\t\t\tif ( XAnimationInfo.keyFrames[ i ].pos && this.putFlags.putPos ) {\n\n\t\t\t\t\t\tkeyframe.pos = XAnimationInfo.keyFrames[ i ].pos;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( XAnimationInfo.keyFrames[ i ].rot && this.putFlags.putRot ) {\n\n\t\t\t\t\t\tkeyframe.rot = XAnimationInfo.keyFrames[ i ].rot;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( XAnimationInfo.keyFrames[ i ].scl && this.putFlags.putScl ) {\n\n\t\t\t\t\t\tkeyframe.scl = XAnimationInfo.keyFrames[ i ].scl;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( XAnimationInfo.keyFrames[ i ].matrix ) {\n\n\t\t\t\t\t\tkeyframe.matrix = XAnimationInfo.keyFrames[ i ].matrix;\n\t\t\t\t\t\tif ( this.putFlags.putPos ) {\n\n\t\t\t\t\t\t\tkeyframe.pos = new Vector3().setFromMatrixPosition( keyframe.matrix );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( this.putFlags.putRot ) {\n\n\t\t\t\t\t\t\tkeyframe.rot = new Quaternion().setFromRotationMatrix( keyframe.matrix );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( this.putFlags.putScl ) {\n\n\t\t\t\t\t\t\tkeyframe.scl = new Vector3().setFromMatrixScale( keyframe.matrix );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tkeys.push( keyframe );\n\n\t\t\t\t}\n\t\t\t\treturn keys;\n\n\t\t\t}\n\t\t} ] );\n\t\treturn XAnimationObj;\n\n\t}();\n\n\tvar XKeyFrameInfo = function XKeyFrameInfo() {\n\n\t\tclassCallCheck( this, XKeyFrameInfo );\n\n\t\tthis.index = 0;\n\t\tthis.Frame = 0;\n\t\tthis.time = 0.0;\n\t\tthis.matrix = null;\n\n\t};\n\n\tvar XLoader = function () {\n\n\t\tfunction XLoader( manager ) {\n\n\t\t\tLoader.call( this, manager );\n\n\t\t\tclassCallCheck( this, XLoader );\n\n\t\t\tthis.debug = false;\n\t\t\tthis.texloader = new TextureLoader( this.manager );\n\t\t\tthis.url = \"\";\n\t\t\tthis._putMatLength = 0;\n\t\t\tthis._nowMat = null;\n\t\t\tthis._nowFrameName = \"\";\n\t\t\tthis.frameHierarchie = [];\n\t\t\tthis.Hierarchies = {};\n\t\t\tthis.HieStack = [];\n\t\t\tthis._currentObject = {};\n\t\t\tthis._currentFrame = {};\n\t\t\tthis._data = null;\n\t\t\tthis.onLoad = null;\n\t\t\tthis.IsUvYReverse = true;\n\t\t\tthis.Meshes = [];\n\t\t\tthis.animations = [];\n\t\t\tthis.animTicksPerSecond = 30;\n\t\t\tthis._currentGeo = null;\n\t\t\tthis._currentAnime = null;\n\t\t\tthis._currentAnimeFrames = null;\n\n\t\t}\n\n\t\tcreateClass( XLoader, [ {\n\t\t\tkey: '_setArgOption',\n\t\t\tvalue: function _setArgOption( _arg ) {\n\n\t\t\t\tvar _start = arguments.length > 1 && arguments[ 1 ] !== undefined ? arguments[ 1 ] : 0;\n\n\t\t\t\tif ( ! _arg ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\tfor ( var i = _start; i < _arg.length; i ++ ) {\n\n\t\t\t\t\tswitch ( i ) {\n\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tthis.url = _arg[ i ];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tthis.options = _arg[ i ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tif ( this.options === undefined ) {\n\n\t\t\t\t\tthis.options = {};\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'load',\n\t\t\tvalue: function load( _arg, onLoad, onProgress, onError ) {\n\n\t\t\t\tvar _this = this;\n\n\t\t\t\tthis._setArgOption( _arg );\n\t\t\t\tvar loader = new FileLoader( this.manager );\n\t\t\t\tloader.setPath( this.path );\n\t\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\t\tloader.load( this.url, function ( response ) {\n\n\t\t\t\t\t_this.parse( response, onLoad );\n\n\t\t\t\t}, onProgress, onError );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_readLine',\n\t\t\tvalue: function _readLine( line ) {\n\n\t\t\t\tvar readed = 0;\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tvar find = - 1;\n\t\t\t\t\tfind = line.indexOf( '//', readed );\n\t\t\t\t\tif ( find === - 1 ) {\n\n\t\t\t\t\t\tfind = line.indexOf( '#', readed );\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( find > - 1 && find < 2 ) {\n\n\t\t\t\t\t\tvar foundNewLine = - 1;\n\t\t\t\t\t\tfoundNewLine = line.indexOf( \"\\r\\n\", readed );\n\t\t\t\t\t\tif ( foundNewLine > 0 ) {\n\n\t\t\t\t\t\t\treaded = foundNewLine + 2;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfoundNewLine = line.indexOf( \"\\r\", readed );\n\t\t\t\t\t\t\tif ( foundNewLine > 0 ) {\n\n\t\t\t\t\t\t\t\treaded = foundNewLine + 1;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\treaded = line.indexOf( \"\\n\", readed ) + 1;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn line.substr( readed );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_readLine',\n\t\t\tvalue: function _readLine( line ) {\n\n\t\t\t\tvar readed = 0;\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tvar find = - 1;\n\t\t\t\t\tfind = line.indexOf( '//', readed );\n\t\t\t\t\tif ( find === - 1 ) {\n\n\t\t\t\t\t\tfind = line.indexOf( '#', readed );\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( find > - 1 && find < 2 ) {\n\n\t\t\t\t\t\tvar foundNewLine = - 1;\n\t\t\t\t\t\tfoundNewLine = line.indexOf( \"\\r\\n\", readed );\n\t\t\t\t\t\tif ( foundNewLine > 0 ) {\n\n\t\t\t\t\t\t\treaded = foundNewLine + 2;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfoundNewLine = line.indexOf( \"\\r\", readed );\n\t\t\t\t\t\t\tif ( foundNewLine > 0 ) {\n\n\t\t\t\t\t\t\t\treaded = foundNewLine + 1;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\treaded = line.indexOf( \"\\n\", readed ) + 1;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn line.substr( readed );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_isBinary',\n\t\t\tvalue: function _isBinary( binData ) {\n\n\t\t\t\tvar reader = new DataView( binData );\n\t\t\t\tvar face_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\n\t\t\t\tvar n_faces = reader.getUint32( 80, true );\n\t\t\t\tvar expect = 80 + 32 / 8 + n_faces * face_size;\n\t\t\t\tif ( expect === reader.byteLength ) {\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\t\t\t\tvar fileLength = reader.byteLength;\n\t\t\t\tfor ( var index = 0; index < fileLength; index ++ ) {\n\n\t\t\t\t\tif ( reader.getUint8( index, false ) > 127 ) {\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn false;\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_ensureBinary',\n\t\t\tvalue: function _ensureBinary( buf ) {\n\n\t\t\t\tif ( typeof buf === \"string\" ) {\n\n\t\t\t\t\tvar array_buffer = new Uint8Array( buf.length );\n\t\t\t\t\tfor ( var i = 0; i < buf.length; i ++ ) {\n\n\t\t\t\t\t\tarray_buffer[ i ] = buf.charCodeAt( i ) & 0xff;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn array_buffer.buffer || array_buffer;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn buf;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_ensureString',\n\t\t\tvalue: function _ensureString( buf ) {\n\n\t\t\t\tif ( typeof buf !== \"string\" ) {\n\n\t\t\t\t\treturn LoaderUtils.decodeText( new Uint8Array( buf ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn buf;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'parse',\n\t\t\tvalue: function _parse( data, onLoad ) {\n\n\t\t\t\tvar binData = this._ensureBinary( data );\n\t\t\t\tthis._data = this._ensureString( data );\n\t\t\t\tthis.onLoad = onLoad;\n\t\t\t\treturn this._isBinary( binData ) ? this._parseBinary( binData ) : this._parseASCII();\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_parseBinary',\n\t\t\tvalue: function _parseBinary( data ) {\n\n\t\t\t\treturn this._parseASCII( LoaderUtils.decodeText( new Uint8Array( data ) ) );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_parseASCII',\n\t\t\tvalue: function _parseASCII() {\n\n\t\t\t\tvar path;\n\n\t\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\t\tpath = this.resourcePath;\n\n\t\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\t\tpath = this.path;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath = LoaderUtils.extractUrlBase( this.url );\n\n\t\t\t\t}\n\n\t\t\t\tthis.texloader.setPath( path ).setCrossOrigin( this.crossOrigin );\n\n\t\t\t\tvar endRead = 16;\n\t\t\t\tthis.Hierarchies.children = [];\n\t\t\t\tthis._hierarchieParse( this.Hierarchies, endRead );\n\t\t\t\tthis._changeRoot();\n\t\t\t\tthis._currentObject = this.Hierarchies.children.shift();\n\t\t\t\tthis._mainloop();\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_hierarchieParse',\n\t\t\tvalue: function _hierarchieParse( _parent, _end ) {\n\n\t\t\t\tvar endRead = _end;\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tvar find1 = this._data.indexOf( '{', endRead ) + 1;\n\t\t\t\t\tvar findEnd = this._data.indexOf( '}', endRead );\n\t\t\t\t\tvar findNext = this._data.indexOf( '{', find1 ) + 1;\n\t\t\t\t\tif ( find1 > 0 && findEnd > find1 ) {\n\n\t\t\t\t\t\tvar _currentObject = {};\n\t\t\t\t\t\t_currentObject.children = [];\n\t\t\t\t\t\tvar nameData = this._readLine( this._data.substr( endRead, find1 - endRead - 1 ) ).trim();\n\t\t\t\t\t\tvar word = nameData.split( / /g );\n\t\t\t\t\t\tif ( word.length > 0 ) {\n\n\t\t\t\t\t\t\t_currentObject.type = word[ 0 ];\n\t\t\t\t\t\t\tif ( word.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t_currentObject.name = word[ 1 ];\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t_currentObject.name = word[ 0 ] + this.Hierarchies.children.length;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_currentObject.name = nameData;\n\t\t\t\t\t\t\t_currentObject.type = \"\";\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( _currentObject.type === \"Animation\" ) {\n\n\t\t\t\t\t\t\t_currentObject.data = this._data.substr( findNext, findEnd - findNext ).trim();\n\t\t\t\t\t\t\tvar refs = this._hierarchieParse( _currentObject, findEnd + 1 );\n\t\t\t\t\t\t\tendRead = refs.end;\n\t\t\t\t\t\t\t_currentObject.children = refs.parent.children;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar DataEnder = this._data.lastIndexOf( ';', findNext > 0 ? Math.min( findNext, findEnd ) : findEnd );\n\t\t\t\t\t\t\t_currentObject.data = this._data.substr( find1, DataEnder - find1 ).trim();\n\t\t\t\t\t\t\tif ( findNext <= 0 || findEnd < findNext ) {\n\n\t\t\t\t\t\t\t\tendRead = findEnd + 1;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tvar nextStart = Math.max( DataEnder + 1, find1 );\n\t\t\t\t\t\t\t\tvar _refs = this._hierarchieParse( _currentObject, nextStart );\n\t\t\t\t\t\t\t\tendRead = _refs.end;\n\t\t\t\t\t\t\t\t_currentObject.children = _refs.parent.children;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_currentObject.parent = _parent;\n\t\t\t\t\t\tif ( _currentObject.type != \"template\" ) {\n\n\t\t\t\t\t\t\t_parent.children.push( _currentObject );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tendRead = find1 === - 1 ? this._data.length : findEnd + 1;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tparent: _parent,\n\t\t\t\t\tend: endRead\n\t\t\t\t};\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_mainloop',\n\t\t\tvalue: function _mainloop() {\n\n\t\t\t\tvar _this2 = this;\n\n\t\t\t\tthis._mainProc();\n\t\t\t\tif ( this._currentObject.parent || this._currentObject.children.length > 0 || ! this._currentObject.worked ) {\n\n\t\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\t\t_this2._mainloop();\n\n\t\t\t\t\t}, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\t\t_this2.onLoad( {\n\t\t\t\t\t\t\tmodels: _this2.Meshes,\n\t\t\t\t\t\t\tanimations: _this2.animations\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}, 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_mainProc',\n\t\t\tvalue: function _mainProc() {\n\n\t\t\t\tvar breakFlag = false;\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tif ( ! this._currentObject.worked ) {\n\n\t\t\t\t\t\tswitch ( this._currentObject.type ) {\n\n\t\t\t\t\t\t\tcase \"template\":\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"AnimTicksPerSecond\":\n\t\t\t\t\t\t\t\tthis.animTicksPerSecond = parseInt( this._currentObject.data );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Frame\":\n\t\t\t\t\t\t\t\tthis._setFrame();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"FrameTransformMatrix\":\n\t\t\t\t\t\t\t\tthis._setFrameTransformMatrix();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Mesh\":\n\t\t\t\t\t\t\t\tthis._changeRoot();\n\t\t\t\t\t\t\t\tthis._currentGeo = {};\n\t\t\t\t\t\t\t\tthis._currentGeo.name = this._currentObject.name.trim();\n\t\t\t\t\t\t\t\tthis._currentGeo.parentName = this._getParentName( this._currentObject ).trim();\n\t\t\t\t\t\t\t\tthis._currentGeo.VertexSetedBoneCount = [];\n\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData = {\n\t\t\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\t\t\tuvs: [],\n\t\t\t\t\t\t\t\t\tskinIndices: [],\n\t\t\t\t\t\t\t\t\tskinWeights: [],\n\t\t\t\t\t\t\t\t\tindices: [],\n\t\t\t\t\t\t\t\t\tmaterialIndices: []\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tthis._currentGeo.Materials = [];\n\t\t\t\t\t\t\t\tthis._currentGeo.normalVectors = [];\n\t\t\t\t\t\t\t\tthis._currentGeo.BoneInfs = [];\n\t\t\t\t\t\t\t\tthis._currentGeo.baseFrame = this._currentFrame;\n\t\t\t\t\t\t\t\tthis._makeBoneFrom_CurrentFrame();\n\t\t\t\t\t\t\t\tthis._readVertexDatas();\n\t\t\t\t\t\t\t\tbreakFlag = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"MeshNormals\":\n\t\t\t\t\t\t\t\tthis._readVertexDatas();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"MeshTextureCoords\":\n\t\t\t\t\t\t\t\tthis._setMeshTextureCoords();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"VertexDuplicationIndices\":\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"MeshMaterialList\":\n\t\t\t\t\t\t\t\tthis._setMeshMaterialList();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Material\":\n\t\t\t\t\t\t\t\tthis._setMaterial();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"SkinWeights\":\n\t\t\t\t\t\t\t\tthis._setSkinWeights();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"AnimationSet\":\n\t\t\t\t\t\t\t\tthis._changeRoot();\n\t\t\t\t\t\t\t\tthis._currentAnime = {};\n\t\t\t\t\t\t\t\tthis._currentAnime.name = this._currentObject.name.trim();\n\t\t\t\t\t\t\t\tthis._currentAnime.AnimeFrames = [];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Animation\":\n\t\t\t\t\t\t\t\tif ( this._currentAnimeFrames ) {\n\n\t\t\t\t\t\t\t\t\tthis._currentAnime.AnimeFrames.push( this._currentAnimeFrames );\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis._currentAnimeFrames = new XAnimationInfo();\n\t\t\t\t\t\t\t\tthis._currentAnimeFrames.boneName = this._currentObject.data.trim();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"AnimationKey\":\n\t\t\t\t\t\t\t\tthis._readAnimationKey();\n\t\t\t\t\t\t\t\tbreakFlag = true;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._currentObject.worked = true;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( this._currentObject.children.length > 0 ) {\n\n\t\t\t\t\t\tthis._currentObject = this._currentObject.children.shift();\n\t\t\t\t\t\tif ( this.debug ) {\n\n\t\t\t\t\t\t\tconsole.log( 'processing ' + this._currentObject.name );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( breakFlag ) break;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( this._currentObject.worked ) {\n\n\t\t\t\t\t\t\tif ( this._currentObject.parent && ! this._currentObject.parent.parent ) {\n\n\t\t\t\t\t\t\t\tthis._changeRoot();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( this._currentObject.parent ) {\n\n\t\t\t\t\t\t\tthis._currentObject = this._currentObject.parent;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbreakFlag = true;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( breakFlag ) break;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_changeRoot',\n\t\t\tvalue: function _changeRoot() {\n\n\t\t\t\tif ( this._currentGeo != null && this._currentGeo.name ) {\n\n\t\t\t\t\tthis._makeOutputGeometry();\n\n\t\t\t\t}\n\t\t\t\tthis._currentGeo = {};\n\t\t\t\tif ( this._currentAnime != null && this._currentAnime.name ) {\n\n\t\t\t\t\tif ( this._currentAnimeFrames ) {\n\n\t\t\t\t\t\tthis._currentAnime.AnimeFrames.push( this._currentAnimeFrames );\n\t\t\t\t\t\tthis._currentAnimeFrames = null;\n\n\t\t\t\t\t}\n\t\t\t\t\tthis._makeOutputAnimation();\n\n\t\t\t\t}\n\t\t\t\tthis._currentAnime = {};\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_getParentName',\n\t\t\tvalue: function _getParentName( _obj ) {\n\n\t\t\t\tif ( _obj.parent ) {\n\n\t\t\t\t\tif ( _obj.parent.name ) {\n\n\t\t\t\t\t\treturn _obj.parent.name;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\treturn this._getParentName( _obj.parent );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn \"\";\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_setFrame',\n\t\t\tvalue: function _setFrame() {\n\n\t\t\t\tthis._nowFrameName = this._currentObject.name.trim();\n\t\t\t\tthis._currentFrame = {};\n\t\t\t\tthis._currentFrame.name = this._nowFrameName;\n\t\t\t\tthis._currentFrame.children = [];\n\t\t\t\tif ( this._currentObject.parent && this._currentObject.parent.name ) {\n\n\t\t\t\t\tthis._currentFrame.parentName = this._currentObject.parent.name;\n\n\t\t\t\t}\n\t\t\t\tthis.frameHierarchie.push( this._nowFrameName );\n\t\t\t\tthis.HieStack[ this._nowFrameName ] = this._currentFrame;\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_setFrameTransformMatrix',\n\t\t\tvalue: function _setFrameTransformMatrix() {\n\n\t\t\t\tthis._currentFrame.FrameTransformMatrix = new Matrix4();\n\t\t\t\tvar data = this._currentObject.data.split( \",\" );\n\t\t\t\tthis._ParseMatrixData( this._currentFrame.FrameTransformMatrix, data );\n\t\t\t\tthis._makeBoneFrom_CurrentFrame();\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_makeBoneFrom_CurrentFrame',\n\t\t\tvalue: function _makeBoneFrom_CurrentFrame() {\n\n\t\t\t\tif ( ! this._currentFrame.FrameTransformMatrix ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\tvar b = new Bone();\n\t\t\t\tb.name = this._currentFrame.name;\n\t\t\t\tb.applyMatrix( this._currentFrame.FrameTransformMatrix );\n\t\t\t\tb.matrixWorld = b.matrix;\n\t\t\t\tb.FrameTransformMatrix = this._currentFrame.FrameTransformMatrix;\n\t\t\t\tthis._currentFrame.putBone = b;\n\t\t\t\tif ( this._currentFrame.parentName ) {\n\n\t\t\t\t\tfor ( var frame in this.HieStack ) {\n\n\t\t\t\t\t\tif ( this.HieStack[ frame ].name === this._currentFrame.parentName ) {\n\n\t\t\t\t\t\t\tthis.HieStack[ frame ].putBone.add( this._currentFrame.putBone );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_readVertexDatas',\n\t\t\tvalue: function _readVertexDatas() {\n\n\t\t\t\tvar endRead = 0;\n\t\t\t\tvar mode = 0;\n\t\t\t\tvar mode_local = 0;\n\t\t\t\tvar maxLength = 0;\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tvar changeMode = false;\n\t\t\t\t\tif ( mode_local === 0 ) {\n\n\t\t\t\t\t\tvar refO = this._readInt1( endRead );\n\t\t\t\t\t\tendRead = refO.endRead;\n\t\t\t\t\t\tmode_local = 1;\n\t\t\t\t\t\tmaxLength = this._currentObject.data.indexOf( ';;', endRead ) + 1;\n\t\t\t\t\t\tif ( maxLength <= 0 ) {\n\n\t\t\t\t\t\t\tmaxLength = this._currentObject.data.length;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar find = 0;\n\t\t\t\t\t\tswitch ( mode ) {\n\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\tfind = this._currentObject.data.indexOf( ',', endRead ) + 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\tfind = this._currentObject.data.indexOf( ';,', endRead ) + 1;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( find === 0 || find > maxLength ) {\n\n\t\t\t\t\t\t\tfind = maxLength;\n\t\t\t\t\t\t\tmode_local = 0;\n\t\t\t\t\t\t\tchangeMode = true;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch ( this._currentObject.type ) {\n\n\t\t\t\t\t\t\tcase \"Mesh\":\n\t\t\t\t\t\t\t\tswitch ( mode ) {\n\n\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\tthis._readVertex1( this._currentObject.data.substr( endRead, find - endRead ) );\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\t\tthis._readFace1( this._currentObject.data.substr( endRead, find - endRead ) );\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"MeshNormals\":\n\t\t\t\t\t\t\t\tswitch ( mode ) {\n\n\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\tthis._readNormalVector1( this._currentObject.data.substr( endRead, find - endRead ) );\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tendRead = find + 1;\n\t\t\t\t\t\tif ( changeMode ) {\n\n\t\t\t\t\t\t\tmode ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( endRead >= this._currentObject.data.length ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_readInt1',\n\t\t\tvalue: function _readInt1( start ) {\n\n\t\t\t\tvar find = this._currentObject.data.indexOf( ';', start );\n\t\t\t\treturn {\n\t\t\t\t\trefI: parseInt( this._currentObject.data.substr( start, find - start ) ),\n\t\t\t\t\tendRead: find + 1\n\t\t\t\t};\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_readVertex1',\n\t\t\tvalue: function _readVertex1( line ) {\n\n\t\t\t\tvar data = this._readLine( line.trim() ).substr( 0, line.length - 2 ).split( \";\" );\n\t\t\t\tthis._currentGeo.GeometryData.vertices.push( parseFloat( data[ 0 ] ), parseFloat( data[ 1 ] ), parseFloat( data[ 2 ] ) );\n\t\t\t\tthis._currentGeo.GeometryData.skinIndices.push( 0, 0, 0, 0 );\n\t\t\t\tthis._currentGeo.GeometryData.skinWeights.push( 1, 0, 0, 0 );\n\t\t\t\tthis._currentGeo.VertexSetedBoneCount.push( 0 );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_readFace1',\n\t\t\tvalue: function _readFace1( line ) {\n\n\t\t\t\tvar data = this._readLine( line.trim() ).substr( 2, line.length - 4 ).split( \",\" );\n\t\t\t\tthis._currentGeo.GeometryData.indices.push( parseInt( data[ 0 ], 10 ), parseInt( data[ 1 ], 10 ), parseInt( data[ 2 ], 10 ) );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_readNormalVector1',\n\t\t\tvalue: function _readNormalVector1( line ) {\n\n\t\t\t\tvar data = this._readLine( line.trim() ).substr( 0, line.length - 2 ).split( \";\" );\n\t\t\t\tthis._currentGeo.GeometryData.normals.push( parseFloat( data[ 0 ] ), parseFloat( data[ 1 ] ), parseFloat( data[ 2 ] ) );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_buildGeometry',\n\t\t\tvalue: function _buildGeometry() {\n\n\t\t\t\tvar bufferGeometry = new BufferGeometry();\n\t\t\t\tvar position = [];\n\t\t\t\tvar normals = [];\n\t\t\t\tvar uvs = [];\n\t\t\t\tvar skinIndices = [];\n\t\t\t\tvar skinWeights = [];\n\n\t\t\t\t//\n\n\t\t\t\tvar data = this._currentGeo.GeometryData;\n\n\t\t\t\tfor ( var i = 0, l = data.indices.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar stride2 = data.indices[ i ] * 2;\n\t\t\t\t\tvar stride3 = data.indices[ i ] * 3;\n\t\t\t\t\tvar stride4 = data.indices[ i ] * 4;\n\n\t\t\t\t\tposition.push( data.vertices[ stride3 ], data.vertices[ stride3 + 1 ], data.vertices[ stride3 + 2 ] );\n\t\t\t\t\tnormals.push( data.normals[ stride3 ], data.normals[ stride3 + 1 ], data.normals[ stride3 + 2 ] );\n\t\t\t\t\tskinIndices.push( data.skinIndices[ stride4 ], data.skinIndices[ stride4 + 1 ], data.skinIndices[ stride4 + 2 ], data.skinIndices[ stride4 + 3 ] );\n\t\t\t\t\tskinWeights.push( data.skinWeights[ stride4 ], data.skinWeights[ stride4 + 1 ], data.skinWeights[ stride4 + 2 ], data.skinWeights[ stride4 + 3 ] );\n\t\t\t\t\tuvs.push( data.uvs[ stride2 ], data.uvs[ stride2 + 1 ] );\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tbufferGeometry.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\t\t\t\tbufferGeometry.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\t\t\tbufferGeometry.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\t\t\t\tbufferGeometry.setAttribute( 'skinIndex', new Uint16BufferAttribute( skinIndices, 4 ) );\n\t\t\t\tbufferGeometry.setAttribute( 'skinWeight', new Float32BufferAttribute( skinWeights, 4 ) );\n\n\t\t\t\tthis._computeGroups( bufferGeometry, data.materialIndices );\n\n\t\t\t\treturn bufferGeometry;\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_computeGroups',\n\t\t\tvalue: function _computeGroups( bufferGeometry, materialIndices ) {\n\n\t\t\t\tvar group;\n\t\t\t\tvar groups = [];\n\t\t\t\tvar materialIndex = undefined;\n\n\t\t\t\tfor ( var i = 0; i < materialIndices.length; i ++ ) {\n\n\t\t\t\t\tvar currentMaterialIndex = materialIndices[ i ];\n\n\t\t\t\t\tif ( currentMaterialIndex !== materialIndex ) {\n\n\t\t\t\t\t\tmaterialIndex = currentMaterialIndex;\n\n\t\t\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgroup = {\n\t\t\t\t\t\t\tstart: i * 3,\n\t\t\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tbufferGeometry.groups = groups;\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_setMeshTextureCoords',\n\t\t\tvalue: function _setMeshTextureCoords() {\n\n\t\t\t\tvar endRead = 0;\n\t\t\t\tvar mode = 0;\n\t\t\t\tvar mode_local = 0;\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tswitch ( mode ) {\n\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tif ( mode_local === 0 ) {\n\n\t\t\t\t\t\t\t\tvar refO = this._readInt1( 0 );\n\t\t\t\t\t\t\t\tendRead = refO.endRead;\n\t\t\t\t\t\t\t\tmode_local = 1;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tvar find = this._currentObject.data.indexOf( ',', endRead ) + 1;\n\t\t\t\t\t\t\t\tif ( find === 0 ) {\n\n\t\t\t\t\t\t\t\t\tfind = this._currentObject.data.length;\n\t\t\t\t\t\t\t\t\tmode = 2;\n\t\t\t\t\t\t\t\t\tmode_local = 0;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar line = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\t\t\t\t\tvar data = this._readLine( line.trim() ).split( \";\" );\n\t\t\t\t\t\t\t\tif ( this.IsUvYReverse ) {\n\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.uvs.push( parseFloat( data[ 0 ] ), 1 - parseFloat( data[ 1 ] ) );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.uvs.push( parseFloat( data[ 0 ] ), parseFloat( data[ 1 ] ) );\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tendRead = find + 1;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( endRead >= this._currentObject.data.length ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_setMeshMaterialList',\n\t\t\tvalue: function _setMeshMaterialList() {\n\n\t\t\t\tvar endRead = 0;\n\t\t\t\tvar mode = 0;\n\t\t\t\tvar mode_local = 0;\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tif ( mode_local < 2 ) {\n\n\t\t\t\t\t\tvar refO = this._readInt1( endRead );\n\t\t\t\t\t\tendRead = refO.endRead;\n\t\t\t\t\t\tmode_local ++;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar find = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\t\t\tif ( find === - 1 ) {\n\n\t\t\t\t\t\t\tfind = this._currentObject.data.length;\n\t\t\t\t\t\t\tmode = 3;\n\t\t\t\t\t\t\tmode_local = 0;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar line = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\t\t\tvar data = this._readLine( line.trim() ).split( \",\" );\n\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tthis._currentGeo.GeometryData.materialIndices[ i ] = parseInt( data[ i ] );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tendRead = this._currentObject.data.length;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( endRead >= this._currentObject.data.length || mode >= 3 ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_setMaterial',\n\t\t\tvalue: function _setMaterial() {\n\n\t\t\t\tvar _nowMat = new MeshPhongMaterial( {\n\t\t\t\t\tcolor: Math.random() * 0xffffff\n\t\t\t\t} );\n\t\t\t\t_nowMat.side = FrontSide;\n\t\t\t\t_nowMat.name = this._currentObject.name;\n\t\t\t\tvar endRead = 0;\n\t\t\t\tvar find = this._currentObject.data.indexOf( ';;', endRead );\n\t\t\t\tvar line = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\tvar data = this._readLine( line.trim() ).split( \";\" );\n\t\t\t\t_nowMat.color.r = parseFloat( data[ 0 ] );\n\t\t\t\t_nowMat.color.g = parseFloat( data[ 1 ] );\n\t\t\t\t_nowMat.color.b = parseFloat( data[ 2 ] );\n\t\t\t\tendRead = find + 2;\n\t\t\t\tfind = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\tline = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\t_nowMat.shininess = parseFloat( this._readLine( line ) );\n\t\t\t\tendRead = find + 1;\n\t\t\t\tfind = this._currentObject.data.indexOf( ';;', endRead );\n\t\t\t\tline = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\tvar data2 = this._readLine( line.trim() ).split( \";\" );\n\t\t\t\t_nowMat.specular.r = parseFloat( data2[ 0 ] );\n\t\t\t\t_nowMat.specular.g = parseFloat( data2[ 1 ] );\n\t\t\t\t_nowMat.specular.b = parseFloat( data2[ 2 ] );\n\t\t\t\tendRead = find + 2;\n\t\t\t\tfind = this._currentObject.data.indexOf( ';;', endRead );\n\t\t\t\tif ( find === - 1 ) {\n\n\t\t\t\t\tfind = this._currentObject.data.length;\n\n\t\t\t\t}\n\t\t\t\tline = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\tvar data3 = this._readLine( line.trim() ).split( \";\" );\n\t\t\t\t_nowMat.emissive.r = parseFloat( data3[ 0 ] );\n\t\t\t\t_nowMat.emissive.g = parseFloat( data3[ 1 ] );\n\t\t\t\t_nowMat.emissive.b = parseFloat( data3[ 2 ] );\n\t\t\t\tvar localObject = null;\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tif ( this._currentObject.children.length > 0 ) {\n\n\t\t\t\t\t\tlocalObject = this._currentObject.children.shift();\n\t\t\t\t\t\tif ( this.debug ) {\n\n\t\t\t\t\t\t\tconsole.log( 'processing ' + localObject.name );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar fileName = localObject.data.substr( 1, localObject.data.length - 2 );\n\t\t\t\t\t\tswitch ( localObject.type ) {\n\n\t\t\t\t\t\t\tcase \"TextureFilename\":\n\t\t\t\t\t\t\t\t_nowMat.map = this.texloader.load( fileName );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"BumpMapFilename\":\n\t\t\t\t\t\t\t\t_nowMat.bumpMap = this.texloader.load( fileName );\n\t\t\t\t\t\t\t\t_nowMat.bumpScale = 0.05;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"NormalMapFilename\":\n\t\t\t\t\t\t\t\t_nowMat.normalMap = this.texloader.load( fileName );\n\t\t\t\t\t\t\t\t_nowMat.normalScale = new Vector2( 2, 2 );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"EmissiveMapFilename\":\n\t\t\t\t\t\t\t\t_nowMat.emissiveMap = this.texloader.load( fileName );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"LightMapFilename\":\n\t\t\t\t\t\t\t\t_nowMat.lightMap = this.texloader.load( fileName );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tthis._currentGeo.Materials.push( _nowMat );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_setSkinWeights',\n\t\t\tvalue: function _setSkinWeights() {\n\n\t\t\t\tvar boneInf = new XboneInf();\n\t\t\t\tvar endRead = 0;\n\t\t\t\tvar find = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\tvar line = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\tendRead = find + 1;\n\t\t\t\tboneInf.boneName = line.substr( 1, line.length - 2 );\n\t\t\t\tboneInf.BoneIndex = this._currentGeo.BoneInfs.length;\n\t\t\t\tfind = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\tendRead = find + 1;\n\t\t\t\tfind = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\tline = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\tvar data = this._readLine( line.trim() ).split( \",\" );\n\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\tboneInf.Indeces.push( parseInt( data[ i ] ) );\n\n\t\t\t\t}\n\t\t\t\tendRead = find + 1;\n\t\t\t\tfind = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\tline = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\tvar data2 = this._readLine( line.trim() ).split( \",\" );\n\t\t\t\tfor ( var _i = 0; _i < data2.length; _i ++ ) {\n\n\t\t\t\t\tboneInf.Weights.push( parseFloat( data2[ _i ] ) );\n\n\t\t\t\t}\n\t\t\t\tendRead = find + 1;\n\t\t\t\tfind = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\tif ( find <= 0 ) {\n\n\t\t\t\t\tfind = this._currentObject.data.length;\n\n\t\t\t\t}\n\t\t\t\tline = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\tvar data3 = this._readLine( line.trim() ).split( \",\" );\n\t\t\t\tboneInf.OffsetMatrix = new Matrix4();\n\t\t\t\tthis._ParseMatrixData( boneInf.OffsetMatrix, data3 );\n\t\t\t\tthis._currentGeo.BoneInfs.push( boneInf );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_makePutBoneList',\n\t\t\tvalue: function _makePutBoneList( _RootName, _bones ) {\n\n\t\t\t\tvar putting = false;\n\t\t\t\tfor ( var frame in this.HieStack ) {\n\n\t\t\t\t\tif ( this.HieStack[ frame ].name === _RootName || putting ) {\n\n\t\t\t\t\t\tputting = true;\n\t\t\t\t\t\tvar b = new Bone();\n\t\t\t\t\t\tb.name = this.HieStack[ frame ].name;\n\t\t\t\t\t\tb.applyMatrix( this.HieStack[ frame ].FrameTransformMatrix );\n\t\t\t\t\t\tb.matrixWorld = b.matrix;\n\t\t\t\t\t\tb.FrameTransformMatrix = this.HieStack[ frame ].FrameTransformMatrix;\n\t\t\t\t\t\tb.pos = new Vector3().setFromMatrixPosition( b.FrameTransformMatrix ).toArray();\n\t\t\t\t\t\tb.rotq = new Quaternion().setFromRotationMatrix( b.FrameTransformMatrix ).toArray();\n\t\t\t\t\t\tb.scl = new Vector3().setFromMatrixScale( b.FrameTransformMatrix ).toArray();\n\t\t\t\t\t\tif ( this.HieStack[ frame ].parentName && this.HieStack[ frame ].parentName.length > 0 ) {\n\n\t\t\t\t\t\t\tfor ( var i = 0; i < _bones.length; i ++ ) {\n\n\t\t\t\t\t\t\t\tif ( this.HieStack[ frame ].parentName === _bones[ i ].name ) {\n\n\t\t\t\t\t\t\t\t\t_bones[ i ].add( b );\n\t\t\t\t\t\t\t\t\tb.parent = i;\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_bones.push( b );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_makeOutputGeometry',\n\t\t\tvalue: function _makeOutputGeometry() {\n\n\t\t\t\tvar mesh = null;\n\t\t\t\tif ( this._currentGeo.BoneInfs.length > 0 ) {\n\n\t\t\t\t\tvar putBones = [];\n\t\t\t\t\tthis._makePutBoneList( this._currentGeo.baseFrame.parentName, putBones );\n\t\t\t\t\tfor ( var bi = 0; bi < this._currentGeo.BoneInfs.length; bi ++ ) {\n\n\t\t\t\t\t\tvar boneIndex = 0;\n\t\t\t\t\t\tfor ( var bb = 0; bb < putBones.length; bb ++ ) {\n\n\t\t\t\t\t\t\tif ( putBones[ bb ].name === this._currentGeo.BoneInfs[ bi ].boneName ) {\n\n\t\t\t\t\t\t\t\tboneIndex = bb;\n\t\t\t\t\t\t\t\tputBones[ bb ].OffsetMatrix = new Matrix4();\n\t\t\t\t\t\t\t\tputBones[ bb ].OffsetMatrix.copy( this._currentGeo.BoneInfs[ bi ].OffsetMatrix );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor ( var vi = 0; vi < this._currentGeo.BoneInfs[ bi ].Indeces.length; vi ++ ) {\n\n\t\t\t\t\t\t\tvar nowVertexID = this._currentGeo.BoneInfs[ bi ].Indeces[ vi ];\n\t\t\t\t\t\t\tvar nowVal = this._currentGeo.BoneInfs[ bi ].Weights[ vi ];\n\n\t\t\t\t\t\t\tvar stride = nowVertexID * 4;\n\n\t\t\t\t\t\t\tswitch ( this._currentGeo.VertexSetedBoneCount[ nowVertexID ] ) {\n\n\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.skinIndices[ stride ] = boneIndex;\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.skinWeights[ stride ] = nowVal;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.skinIndices[ stride + 1 ] = boneIndex;\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.skinWeights[ stride + 1 ] = nowVal;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.skinIndices[ stride + 2 ] = boneIndex;\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.skinWeights[ stride + 2 ] = nowVal;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.skinIndices[ stride + 3 ] = boneIndex;\n\t\t\t\t\t\t\t\t\tthis._currentGeo.GeometryData.skinWeights[ stride + 3 ] = nowVal;\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis._currentGeo.VertexSetedBoneCount[ nowVertexID ] ++;\n\t\t\t\t\t\t\tif ( this._currentGeo.VertexSetedBoneCount[ nowVertexID ] > 4 ) {\n\n\t\t\t\t\t\t\t\tconsole.log( 'warn! over 4 bone weight! :' + nowVertexID );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tfor ( var sk = 0; sk < this._currentGeo.Materials.length; sk ++ ) {\n\n\t\t\t\t\t\tthis._currentGeo.Materials[ sk ].skinning = true;\n\n\t\t\t\t\t}\n\t\t\t\t\tvar offsetList = [];\n\t\t\t\t\tfor ( var _bi = 0; _bi < putBones.length; _bi ++ ) {\n\n\t\t\t\t\t\tif ( putBones[ _bi ].OffsetMatrix ) {\n\n\t\t\t\t\t\t\toffsetList.push( putBones[ _bi ].OffsetMatrix );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\toffsetList.push( new Matrix4() );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar bufferGeometry = this._buildGeometry();\n\t\t\t\t\tmesh = new SkinnedMesh( bufferGeometry, this._currentGeo.Materials.length === 1 ? this._currentGeo.Materials[ 0 ] : this._currentGeo.Materials );\n\n\t\t\t\t\tthis._initSkeleton( mesh, putBones, offsetList );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar _bufferGeometry = this._buildGeometry();\n\t\t\t\t\tmesh = new Mesh( _bufferGeometry, this._currentGeo.Materials.length === 1 ? this._currentGeo.Materials[ 0 ] : this._currentGeo.Materials );\n\n\t\t\t\t}\n\t\t\t\tmesh.name = this._currentGeo.name;\n\t\t\t\tvar worldBaseMx = new Matrix4();\n\t\t\t\tvar currentMxFrame = this._currentGeo.baseFrame.putBone;\n\t\t\t\tif ( currentMxFrame && currentMxFrame.parent ) {\n\n\t\t\t\t\twhile ( true ) {\n\n\t\t\t\t\t\tcurrentMxFrame = currentMxFrame.parent;\n\t\t\t\t\t\tif ( currentMxFrame ) {\n\n\t\t\t\t\t\t\tworldBaseMx.multiply( currentMxFrame.FrameTransformMatrix );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tmesh.applyMatrix( worldBaseMx );\n\n\t\t\t\t}\n\t\t\t\tthis.Meshes.push( mesh );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_initSkeleton',\n\t\t\tvalue: function _initSkeleton( mesh, boneList, boneInverses ) {\n\n\t\t\t\tvar bones = [], bone, gbone;\n\t\t\t\tvar i, il;\n\n\t\t\t\tfor ( i = 0, il = boneList.length; i < il; i ++ ) {\n\n\t\t\t\t\tgbone = boneList[ i ];\n\n\t\t\t\t\tbone = new Bone();\n\t\t\t\t\tbones.push( bone );\n\n\t\t\t\t\tbone.name = gbone.name;\n\t\t\t\t\tbone.position.fromArray( gbone.pos );\n\t\t\t\t\tbone.quaternion.fromArray( gbone.rotq );\n\t\t\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( i = 0, il = boneList.length; i < il; i ++ ) {\n\n\t\t\t\t\tgbone = boneList[ i ];\n\n\t\t\t\t\tif ( ( gbone.parent !== - 1 ) && ( gbone.parent !== null ) && ( bones[ gbone.parent ] !== undefined ) ) {\n\n\t\t\t\t\t\tbones[ gbone.parent ].add( bones[ i ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh.add( bones[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.updateMatrixWorld( true );\n\n\t\t\t\tvar skeleton = new Skeleton( bones, boneInverses );\n\t\t\t\tmesh.bind( skeleton, mesh.matrixWorld );\n\n\t\t\t}\n\n\t\t}, {\n\t\t\tkey: '_readAnimationKey',\n\t\t\tvalue: function _readAnimationKey() {\n\n\t\t\t\tvar endRead = 0;\n\t\t\t\tvar find = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\tvar line = this._currentObject.data.substr( endRead, find - endRead );\n\t\t\t\tendRead = find + 1;\n\t\t\t\tvar nowKeyType = parseInt( this._readLine( line ) );\n\t\t\t\tfind = this._currentObject.data.indexOf( ';', endRead );\n\t\t\t\tendRead = find + 1;\n\t\t\t\tline = this._currentObject.data.substr( endRead );\n\t\t\t\tvar data = this._readLine( line.trim() ).split( \";;,\" );\n\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\tvar data2 = data[ i ].split( \";\" );\n\t\t\t\t\tvar keyInfo = new XKeyFrameInfo();\n\t\t\t\t\tkeyInfo.type = nowKeyType;\n\t\t\t\t\tkeyInfo.Frame = parseInt( data2[ 0 ] );\n\t\t\t\t\tkeyInfo.index = this._currentAnimeFrames.keyFrames.length;\n\t\t\t\t\tkeyInfo.time = keyInfo.Frame;\n\t\t\t\t\tif ( nowKeyType != 4 ) {\n\n\t\t\t\t\t\tvar frameFound = false;\n\t\t\t\t\t\tfor ( var mm = 0; mm < this._currentAnimeFrames.keyFrames.length; mm ++ ) {\n\n\t\t\t\t\t\t\tif ( this._currentAnimeFrames.keyFrames[ mm ].Frame === keyInfo.Frame ) {\n\n\t\t\t\t\t\t\t\tkeyInfo = this._currentAnimeFrames.keyFrames[ mm ];\n\t\t\t\t\t\t\t\tframeFound = true;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar frameValue = data2[ 2 ].split( \",\" );\n\t\t\t\t\t\tswitch ( nowKeyType ) {\n\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\tkeyInfo.rot = new Quaternion( parseFloat( frameValue[ 1 ] ), parseFloat( frameValue[ 2 ] ), parseFloat( frameValue[ 3 ] ), parseFloat( frameValue[ 0 ] ) * - 1 );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\tkeyInfo.scl = new Vector3( parseFloat( frameValue[ 0 ] ), parseFloat( frameValue[ 1 ] ), parseFloat( frameValue[ 2 ] ) );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tkeyInfo.pos = new Vector3( parseFloat( frameValue[ 0 ] ), parseFloat( frameValue[ 1 ] ), parseFloat( frameValue[ 2 ] ) );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( ! frameFound ) {\n\n\t\t\t\t\t\t\tthis._currentAnimeFrames.keyFrames.push( keyInfo );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tkeyInfo.matrix = new Matrix4();\n\t\t\t\t\t\tthis._ParseMatrixData( keyInfo.matrix, data2[ 2 ].split( \",\" ) );\n\t\t\t\t\t\tthis._currentAnimeFrames.keyFrames.push( keyInfo );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_makeOutputAnimation',\n\t\t\tvalue: function _makeOutputAnimation() {\n\n\t\t\t\tvar animationObj = new XAnimationObj( this.options );\n\t\t\t\tanimationObj.fps = this.animTicksPerSecond;\n\t\t\t\tanimationObj.name = this._currentAnime.name;\n\t\t\t\tanimationObj.make( this._currentAnime.AnimeFrames );\n\t\t\t\tthis.animations.push( animationObj );\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'assignAnimation',\n\t\t\tvalue: function assignAnimation( _model, _animation ) {\n\n\t\t\t\tvar model = _model;\n\t\t\t\tvar animation = _animation;\n\t\t\t\tif ( ! model ) {\n\n\t\t\t\t\tmodel = this.Meshes[ 0 ];\n\n\t\t\t\t}\n\t\t\t\tif ( ! animation ) {\n\n\t\t\t\t\tanimation = this.animations[ 0 ];\n\n\t\t\t\t}\n\t\t\t\tif ( ! model || ! animation ) {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\t\t\t\tvar put = {};\n\t\t\t\tput.fps = animation.fps;\n\t\t\t\tput.name = animation.name;\n\t\t\t\tput.length = animation.length;\n\t\t\t\tput.hierarchy = [];\n\t\t\t\tfor ( var b = 0; b < model.skeleton.bones.length; b ++ ) {\n\n\t\t\t\t\tvar findAnimation = false;\n\t\t\t\t\tfor ( var i = 0; i < animation.hierarchy.length; i ++ ) {\n\n\t\t\t\t\t\tif ( model.skeleton.bones[ b ].name === animation.hierarchy[ i ].name ) {\n\n\t\t\t\t\t\t\tfindAnimation = true;\n\t\t\t\t\t\t\tvar c_key = animation.hierarchy[ i ].copy();\n\t\t\t\t\t\t\tc_key.parent = - 1;\n\t\t\t\t\t\t\tif ( model.skeleton.bones[ b ].parent && model.skeleton.bones[ b ].parent.type === \"Bone\" ) {\n\n\t\t\t\t\t\t\t\tfor ( var bb = 0; bb < put.hierarchy.length; bb ++ ) {\n\n\t\t\t\t\t\t\t\t\tif ( put.hierarchy[ bb ].name === model.skeleton.bones[ b ].parent.name ) {\n\n\t\t\t\t\t\t\t\t\t\tc_key.parent = bb;\n\t\t\t\t\t\t\t\t\t\tc_key.parentName = model.skeleton.bones[ b ].parent.name;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tput.hierarchy.push( c_key );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( ! findAnimation ) {\n\n\t\t\t\t\t\tvar _c_key = animation.hierarchy[ 0 ].copy();\n\t\t\t\t\t\t_c_key.name = model.skeleton.bones[ b ].name;\n\t\t\t\t\t\t_c_key.parent = - 1;\n\t\t\t\t\t\tfor ( var k = 0; k < _c_key.keys.length; k ++ ) {\n\n\t\t\t\t\t\t\tif ( _c_key.keys[ k ].pos ) {\n\n\t\t\t\t\t\t\t\t_c_key.keys[ k ].pos.set( 0, 0, 0 );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( _c_key.keys[ k ].scl ) {\n\n\t\t\t\t\t\t\t\t_c_key.keys[ k ].scl.set( 1, 1, 1 );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( _c_key.keys[ k ].rot ) {\n\n\t\t\t\t\t\t\t\t_c_key.keys[ k ].rot.set( 0, 0, 0, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tput.hierarchy.push( _c_key );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tif ( ! model.geometry.animations ) {\n\n\t\t\t\t\tmodel.geometry.animations = [];\n\n\t\t\t\t}\n\n\t\t\t\tmodel.geometry.animations.push( AnimationClip.parseAnimation( put, model.skeleton.bones ) );\n\t\t\t\tif ( ! model.animationMixer ) {\n\n\t\t\t\t\tmodel.animationMixer = new AnimationMixer( model );\n\n\t\t\t\t}\n\n\t\t\t\treturn put;\n\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_ParseMatrixData',\n\t\t\tvalue: function _ParseMatrixData( targetMatrix, data ) {\n\n\t\t\t\ttargetMatrix.set( parseFloat( data[ 0 ] ), parseFloat( data[ 4 ] ), parseFloat( data[ 8 ] ), parseFloat( data[ 12 ] ), parseFloat( data[ 1 ] ), parseFloat( data[ 5 ] ), parseFloat( data[ 9 ] ), parseFloat( data[ 13 ] ), parseFloat( data[ 2 ] ), parseFloat( data[ 6 ] ), parseFloat( data[ 10 ] ), parseFloat( data[ 14 ] ), parseFloat( data[ 3 ] ), parseFloat( data[ 7 ] ), parseFloat( data[ 11 ] ), parseFloat( data[ 15 ] ) );\n\n\t\t\t}\n\t\t} ] );\n\t\treturn XLoader;\n\n\t}();\n\n\treturn XLoader;\n\n} )();\n\nexport { XLoader };\n"]}