{"version":3,"sources":["Lut.js"],"names":[],"mappings":"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","file":"Lut-compiled.js","sourcesContent":["/**\n * @author daron1337 / http://daron1337.github.io/\n */\n\nimport {\n\tColor\n} from \"../../../build/three.module.js\";\n\nvar Lut = function ( colormap, numberofcolors ) {\n\n\tthis.lut = [];\n\tthis.setColorMap( colormap, numberofcolors );\n\treturn this;\n\n};\n\nLut.prototype = {\n\n\tconstructor: Lut,\n\n\tlut: [], map: [], n: 256, minV: 0, maxV: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value instanceof Lut ) {\n\n\t\t\tthis.copy( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetMin: function ( min ) {\n\n\t\tthis.minV = min;\n\n\t\treturn this;\n\n\t},\n\n\tsetMax: function ( max ) {\n\n\t\tthis.maxV = max;\n\n\t\treturn this;\n\n\t},\n\n\tsetColorMap: function ( colormap, numberofcolors ) {\n\n\t\tthis.map = ColorMapKeywords[ colormap ] || ColorMapKeywords.rainbow;\n\t\tthis.n = numberofcolors || 32;\n\n\t\tvar step = 1.0 / this.n;\n\n\t\tthis.lut.length = 0;\n\t\tfor ( var i = 0; i <= 1; i += step ) {\n\n\t\t\tfor ( var j = 0; j < this.map.length - 1; j ++ ) {\n\n\t\t\t\tif ( i >= this.map[ j ][ 0 ] && i < this.map[ j + 1 ][ 0 ] ) {\n\n\t\t\t\t\tvar min = this.map[ j ][ 0 ];\n\t\t\t\t\tvar max = this.map[ j + 1 ][ 0 ];\n\n\t\t\t\t\tvar minColor = new Color( this.map[ j ][ 1 ] );\n\t\t\t\t\tvar maxColor = new Color( this.map[ j + 1 ][ 1 ] );\n\n\t\t\t\t\tvar color = minColor.lerp( maxColor, ( i - min ) / ( max - min ) );\n\n\t\t\t\t\tthis.lut.push( color );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( lut ) {\n\n\t\tthis.lut = lut.lut;\n\t\tthis.map = lut.map;\n\t\tthis.n = lut.n;\n\t\tthis.minV = lut.minV;\n\t\tthis.maxV = lut.maxV;\n\n\t\treturn this;\n\n\t},\n\n\tgetColor: function ( alpha ) {\n\n\t\tif ( alpha <= this.minV ) {\n\n\t\t\talpha = this.minV;\n\n\t\t} else if ( alpha >= this.maxV ) {\n\n\t\t\talpha = this.maxV;\n\n\t\t}\n\n\t\talpha = ( alpha - this.minV ) / ( this.maxV - this.minV );\n\n\t\tvar colorPosition = Math.round( alpha * this.n );\n\t\tcolorPosition == this.n ? colorPosition -= 1 : colorPosition;\n\n\t\treturn this.lut[ colorPosition ];\n\n\t},\n\n\taddColorMap: function ( colormapName, arrayOfColors ) {\n\n\t\tColorMapKeywords[ colormapName ] = arrayOfColors;\n\n\t},\n\n\tcreateCanvas: function () {\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = 1;\n\t\tcanvas.height = this.n;\n\n\t\tthis.updateCanvas( canvas );\n\n\t\treturn canvas;\n\n\t},\n\n\tupdateCanvas: function ( canvas ) {\n\n\t\tvar ctx = canvas.getContext( '2d', { alpha: false } );\n\n\t\tvar imageData = ctx.getImageData( 0, 0, 1, this.n );\n\n\t\tvar data = imageData.data;\n\n\t\tvar k = 0;\n\n\t\tvar step = 1.0 / this.n;\n\n\t\tfor ( var i = 1; i >= 0; i -= step ) {\n\n\t\t\tfor ( var j = this.map.length - 1; j >= 0; j -- ) {\n\n\t\t\t\tif ( i < this.map[ j ][ 0 ] && i >= this.map[ j - 1 ][ 0 ] ) {\n\n\t\t\t\t\tvar min = this.map[ j - 1 ][ 0 ];\n\t\t\t\t\tvar max = this.map[ j ][ 0 ];\n\n\t\t\t\t\tvar minColor = new Color( this.map[ j - 1 ][ 1 ] );\n\t\t\t\t\tvar maxColor = new Color( this.map[ j ][ 1 ] );\n\n\t\t\t\t\tvar color = minColor.lerp( maxColor, ( i - min ) / ( max - min ) );\n\n\t\t\t\t\tdata[ k * 4 ] = Math.round( color.r * 255 );\n\t\t\t\t\tdata[ k * 4 + 1 ] = Math.round( color.g * 255 );\n\t\t\t\t\tdata[ k * 4 + 2 ] = Math.round( color.b * 255 );\n\t\t\t\t\tdata[ k * 4 + 3 ] = 255;\n\n\t\t\t\t\tk += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tctx.putImageData( imageData, 0, 0 );\n\n\t\treturn canvas;\n\n\t}\n};\n\nvar ColorMapKeywords = {\n\n\t\"rainbow\": [[ 0.0, 0x0000FF ], [ 0.2, 0x00FFFF ], [ 0.5, 0x00FF00 ], [ 0.8, 0xFFFF00 ], [ 1.0, 0xFF0000 ]],\n\t\"cooltowarm\": [[ 0.0, 0x3C4EC2 ], [ 0.2, 0x9BBCFF ], [ 0.5, 0xDCDCDC ], [ 0.8, 0xF6A385 ], [ 1.0, 0xB40426 ]],\n\t\"blackbody\": [[ 0.0, 0x000000 ], [ 0.2, 0x780000 ], [ 0.5, 0xE63200 ], [ 0.8, 0xFFFF00 ], [ 1.0, 0xFFFFFF ]],\n\t\"grayscale\": [[ 0.0, 0x000000 ], [ 0.2, 0x404040 ], [ 0.5, 0x7F7F80 ], [ 0.8, 0xBFBFBF ], [ 1.0, 0xFFFFFF ]]\n\n};\n\nexport { Lut, ColorMapKeywords };\n"]}