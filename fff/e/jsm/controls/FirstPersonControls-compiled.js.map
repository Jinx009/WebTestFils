{"version":3,"sources":["FirstPersonControls.js"],"names":[],"mappings":"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","file":"FirstPersonControls-compiled.js","sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author paulirish / http://paulirish.com/\n */\n\nimport {\n\tMath as _Math,\n\tSpherical,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar FirstPersonControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.FirstPersonControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document;\n\n\t}\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.movementSpeed = 1.0;\n\tthis.lookSpeed = 0.005;\n\n\tthis.lookVertical = true;\n\tthis.autoForward = false;\n\n\tthis.activeLook = true;\n\n\tthis.heightSpeed = false;\n\tthis.heightCoef = 1.0;\n\tthis.heightMin = 0.0;\n\tthis.heightMax = 1.0;\n\n\tthis.constrainVertical = false;\n\tthis.verticalMin = 0;\n\tthis.verticalMax = Math.PI;\n\n\tthis.mouseDragOn = false;\n\n\t// internals\n\n\tthis.autoSpeedFactor = 0.0;\n\n\tthis.mouseX = 0;\n\tthis.mouseY = 0;\n\n\tthis.moveForward = false;\n\tthis.moveBackward = false;\n\tthis.moveLeft = false;\n\tthis.moveRight = false;\n\n\tthis.viewHalfX = 0;\n\tthis.viewHalfY = 0;\n\n\t// private variables\n\n\tvar lat = 0;\n\tvar lon = 0;\n\n\tvar lookDirection = new Vector3();\n\tvar spherical = new Spherical();\n\tvar target = new Vector3();\n\n\t//\n\n\tif ( this.domElement !== document ) {\n\n\t\tthis.domElement.setAttribute( 'tabindex', - 1 );\n\n\t}\n\n\t//\n\n\tthis.handleResize = function () {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.viewHalfX = window.innerWidth / 2;\n\t\t\tthis.viewHalfY = window.innerHeight / 2;\n\n\t\t} else {\n\n\t\t\tthis.viewHalfX = this.domElement.offsetWidth / 2;\n\t\t\tthis.viewHalfY = this.domElement.offsetHeight / 2;\n\n\t\t}\n\n\t};\n\n\tthis.onMouseDown = function ( event ) {\n\n\t\tif ( this.domElement !== document ) {\n\n\t\t\tthis.domElement.focus();\n\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.activeLook ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveForward = true; break;\n\t\t\t\tcase 2: this.moveBackward = true; break;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseDragOn = true;\n\n\t};\n\n\tthis.onMouseUp = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.activeLook ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveForward = false; break;\n\t\t\t\tcase 2: this.moveBackward = false; break;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseDragOn = false;\n\n\t};\n\n\tthis.onMouseMove = function ( event ) {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.mouseX = event.pageX - this.viewHalfX;\n\t\t\tthis.mouseY = event.pageY - this.viewHalfY;\n\n\t\t} else {\n\n\t\t\tthis.mouseX = event.pageX - this.domElement.offsetLeft - this.viewHalfX;\n\t\t\tthis.mouseY = event.pageY - this.domElement.offsetTop - this.viewHalfY;\n\n\t\t}\n\n\t};\n\n\tthis.onKeyDown = function ( event ) {\n\n\t\t//event.preventDefault();\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 38: /*up*/\n\t\t\tcase 87: /*W*/ this.moveForward = true; break;\n\n\t\t\tcase 37: /*left*/\n\t\t\tcase 65: /*A*/ this.moveLeft = true; break;\n\n\t\t\tcase 40: /*down*/\n\t\t\tcase 83: /*S*/ this.moveBackward = true; break;\n\n\t\t\tcase 39: /*right*/\n\t\t\tcase 68: /*D*/ this.moveRight = true; break;\n\n\t\t\tcase 82: /*R*/ this.moveUp = true; break;\n\t\t\tcase 70: /*F*/ this.moveDown = true; break;\n\n\t\t}\n\n\t};\n\n\tthis.onKeyUp = function ( event ) {\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 38: /*up*/\n\t\t\tcase 87: /*W*/ this.moveForward = false; break;\n\n\t\t\tcase 37: /*left*/\n\t\t\tcase 65: /*A*/ this.moveLeft = false; break;\n\n\t\t\tcase 40: /*down*/\n\t\t\tcase 83: /*S*/ this.moveBackward = false; break;\n\n\t\t\tcase 39: /*right*/\n\t\t\tcase 68: /*D*/ this.moveRight = false; break;\n\n\t\t\tcase 82: /*R*/ this.moveUp = false; break;\n\t\t\tcase 70: /*F*/ this.moveDown = false; break;\n\n\t\t}\n\n\t};\n\n\tthis.lookAt = function ( x, y, z ) {\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\ttarget.copy( x );\n\n\t\t} else {\n\n\t\t\ttarget.set( x, y, z );\n\n\t\t}\n\n\t\tthis.object.lookAt( target );\n\n\t\tsetOrientation( this );\n\n\t\treturn this;\n\n\t};\n\n\tthis.update = function () {\n\n\t\tvar targetPosition = new Vector3();\n\n\t\treturn function update( delta ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\tif ( this.heightSpeed ) {\n\n\t\t\t\tvar y = _Math.clamp( this.object.position.y, this.heightMin, this.heightMax );\n\t\t\t\tvar heightDelta = y - this.heightMin;\n\n\t\t\t\tthis.autoSpeedFactor = delta * ( heightDelta * this.heightCoef );\n\n\t\t\t} else {\n\n\t\t\t\tthis.autoSpeedFactor = 0.0;\n\n\t\t\t}\n\n\t\t\tvar actualMoveSpeed = delta * this.movementSpeed;\n\n\t\t\tif ( this.moveForward || ( this.autoForward && ! this.moveBackward ) ) this.object.translateZ( - ( actualMoveSpeed + this.autoSpeedFactor ) );\n\t\t\tif ( this.moveBackward ) this.object.translateZ( actualMoveSpeed );\n\n\t\t\tif ( this.moveLeft ) this.object.translateX( - actualMoveSpeed );\n\t\t\tif ( this.moveRight ) this.object.translateX( actualMoveSpeed );\n\n\t\t\tif ( this.moveUp ) this.object.translateY( actualMoveSpeed );\n\t\t\tif ( this.moveDown ) this.object.translateY( - actualMoveSpeed );\n\n\t\t\tvar actualLookSpeed = delta * this.lookSpeed;\n\n\t\t\tif ( ! this.activeLook ) {\n\n\t\t\t\tactualLookSpeed = 0;\n\n\t\t\t}\n\n\t\t\tvar verticalLookRatio = 1;\n\n\t\t\tif ( this.constrainVertical ) {\n\n\t\t\t\tverticalLookRatio = Math.PI / ( this.verticalMax - this.verticalMin );\n\n\t\t\t}\n\n\t\t\tlon -= this.mouseX * actualLookSpeed;\n\t\t\tif ( this.lookVertical ) lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\n\n\t\t\tlat = Math.max( - 85, Math.min( 85, lat ) );\n\n\t\t\tvar phi = _Math.degToRad( 90 - lat );\n\t\t\tvar theta = _Math.degToRad( lon );\n\n\t\t\tif ( this.constrainVertical ) {\n\n\t\t\t\tphi = _Math.mapLinear( phi, 0, Math.PI, this.verticalMin, this.verticalMax );\n\n\t\t\t}\n\n\t\t\tvar position = this.object.position;\n\n\t\t\ttargetPosition.setFromSphericalCoords( 1, phi, theta ).add( position );\n\n\t\t\tthis.object.lookAt( targetPosition );\n\n\t\t};\n\n\t}();\n\n\tfunction contextmenu( event ) {\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', _onMouseDown, false );\n\t\tthis.domElement.removeEventListener( 'mousemove', _onMouseMove, false );\n\t\tthis.domElement.removeEventListener( 'mouseup', _onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', _onKeyDown, false );\n\t\twindow.removeEventListener( 'keyup', _onKeyUp, false );\n\n\t};\n\n\tvar _onMouseMove = bind( this, this.onMouseMove );\n\tvar _onMouseDown = bind( this, this.onMouseDown );\n\tvar _onMouseUp = bind( this, this.onMouseUp );\n\tvar _onKeyDown = bind( this, this.onKeyDown );\n\tvar _onKeyUp = bind( this, this.onKeyUp );\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\tthis.domElement.addEventListener( 'mousemove', _onMouseMove, false );\n\tthis.domElement.addEventListener( 'mousedown', _onMouseDown, false );\n\tthis.domElement.addEventListener( 'mouseup', _onMouseUp, false );\n\n\twindow.addEventListener( 'keydown', _onKeyDown, false );\n\twindow.addEventListener( 'keyup', _onKeyUp, false );\n\n\tfunction bind( scope, fn ) {\n\n\t\treturn function () {\n\n\t\t\tfn.apply( scope, arguments );\n\n\t\t};\n\n\t}\n\n\tfunction setOrientation( controls ) {\n\n\t\tvar quaternion = controls.object.quaternion;\n\n\t\tlookDirection.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\t\tspherical.setFromVector3( lookDirection );\n\n\t\tlat = 90 - _Math.radToDeg( spherical.phi );\n\t\tlon = _Math.radToDeg( spherical.theta );\n\n\t}\n\n\tthis.handleResize();\n\n\tsetOrientation( this );\n\n};\n\nexport { FirstPersonControls };\n"]}