{"version":3,"sources":["PointerLockControls.js"],"names":[],"mappings":"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","file":"PointerLockControls-compiled.js","sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport {\n\tEuler,\n\tEventDispatcher,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar PointerLockControls = function ( camera, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document.body;\n\n\t}\n\n\tthis.domElement = domElement;\n\tthis.isLocked = false;\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar lockEvent = { type: 'lock' };\n\tvar unlockEvent = { type: 'unlock' };\n\n\tvar euler = new Euler( 0, 0, 0, 'YXZ' );\n\n\tvar PI_2 = Math.PI / 2;\n\n\tvar vec = new Vector3();\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.isLocked === false ) return;\n\n\t\tvar movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n\t\tvar movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n\t\teuler.setFromQuaternion( camera.quaternion );\n\n\t\teuler.y -= movementX * 0.002;\n\t\teuler.x -= movementY * 0.002;\n\n\t\teuler.x = Math.max( - PI_2, Math.min( PI_2, euler.x ) );\n\n\t\tcamera.quaternion.setFromEuler( euler );\n\n\t\tscope.dispatchEvent( changeEvent );\n\n\t}\n\n\tfunction onPointerlockChange() {\n\n\t\tif ( document.pointerLockElement === scope.domElement ) {\n\n\t\t\tscope.dispatchEvent( lockEvent );\n\n\t\t\tscope.isLocked = true;\n\n\t\t} else {\n\n\t\t\tscope.dispatchEvent( unlockEvent );\n\n\t\t\tscope.isLocked = false;\n\n\t\t}\n\n\t}\n\n\tfunction onPointerlockError() {\n\n\t\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\n\n\t}\n\n\tthis.connect = function () {\n\n\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.addEventListener( 'pointerlockchange', onPointerlockChange, false );\n\t\tdocument.addEventListener( 'pointerlockerror', onPointerlockError, false );\n\n\t};\n\n\tthis.disconnect = function () {\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'pointerlockchange', onPointerlockChange, false );\n\t\tdocument.removeEventListener( 'pointerlockerror', onPointerlockError, false );\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tthis.disconnect();\n\n\t};\n\n\tthis.getObject = function () { // retaining this method for backward compatibility\n\n\t\treturn camera;\n\n\t};\n\n\tthis.getDirection = function () {\n\n\t\tvar direction = new Vector3( 0, 0, - 1 );\n\n\t\treturn function ( v ) {\n\n\t\t\treturn v.copy( direction ).applyQuaternion( camera.quaternion );\n\n\t\t};\n\n\t}();\n\n\tthis.moveForward = function ( distance ) {\n\n\t\t// move forward parallel to the xz-plane\n\t\t// assumes camera.up is y-up\n\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tvec.crossVectors( camera.up, vec );\n\n\t\tcamera.position.addScaledVector( vec, distance );\n\n\t};\n\n\tthis.moveRight = function ( distance ) {\n\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tcamera.position.addScaledVector( vec, distance );\n\n\t};\n\n\tthis.lock = function () {\n\n\t\tthis.domElement.requestPointerLock();\n\n\t};\n\n\tthis.unlock = function () {\n\n\t\tdocument.exitPointerLock();\n\n\t};\n\n\tthis.connect();\n\n};\n\nPointerLockControls.prototype = Object.create( EventDispatcher.prototype );\nPointerLockControls.prototype.constructor = PointerLockControls;\n\nexport { PointerLockControls };\n"]}