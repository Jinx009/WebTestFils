{"version":3,"sources":["DragControls.js"],"names":[],"mappings":"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","file":"DragControls-compiled.js","sourcesContent":["/**\n * @author zz85 / https://github.com/zz85\n * @author mrdoob / http://mrdoob.com\n * Running this will allow you to drag three.js objects around the screen.\n */\n\nimport {\n\tEventDispatcher,\n\tMatrix4,\n\tPlane,\n\tRaycaster,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar DragControls = function ( _objects, _camera, _domElement ) {\n\n\tvar _plane = new Plane();\n\tvar _raycaster = new Raycaster();\n\n\tvar _mouse = new Vector2();\n\tvar _offset = new Vector3();\n\tvar _intersection = new Vector3();\n\tvar _worldPosition = new Vector3();\n\tvar _inverseMatrix = new Matrix4();\n\n\tvar _selected = null, _hovered = null;\n\n\t//\n\n\tvar scope = this;\n\n\tfunction activate() {\n\n\t\t_domElement.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\t\t_domElement.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\t\t_domElement.addEventListener( 'mouseup', onDocumentMouseCancel, false );\n\t\t_domElement.addEventListener( 'mouseleave', onDocumentMouseCancel, false );\n\t\t_domElement.addEventListener( 'touchmove', onDocumentTouchMove, false );\n\t\t_domElement.addEventListener( 'touchstart', onDocumentTouchStart, false );\n\t\t_domElement.addEventListener( 'touchend', onDocumentTouchEnd, false );\n\n\t}\n\n\tfunction deactivate() {\n\n\t\t_domElement.removeEventListener( 'mousemove', onDocumentMouseMove, false );\n\t\t_domElement.removeEventListener( 'mousedown', onDocumentMouseDown, false );\n\t\t_domElement.removeEventListener( 'mouseup', onDocumentMouseCancel, false );\n\t\t_domElement.removeEventListener( 'mouseleave', onDocumentMouseCancel, false );\n\t\t_domElement.removeEventListener( 'touchmove', onDocumentTouchMove, false );\n\t\t_domElement.removeEventListener( 'touchstart', onDocumentTouchStart, false );\n\t\t_domElement.removeEventListener( 'touchend', onDocumentTouchEnd, false );\n\n\t}\n\n\tfunction dispose() {\n\n\t\tdeactivate();\n\n\t}\n\n\tfunction onDocumentMouseMove( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tvar rect = _domElement.getBoundingClientRect();\n\n\t\t_mouse.x = ( ( event.clientX - rect.left ) / rect.width ) * 2 - 1;\n\t\t_mouse.y = - ( ( event.clientY - rect.top ) / rect.height ) * 2 + 1;\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\n\t\tif ( _selected && scope.enabled ) {\n\n\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( { type: 'drag', object: _selected } );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\n\t\tvar intersects = _raycaster.intersectObjects( _objects, true );\n\n\t\tif ( intersects.length > 0 ) {\n\n\t\t\tvar object = intersects[ 0 ].object;\n\n\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( object.matrixWorld ) );\n\n\t\t\tif ( _hovered !== object ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'hoveron', object: object } );\n\n\t\t\t\t_domElement.style.cursor = 'pointer';\n\t\t\t\t_hovered = object;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( _hovered !== null ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'hoveroff', object: _hovered } );\n\n\t\t\t\t_domElement.style.cursor = 'auto';\n\t\t\t\t_hovered = null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction onDocumentMouseDown( event ) {\n\n\t\tevent.preventDefault();\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\n\t\tvar intersects = _raycaster.intersectObjects( _objects, true );\n\n\t\tif ( intersects.length > 0 ) {\n\n\t\t\t_selected = intersects[ 0 ].object;\n\n\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_inverseMatrix.getInverse( _selected.parent.matrixWorld );\n\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t}\n\n\t\t\t_domElement.style.cursor = 'move';\n\n\t\t\tscope.dispatchEvent( { type: 'dragstart', object: _selected } );\n\n\t\t}\n\n\n\t}\n\n\tfunction onDocumentMouseCancel( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tif ( _selected ) {\n\n\t\t\tscope.dispatchEvent( { type: 'dragend', object: _selected } );\n\n\t\t\t_selected = null;\n\n\t\t}\n\n\t\t_domElement.style.cursor = _hovered ? 'pointer' : 'auto';\n\n\t}\n\n\tfunction onDocumentTouchMove( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent = event.changedTouches[ 0 ];\n\n\t\tvar rect = _domElement.getBoundingClientRect();\n\n\t\t_mouse.x = ( ( event.clientX - rect.left ) / rect.width ) * 2 - 1;\n\t\t_mouse.y = - ( ( event.clientY - rect.top ) / rect.height ) * 2 + 1;\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\n\t\tif ( _selected && scope.enabled ) {\n\n\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( { type: 'drag', object: _selected } );\n\n\t\t\treturn;\n\n\t\t}\n\n\t}\n\n\tfunction onDocumentTouchStart( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent = event.changedTouches[ 0 ];\n\n\t\tvar rect = _domElement.getBoundingClientRect();\n\n\t\t_mouse.x = ( ( event.clientX - rect.left ) / rect.width ) * 2 - 1;\n\t\t_mouse.y = - ( ( event.clientY - rect.top ) / rect.height ) * 2 + 1;\n\n\t\t_raycaster.setFromCamera( _mouse, _camera );\n\n\t\tvar intersects = _raycaster.intersectObjects( _objects, true );\n\n\t\tif ( intersects.length > 0 ) {\n\n\t\t\t_selected = intersects[ 0 ].object;\n\n\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_inverseMatrix.getInverse( _selected.parent.matrixWorld );\n\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t}\n\n\t\t\t_domElement.style.cursor = 'move';\n\n\t\t\tscope.dispatchEvent( { type: 'dragstart', object: _selected } );\n\n\t\t}\n\n\n\t}\n\n\tfunction onDocumentTouchEnd( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tif ( _selected ) {\n\n\t\t\tscope.dispatchEvent( { type: 'dragend', object: _selected } );\n\n\t\t\t_selected = null;\n\n\t\t}\n\n\t\t_domElement.style.cursor = 'auto';\n\n\t}\n\n\tactivate();\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.activate = activate;\n\tthis.deactivate = deactivate;\n\tthis.dispose = dispose;\n\n};\n\nDragControls.prototype = Object.create( EventDispatcher.prototype );\nDragControls.prototype.constructor = DragControls;\n\nexport { DragControls };\n"]}