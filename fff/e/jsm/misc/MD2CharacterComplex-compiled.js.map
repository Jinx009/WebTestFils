{"version":3,"sources":["MD2CharacterComplex.js"],"names":[],"mappings":"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","file":"MD2CharacterComplex-compiled.js","sourcesContent":["/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tBox3,\n\tMath as _Math,\n\tMeshLambertMaterial,\n\tObject3D,\n\tTextureLoader,\n\tUVMapping\n} from \"../../../build/three.module.js\";\nimport { MD2Loader } from \"../loaders/MD2Loader.js\";\nimport { MorphBlendMesh } from \"../misc/MorphBlendMesh.js\";\n\nvar MD2CharacterComplex = function () {\n\n\tvar scope = this;\n\n\tthis.scale = 1;\n\n\t// animation parameters\n\n\tthis.animationFPS = 6;\n\tthis.transitionFrames = 15;\n\n\t// movement model parameters\n\n\tthis.maxSpeed = 275;\n\tthis.maxReverseSpeed = - 275;\n\n\tthis.frontAcceleration = 600;\n\tthis.backAcceleration = 600;\n\n\tthis.frontDecceleration = 600;\n\n\tthis.angularSpeed = 2.5;\n\n\t// rig\n\n\tthis.root = new Object3D();\n\n\tthis.meshBody = null;\n\tthis.meshWeapon = null;\n\n\tthis.controls = null;\n\n\t// skins\n\n\tthis.skinsBody = [];\n\tthis.skinsWeapon = [];\n\n\tthis.weapons = [];\n\n\tthis.currentSkin = undefined;\n\n\t//\n\n\tthis.onLoadComplete = function () {};\n\n\t// internals\n\n\tthis.meshes = [];\n\tthis.animations = {};\n\n\tthis.loadCounter = 0;\n\n\t// internal movement control variables\n\n\tthis.speed = 0;\n\tthis.bodyOrientation = 0;\n\n\tthis.walkSpeed = this.maxSpeed;\n\tthis.crouchSpeed = this.maxSpeed * 0.5;\n\n\t// internal animation parameters\n\n\tthis.activeAnimation = null;\n\tthis.oldAnimation = null;\n\n\t// API\n\n\tthis.enableShadows = function ( enable ) {\n\n\t\tfor ( var i = 0; i < this.meshes.length; i ++ ) {\n\n\t\t\tthis.meshes[ i ].castShadow = enable;\n\t\t\tthis.meshes[ i ].receiveShadow = enable;\n\n\t\t}\n\n\t};\n\n\tthis.setVisible = function ( enable ) {\n\n\t\tfor ( var i = 0; i < this.meshes.length; i ++ ) {\n\n\t\t\tthis.meshes[ i ].visible = enable;\n\t\t\tthis.meshes[ i ].visible = enable;\n\n\t\t}\n\n\t};\n\n\n\tthis.shareParts = function ( original ) {\n\n\t\tthis.animations = original.animations;\n\t\tthis.walkSpeed = original.walkSpeed;\n\t\tthis.crouchSpeed = original.crouchSpeed;\n\n\t\tthis.skinsBody = original.skinsBody;\n\t\tthis.skinsWeapon = original.skinsWeapon;\n\n\t\t// BODY\n\n\t\tvar mesh = createPart( original.meshBody.geometry, this.skinsBody[ 0 ] );\n\t\tmesh.scale.set( this.scale, this.scale, this.scale );\n\n\t\tthis.root.position.y = original.root.position.y;\n\t\tthis.root.add( mesh );\n\n\t\tthis.meshBody = mesh;\n\n\t\tthis.meshes.push( mesh );\n\n\t\t// WEAPONS\n\n\t\tfor ( var i = 0; i < original.weapons.length; i ++ ) {\n\n\t\t\tvar meshWeapon = createPart( original.weapons[ i ].geometry, this.skinsWeapon[ i ] );\n\t\t\tmeshWeapon.scale.set( this.scale, this.scale, this.scale );\n\t\t\tmeshWeapon.visible = false;\n\n\t\t\tmeshWeapon.name = original.weapons[ i ].name;\n\n\t\t\tthis.root.add( meshWeapon );\n\n\t\t\tthis.weapons[ i ] = meshWeapon;\n\t\t\tthis.meshWeapon = meshWeapon;\n\n\t\t\tthis.meshes.push( meshWeapon );\n\n\t\t}\n\n\t};\n\n\tthis.loadParts = function ( config ) {\n\n\t\tthis.animations = config.animations;\n\t\tthis.walkSpeed = config.walkSpeed;\n\t\tthis.crouchSpeed = config.crouchSpeed;\n\n\t\tthis.loadCounter = config.weapons.length * 2 + config.skins.length + 1;\n\n\t\tvar weaponsTextures = [];\n\t\tfor ( var i = 0; i < config.weapons.length; i ++ ) weaponsTextures[ i ] = config.weapons[ i ][ 1 ];\n\n\t\t// SKINS\n\n\t\tthis.skinsBody = loadTextures( config.baseUrl + \"skins/\", config.skins );\n\t\tthis.skinsWeapon = loadTextures( config.baseUrl + \"skins/\", weaponsTextures );\n\n\t\t// BODY\n\n\t\tvar loader = new MD2Loader();\n\n\t\tloader.load( config.baseUrl + config.body, function ( geo ) {\n\n\t\t\tvar boundingBox = new Box3();\n\t\t\tboundingBox.setFromBufferAttribute( geo.attributes.position );\n\n\t\t\tscope.root.position.y = - scope.scale * boundingBox.min.y;\n\n\t\t\tvar mesh = createPart( geo, scope.skinsBody[ 0 ] );\n\t\t\tmesh.scale.set( scope.scale, scope.scale, scope.scale );\n\n\t\t\tscope.root.add( mesh );\n\n\t\t\tscope.meshBody = mesh;\n\t\t\tscope.meshes.push( mesh );\n\n\t\t\tcheckLoadingComplete();\n\n\t\t} );\n\n\t\t// WEAPONS\n\n\t\tvar generateCallback = function ( index, name ) {\n\n\t\t\treturn function ( geo ) {\n\n\t\t\t\tvar mesh = createPart( geo, scope.skinsWeapon[ index ] );\n\t\t\t\tmesh.scale.set( scope.scale, scope.scale, scope.scale );\n\t\t\t\tmesh.visible = false;\n\n\t\t\t\tmesh.name = name;\n\n\t\t\t\tscope.root.add( mesh );\n\n\t\t\t\tscope.weapons[ index ] = mesh;\n\t\t\t\tscope.meshWeapon = mesh;\n\t\t\t\tscope.meshes.push( mesh );\n\n\t\t\t\tcheckLoadingComplete();\n\n\t\t\t};\n\n\t\t};\n\n\t\tfor ( var i = 0; i < config.weapons.length; i ++ ) {\n\n\t\t\tloader.load( config.baseUrl + config.weapons[ i ][ 0 ], generateCallback( i, config.weapons[ i ][ 0 ] ) );\n\n\t\t}\n\n\t};\n\n\tthis.setPlaybackRate = function ( rate ) {\n\n\t\tif ( this.meshBody ) this.meshBody.duration = this.meshBody.baseDuration / rate;\n\t\tif ( this.meshWeapon ) this.meshWeapon.duration = this.meshWeapon.baseDuration / rate;\n\n\t};\n\n\tthis.setWireframe = function ( wireframeEnabled ) {\n\n\t\tif ( wireframeEnabled ) {\n\n\t\t\tif ( this.meshBody ) this.meshBody.material = this.meshBody.materialWireframe;\n\t\t\tif ( this.meshWeapon ) this.meshWeapon.material = this.meshWeapon.materialWireframe;\n\n\t\t} else {\n\n\t\t\tif ( this.meshBody ) this.meshBody.material = this.meshBody.materialTexture;\n\t\t\tif ( this.meshWeapon ) this.meshWeapon.material = this.meshWeapon.materialTexture;\n\n\t\t}\n\n\t};\n\n\tthis.setSkin = function ( index ) {\n\n\t\tif ( this.meshBody && this.meshBody.material.wireframe === false ) {\n\n\t\t\tthis.meshBody.material.map = this.skinsBody[ index ];\n\t\t\tthis.currentSkin = index;\n\n\t\t}\n\n\t};\n\n\tthis.setWeapon = function ( index ) {\n\n\t\tfor ( var i = 0; i < this.weapons.length; i ++ ) this.weapons[ i ].visible = false;\n\n\t\tvar activeWeapon = this.weapons[ index ];\n\n\t\tif ( activeWeapon ) {\n\n\t\t\tactiveWeapon.visible = true;\n\t\t\tthis.meshWeapon = activeWeapon;\n\n\t\t\tif ( this.activeAnimation ) {\n\n\t\t\t\tactiveWeapon.playAnimation( this.activeAnimation );\n\t\t\t\tthis.meshWeapon.setAnimationTime( this.activeAnimation, this.meshBody.getAnimationTime( this.activeAnimation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.setAnimation = function ( animationName ) {\n\n\t\tif ( animationName === this.activeAnimation || ! animationName ) return;\n\n\t\tif ( this.meshBody ) {\n\n\t\t\tthis.meshBody.setAnimationWeight( animationName, 0 );\n\t\t\tthis.meshBody.playAnimation( animationName );\n\n\t\t\tthis.oldAnimation = this.activeAnimation;\n\t\t\tthis.activeAnimation = animationName;\n\n\t\t\tthis.blendCounter = this.transitionFrames;\n\n\t\t}\n\n\t\tif ( this.meshWeapon ) {\n\n\t\t\tthis.meshWeapon.setAnimationWeight( animationName, 0 );\n\t\t\tthis.meshWeapon.playAnimation( animationName );\n\n\t\t}\n\n\n\t};\n\n\tthis.update = function ( delta ) {\n\n\t\tif ( this.controls ) this.updateMovementModel( delta );\n\n\t\tif ( this.animations ) {\n\n\t\t\tthis.updateBehaviors();\n\t\t\tthis.updateAnimations( delta );\n\n\t\t}\n\n\t};\n\n\tthis.updateAnimations = function ( delta ) {\n\n\t\tvar mix = 1;\n\n\t\tif ( this.blendCounter > 0 ) {\n\n\t\t\tmix = ( this.transitionFrames - this.blendCounter ) / this.transitionFrames;\n\t\t\tthis.blendCounter -= 1;\n\n\t\t}\n\n\t\tif ( this.meshBody ) {\n\n\t\t\tthis.meshBody.update( delta );\n\n\t\t\tthis.meshBody.setAnimationWeight( this.activeAnimation, mix );\n\t\t\tthis.meshBody.setAnimationWeight( this.oldAnimation, 1 - mix );\n\n\t\t}\n\n\t\tif ( this.meshWeapon ) {\n\n\t\t\tthis.meshWeapon.update( delta );\n\n\t\t\tthis.meshWeapon.setAnimationWeight( this.activeAnimation, mix );\n\t\t\tthis.meshWeapon.setAnimationWeight( this.oldAnimation, 1 - mix );\n\n\t\t}\n\n\t};\n\n\tthis.updateBehaviors = function () {\n\n\t\tvar controls = this.controls;\n\t\tvar animations = this.animations;\n\n\t\tvar moveAnimation, idleAnimation;\n\n\t\t// crouch vs stand\n\n\t\tif ( controls.crouch ) {\n\n\t\t\tmoveAnimation = animations[ \"crouchMove\" ];\n\t\t\tidleAnimation = animations[ \"crouchIdle\" ];\n\n\t\t} else {\n\n\t\t\tmoveAnimation = animations[ \"move\" ];\n\t\t\tidleAnimation = animations[ \"idle\" ];\n\n\t\t}\n\n\t\t// actions\n\n\t\tif ( controls.jump ) {\n\n\t\t\tmoveAnimation = animations[ \"jump\" ];\n\t\t\tidleAnimation = animations[ \"jump\" ];\n\n\t\t}\n\n\t\tif ( controls.attack ) {\n\n\t\t\tif ( controls.crouch ) {\n\n\t\t\t\tmoveAnimation = animations[ \"crouchAttack\" ];\n\t\t\t\tidleAnimation = animations[ \"crouchAttack\" ];\n\n\t\t\t} else {\n\n\t\t\t\tmoveAnimation = animations[ \"attack\" ];\n\t\t\t\tidleAnimation = animations[ \"attack\" ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// set animations\n\n\t\tif ( controls.moveForward || controls.moveBackward || controls.moveLeft || controls.moveRight ) {\n\n\t\t\tif ( this.activeAnimation !== moveAnimation ) {\n\n\t\t\t\tthis.setAnimation( moveAnimation );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif ( Math.abs( this.speed ) < 0.2 * this.maxSpeed && ! ( controls.moveLeft || controls.moveRight || controls.moveForward || controls.moveBackward ) ) {\n\n\t\t\tif ( this.activeAnimation !== idleAnimation ) {\n\n\t\t\t\tthis.setAnimation( idleAnimation );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// set animation direction\n\n\t\tif ( controls.moveForward ) {\n\n\t\t\tif ( this.meshBody ) {\n\n\t\t\t\tthis.meshBody.setAnimationDirectionForward( this.activeAnimation );\n\t\t\t\tthis.meshBody.setAnimationDirectionForward( this.oldAnimation );\n\n\t\t\t}\n\n\t\t\tif ( this.meshWeapon ) {\n\n\t\t\t\tthis.meshWeapon.setAnimationDirectionForward( this.activeAnimation );\n\t\t\t\tthis.meshWeapon.setAnimationDirectionForward( this.oldAnimation );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( controls.moveBackward ) {\n\n\t\t\tif ( this.meshBody ) {\n\n\t\t\t\tthis.meshBody.setAnimationDirectionBackward( this.activeAnimation );\n\t\t\t\tthis.meshBody.setAnimationDirectionBackward( this.oldAnimation );\n\n\t\t\t}\n\n\t\t\tif ( this.meshWeapon ) {\n\n\t\t\t\tthis.meshWeapon.setAnimationDirectionBackward( this.activeAnimation );\n\t\t\t\tthis.meshWeapon.setAnimationDirectionBackward( this.oldAnimation );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.updateMovementModel = function ( delta ) {\n\n\t\tvar controls = this.controls;\n\n\t\t// speed based on controls\n\n\t\tif ( controls.crouch ) \tthis.maxSpeed = this.crouchSpeed;\n\t\telse this.maxSpeed = this.walkSpeed;\n\n\t\tthis.maxReverseSpeed = - this.maxSpeed;\n\n\t\tif ( controls.moveForward ) this.speed = _Math.clamp( this.speed + delta * this.frontAcceleration, this.maxReverseSpeed, this.maxSpeed );\n\t\tif ( controls.moveBackward ) this.speed = _Math.clamp( this.speed - delta * this.backAcceleration, this.maxReverseSpeed, this.maxSpeed );\n\n\t\t// orientation based on controls\n\t\t// (don't just stand while turning)\n\n\t\tvar dir = 1;\n\n\t\tif ( controls.moveLeft ) {\n\n\t\t\tthis.bodyOrientation += delta * this.angularSpeed;\n\t\t\tthis.speed = _Math.clamp( this.speed + dir * delta * this.frontAcceleration, this.maxReverseSpeed, this.maxSpeed );\n\n\t\t}\n\n\t\tif ( controls.moveRight ) {\n\n\t\t\tthis.bodyOrientation -= delta * this.angularSpeed;\n\t\t\tthis.speed = _Math.clamp( this.speed + dir * delta * this.frontAcceleration, this.maxReverseSpeed, this.maxSpeed );\n\n\t\t}\n\n\t\t// speed decay\n\n\t\tif ( ! ( controls.moveForward || controls.moveBackward ) ) {\n\n\t\t\tif ( this.speed > 0 ) {\n\n\t\t\t\tvar k = exponentialEaseOut( this.speed / this.maxSpeed );\n\t\t\t\tthis.speed = _Math.clamp( this.speed - k * delta * this.frontDecceleration, 0, this.maxSpeed );\n\n\t\t\t} else {\n\n\t\t\t\tvar k = exponentialEaseOut( this.speed / this.maxReverseSpeed );\n\t\t\t\tthis.speed = _Math.clamp( this.speed + k * delta * this.backAcceleration, this.maxReverseSpeed, 0 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// displacement\n\n\t\tvar forwardDelta = this.speed * delta;\n\n\t\tthis.root.position.x += Math.sin( this.bodyOrientation ) * forwardDelta;\n\t\tthis.root.position.z += Math.cos( this.bodyOrientation ) * forwardDelta;\n\n\t\t// steering\n\n\t\tthis.root.rotation.y = this.bodyOrientation;\n\n\t};\n\n\t// internal helpers\n\n\tfunction loadTextures( baseUrl, textureUrls ) {\n\n\t\tvar textureLoader = new TextureLoader();\n\t\tvar textures = [];\n\n\t\tfor ( var i = 0; i < textureUrls.length; i ++ ) {\n\n\t\t\ttextures[ i ] = textureLoader.load( baseUrl + textureUrls[ i ], checkLoadingComplete );\n\t\t\ttextures[ i ].mapping = UVMapping;\n\t\t\ttextures[ i ].name = textureUrls[ i ];\n\n\t\t}\n\n\t\treturn textures;\n\n\t}\n\n\tfunction createPart( geometry, skinMap ) {\n\n\t\tvar materialWireframe = new MeshLambertMaterial( { color: 0xffaa00, wireframe: true, morphTargets: true, morphNormals: true } );\n\t\tvar materialTexture = new MeshLambertMaterial( { color: 0xffffff, wireframe: false, map: skinMap, morphTargets: true, morphNormals: true } );\n\n\t\t//\n\n\t\tvar mesh = new MorphBlendMesh( geometry, materialTexture );\n\t\tmesh.rotation.y = - Math.PI / 2;\n\n\t\t//\n\n\t\tmesh.materialTexture = materialTexture;\n\t\tmesh.materialWireframe = materialWireframe;\n\n\t\t//\n\n\t\tmesh.autoCreateAnimations( scope.animationFPS );\n\n\t\treturn mesh;\n\n\t}\n\n\tfunction checkLoadingComplete() {\n\n\t\tscope.loadCounter -= 1;\n\t\tif ( scope.loadCounter === 0 ) \tscope.onLoadComplete();\n\n\t}\n\n\tfunction exponentialEaseOut( k ) {\n\n\t\treturn k === 1 ? 1 : - Math.pow( 2, - 10 * k ) + 1;\n\n\t}\n\n};\n\nexport { MD2CharacterComplex };\n"]}