{"version":3,"sources":["CarControls.js"],"names":[],"mappings":"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","file":"CarControls-compiled.js","sourcesContent":["/**\n * @author alteredq / http://alteredqualia.com/\n * @author Lewy Blue https://github.com/looeee\n *\n * The model is expected to follow real world car proportions. You can try unusual car types\n * but your results may be unexpected. Scaled models are also not supported.\n *\n * Defaults are rough estimates for a real world scale car model\n *\n */\n\nimport {\n\tBox3,\n\tGroup,\n\tMath as _Math,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar CarControls = ( function ( ) {\n\n\t// private variables\n\tvar steeringWheelSpeed = 1.5;\n\tvar maxSteeringRotation = 0.6;\n\n\tvar acceleration = 0;\n\n\tvar maxSpeedReverse, accelerationReverse, deceleration;\n\n\tvar controlKeys = { LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, BRAKE: 32 };\n\n\tvar wheelOrientation = 0;\n\tvar carOrientation = 0;\n\n\tvar root = null;\n\n\tvar frontLeftWheelRoot = null;\n\tvar frontRightWheelRoot = null;\n\n\tvar frontLeftWheel = new Group();\n\tvar frontRightWheel = new Group();\n\tvar backLeftWheel = null;\n\tvar backRightWheel = null;\n\n\tvar steeringWheel = null;\n\n\tvar wheelDiameter = 1;\n\tvar length = 1;\n\n\tvar loaded = false;\n\n\tvar controls = {\n\n\t\tbrake: false,\n\t\tmoveForward: false,\n\t\tmoveBackward: false,\n\t\tmoveLeft: false,\n\t\tmoveRight: false\n\n\t};\n\n\tfunction CarControls( maxSpeed, acceleration, brakePower, turningRadius, keys ) {\n\n\t\tthis.enabled = true;\n\n\t\tthis.elemNames = {\n\t\t\tflWheel: 'wheel_fl',\n\t\t\tfrWheel: 'wheel_fr',\n\t\t\trlWheel: 'wheel_rl',\n\t\t\trrWheel: 'wheel_rr',\n\t\t\tsteeringWheel: 'steering_wheel', // set to null to disable\n\t\t};\n\n\t\t// km/hr\n\t\tthis.maxSpeed = maxSpeed || 180;\n\t\tmaxSpeedReverse = - this.maxSpeed * 0.25;\n\n\t\t// m/s\n\t\tthis.acceleration = acceleration || 10;\n\t\taccelerationReverse = this.acceleration * 0.5;\n\n\t\t// metres\n\t\tthis.turningRadius = turningRadius || 6;\n\n\t\t// m/s\n\t\tdeceleration = this.acceleration * 2;\n\n\t\t// multiplied with deceleration, so breaking deceleration = ( acceleration * 2 * brakePower ) m/s\n\t\tthis.brakePower = brakePower || 10;\n\n\t\t// exposed so that a user can use this for various effect, e.g blur\n\t\tthis.speed = 0;\n\n\t\t// keys used to control car - by default the arrow keys and space to brake\n\t\tcontrolKeys = keys || controlKeys;\n\n\t\t// local axes of rotation - these are likely to vary between models\n\t\tthis.wheelRotationAxis = 'x';\n\t\tthis.wheelTurnAxis = 'z';\n\t\tthis.steeringWheelTurnAxis = 'y';\n\n\t\tdocument.addEventListener( 'keydown', this.onKeyDown, false );\n\t\tdocument.addEventListener( 'keyup', this.onKeyUp, false );\n\n\t}\n\n\tCarControls.prototype = {\n\n\t\tconstructor: CarControls,\n\n\t\tonKeyDown: function ( event ) {\n\n\t\t\tswitch ( event.keyCode ) {\n\n\t\t\t\tcase controlKeys.BRAKE:\n\t\t\t\t\tcontrols.brake = true;\n\t\t\t\t\tcontrols.moveForward = false;\n\t\t\t\t\tcontrols.moveBackward = false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase controlKeys.UP: controls.moveForward = true; break;\n\n\t\t\t\tcase controlKeys.DOWN: controls.moveBackward = true; break;\n\n\t\t\t\tcase controlKeys.LEFT: controls.moveLeft = true; break;\n\n\t\t\t\tcase controlKeys.RIGHT: controls.moveRight = true; break;\n\n\t\t\t}\n\n\t\t},\n\n\t\tonKeyUp: function ( event ) {\n\n\t\t\tswitch ( event.keyCode ) {\n\n\t\t\t\tcase controlKeys.BRAKE: controls.brake = false; break;\n\n\t\t\t\tcase controlKeys.UP: controls.moveForward = false; break;\n\n\t\t\t\tcase controlKeys.DOWN: controls.moveBackward = false; break;\n\n\t\t\t\tcase controlKeys.LEFT: controls.moveLeft = false; break;\n\n\t\t\t\tcase controlKeys.RIGHT: controls.moveRight = false; break;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdispose: function () {\n\n\t\t\tdocument.removeEventListener( 'keydown', this.onKeyDown, false );\n\t\t\tdocument.removeEventListener( 'keyup', this.onKeyUp, false );\n\n\t\t},\n\n\t\tupdate: function ( delta ) {\n\n\t\t\tif ( ! loaded || ! this.enabled ) return;\n\n\t\t\tvar brakingDeceleration = 1;\n\n\t\t\tif ( controls.brake ) brakingDeceleration = this.brakePower;\n\n\t\t\tif ( controls.moveForward ) {\n\n\t\t\t\tthis.speed = _Math.clamp( this.speed + delta * this.acceleration, maxSpeedReverse, this.maxSpeed );\n\t\t\t\tacceleration = _Math.clamp( acceleration + delta, - 1, 1 );\n\n\t\t\t}\n\n\t\t\tif ( controls.moveBackward ) {\n\n\t\t\t\tthis.speed = _Math.clamp( this.speed - delta * accelerationReverse, maxSpeedReverse, this.maxSpeed );\n\t\t\t\tacceleration = _Math.clamp( acceleration - delta, - 1, 1 );\n\n\t\t\t}\n\n\t\t\tif ( controls.moveLeft ) {\n\n\t\t\t\twheelOrientation = _Math.clamp( wheelOrientation + delta * steeringWheelSpeed, - maxSteeringRotation, maxSteeringRotation );\n\n\t\t\t}\n\n\t\t\tif ( controls.moveRight ) {\n\n\t\t\t\twheelOrientation = _Math.clamp( wheelOrientation - delta * steeringWheelSpeed, - maxSteeringRotation, maxSteeringRotation );\n\n\t\t\t}\n\n\t\t\t// this.speed decay\n\t\t\tif ( ! ( controls.moveForward || controls.moveBackward ) ) {\n\n\t\t\t\tif ( this.speed > 0 ) {\n\n\t\t\t\t\tvar k = exponentialEaseOut( this.speed / this.maxSpeed );\n\n\t\t\t\t\tthis.speed = _Math.clamp( this.speed - k * delta * deceleration * brakingDeceleration, 0, this.maxSpeed );\n\t\t\t\t\tacceleration = _Math.clamp( acceleration - k * delta, 0, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar k = exponentialEaseOut( this.speed / maxSpeedReverse );\n\n\t\t\t\t\tthis.speed = _Math.clamp( this.speed + k * delta * accelerationReverse * brakingDeceleration, maxSpeedReverse, 0 );\n\t\t\t\t\tacceleration = _Math.clamp( acceleration + k * delta, - 1, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// steering decay\n\t\t\tif ( ! ( controls.moveLeft || controls.moveRight ) ) {\n\n\t\t\t\tif ( wheelOrientation > 0 ) {\n\n\t\t\t\t\twheelOrientation = _Math.clamp( wheelOrientation - delta * steeringWheelSpeed, 0, maxSteeringRotation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\twheelOrientation = _Math.clamp( wheelOrientation + delta * steeringWheelSpeed, - maxSteeringRotation, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar forwardDelta = - this.speed * delta;\n\n\t\t\tcarOrientation -= ( forwardDelta * this.turningRadius * 0.02 ) * wheelOrientation;\n\n\t\t\t// movement of car\n\t\t\troot.position.x += Math.sin( carOrientation ) * forwardDelta * length;\n\t\t\troot.position.z += Math.cos( carOrientation ) * forwardDelta * length;\n\n\t\t\t// angle of car\n\t\t\troot.rotation.y = carOrientation;\n\n\t\t\t// wheels rolling\n\t\t\tvar angularSpeedRatio = - 2 / wheelDiameter;\n\n\t\t\tvar wheelDelta = forwardDelta * angularSpeedRatio * length;\n\n\t\t\tfrontLeftWheel.rotation[ this.wheelRotationAxis ] -= wheelDelta;\n\t\t\tfrontRightWheel.rotation[ this.wheelRotationAxis ] -= wheelDelta;\n\t\t\tbackLeftWheel.rotation[ this.wheelRotationAxis ] -= wheelDelta;\n\t\t\tbackRightWheel.rotation[ this.wheelRotationAxis ] -= wheelDelta;\n\n\t\t\t// rotation while steering\n\t\t\tfrontLeftWheelRoot.rotation[ this.wheelTurnAxis ] = wheelOrientation;\n\t\t\tfrontRightWheelRoot.rotation[ this.wheelTurnAxis ] = wheelOrientation;\n\n\t\t\tsteeringWheel.rotation[ this.steeringWheelTurnAxis ] = - wheelOrientation * 6;\n\n\t\t},\n\n\t\tsetModel: function ( model, elemNames ) {\n\n\t\t\tif ( elemNames ) this.elemNames = elemNames;\n\n\t\t\troot = model;\n\n\t\t\tthis.setupWheels();\n\t\t\tthis.computeDimensions();\n\n\t\t\tloaded = true;\n\n\t\t},\n\n\t\tsetupWheels: function () {\n\n\t\t\tfrontLeftWheelRoot = root.getObjectByName( this.elemNames.flWheel );\n\t\t\tfrontRightWheelRoot = root.getObjectByName( this.elemNames.frWheel );\n\t\t\tbackLeftWheel = root.getObjectByName( this.elemNames.rlWheel );\n\t\t\tbackRightWheel = root.getObjectByName( this.elemNames.rrWheel );\n\n\t\t\tif ( this.elemNames.steeringWheel !== null ) steeringWheel = root.getObjectByName( this.elemNames.steeringWheel );\n\n\t\t\twhile ( frontLeftWheelRoot.children.length > 0 ) frontLeftWheel.add( frontLeftWheelRoot.children[ 0 ] );\n\t\t\twhile ( frontRightWheelRoot.children.length > 0 ) frontRightWheel.add( frontRightWheelRoot.children[ 0 ] );\n\n\t\t\tfrontLeftWheelRoot.add( frontLeftWheel );\n\t\t\tfrontRightWheelRoot.add( frontRightWheel );\n\n\t\t},\n\n\t\tcomputeDimensions: function () {\n\n\t\t\tvar bb = new Box3().setFromObject( frontLeftWheelRoot );\n\n\t\t\tvar size = new Vector3();\n\t\t\tbb.getSize( size );\n\n\t\t\twheelDiameter = Math.max( size.x, size.y, size.z );\n\n\t\t\tbb.setFromObject( root );\n\n\t\t\tsize = bb.getSize( size );\n\t\t\tlength = Math.max( size.x, size.y, size.z );\n\n\t\t}\n\n\t};\n\n\tfunction exponentialEaseOut( k ) {\n\n\t\treturn k === 1 ? 1 : - Math.pow( 2, - 10 * k ) + 1;\n\n\t}\n\n\treturn CarControls;\n\n} )();\n\nexport { CarControls };\n"]}