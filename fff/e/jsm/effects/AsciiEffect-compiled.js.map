{"version":3,"sources":["AsciiEffect.js"],"names":[],"mappings":"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","file":"AsciiEffect-compiled.js","sourcesContent":["/**\n * @author zz85 / https://github.com/zz85\n *\n * Ascii generation is based on http://www.nihilogic.dk/labs/jsascii/\n * Maybe more about this later with a blog post at http://lab4games.net/zz85/blog\n *\n * 16 April 2012 - @blurspline\n */\n\n\n\nvar AsciiEffect = function ( renderer, charSet, options ) {\n\n\t// its fun to create one your own!\n\n\tcharSet = ( charSet === undefined ) ? ' .:-=+*#%@' : charSet;\n\n\t// ' .,:;=|iI+hHOE#`$';\n\t// darker bolder character set from https://github.com/saw/Canvas-ASCII-Art/\n\t// ' .\\'`^\",:;Il!i~+_-?][}{1)(|/tfjrxnuvczXYUJCLQ0OZmwqpdbkhao*#MW&8%B@$'.split('');\n\n\tif ( ! options ) options = {};\n\n\t// Some ASCII settings\n\n\tvar bResolution = ! options[ 'resolution' ] ? 0.15 : options[ 'resolution' ]; // Higher for more details\n\tvar iScale = ! options[ 'scale' ] ? 1 : options[ 'scale' ];\n\tvar bColor = ! options[ 'color' ] ? false : options[ 'color' ]; // nice but slows down rendering!\n\tvar bAlpha = ! options[ 'alpha' ] ? false : options[ 'alpha' ]; // Transparency\n\tvar bBlock = ! options[ 'block' ] ? false : options[ 'block' ]; // blocked characters. like good O dos\n\tvar bInvert = ! options[ 'invert' ] ? false : options[ 'invert' ]; // black is white, white is black\n\n\tvar strResolution = 'low';\n\n\tvar width, height;\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.cursor = 'default';\n\n\tvar oAscii = document.createElement( \"table\" );\n\tdomElement.appendChild( oAscii );\n\n\tvar iWidth, iHeight;\n\tvar oImg;\n\n\tthis.setSize = function ( w, h ) {\n\n\t\twidth = w;\n\t\theight = h;\n\n\t\trenderer.setSize( w, h );\n\n\t\tinitAsciiSize();\n\n\t};\n\n\n\tthis.render = function ( scene, camera ) {\n\n\t\trenderer.render( scene, camera );\n\t\tasciifyImage( renderer, oAscii );\n\n\t};\n\n\tthis.domElement = domElement;\n\n\n\t// Throw in ascii library from http://www.nihilogic.dk/labs/jsascii/jsascii.js\n\n\t/*\n\t* jsAscii 0.1\n\t* Copyright (c) 2008 Jacob Seidelin, jseidelin@nihilogic.dk, http://blog.nihilogic.dk/\n\t* MIT License [http://www.nihilogic.dk/licenses/mit-license.txt]\n\t*/\n\n\tfunction initAsciiSize() {\n\n\t\tiWidth = Math.round( width * fResolution );\n\t\tiHeight = Math.round( height * fResolution );\n\n\t\toCanvas.width = iWidth;\n\t\toCanvas.height = iHeight;\n\t\t// oCanvas.style.display = \"none\";\n\t\t// oCanvas.style.width = iWidth;\n\t\t// oCanvas.style.height = iHeight;\n\n\t\toImg = renderer.domElement;\n\n\t\tif ( oImg.style.backgroundColor ) {\n\n\t\t\toAscii.rows[ 0 ].cells[ 0 ].style.backgroundColor = oImg.style.backgroundColor;\n\t\t\toAscii.rows[ 0 ].cells[ 0 ].style.color = oImg.style.color;\n\n\t\t}\n\n\t\toAscii.cellSpacing = 0;\n\t\toAscii.cellPadding = 0;\n\n\t\tvar oStyle = oAscii.style;\n\t\toStyle.display = \"inline\";\n\t\toStyle.width = Math.round( iWidth / fResolution * iScale ) + \"px\";\n\t\toStyle.height = Math.round( iHeight / fResolution * iScale ) + \"px\";\n\t\toStyle.whiteSpace = \"pre\";\n\t\toStyle.margin = \"0px\";\n\t\toStyle.padding = \"0px\";\n\t\toStyle.letterSpacing = fLetterSpacing + \"px\";\n\t\toStyle.fontFamily = strFont;\n\t\toStyle.fontSize = fFontSize + \"px\";\n\t\toStyle.lineHeight = fLineHeight + \"px\";\n\t\toStyle.textAlign = \"left\";\n\t\toStyle.textDecoration = \"none\";\n\n\t}\n\n\n\tvar aDefaultCharList = ( \" .,:;i1tfLCG08@\" ).split( \"\" );\n\tvar aDefaultColorCharList = ( \" CGO08@\" ).split( \"\" );\n\tvar strFont = \"courier new, monospace\";\n\n\tvar oCanvasImg = renderer.domElement;\n\n\tvar oCanvas = document.createElement( \"canvas\" );\n\tif ( ! oCanvas.getContext ) {\n\n\t\treturn;\n\n\t}\n\n\tvar oCtx = oCanvas.getContext( \"2d\" );\n\tif ( ! oCtx.getImageData ) {\n\n\t\treturn;\n\n\t}\n\n\tvar aCharList = ( bColor ? aDefaultColorCharList : aDefaultCharList );\n\n\tif ( charSet ) aCharList = charSet;\n\n\tvar fResolution = 0.5;\n\n\tswitch ( strResolution ) {\n\n\t\tcase \"low\" : \tfResolution = 0.25; break;\n\t\tcase \"medium\" : fResolution = 0.5; break;\n\t\tcase \"high\" : \tfResolution = 1; break;\n\n\t}\n\n\tif ( bResolution ) fResolution = bResolution;\n\n\t// Setup dom\n\n\tvar fFontSize = ( 2 / fResolution ) * iScale;\n\tvar fLineHeight = ( 2 / fResolution ) * iScale;\n\n\t// adjust letter-spacing for all combinations of scale and resolution to get it to fit the image width.\n\n\tvar fLetterSpacing = 0;\n\n\tif ( strResolution == \"low\" ) {\n\n\t\tswitch ( iScale ) {\n\n\t\t\tcase 1 : fLetterSpacing = - 1; break;\n\t\t\tcase 2 :\n\t\t\tcase 3 : fLetterSpacing = - 2.1; break;\n\t\t\tcase 4 : fLetterSpacing = - 3.1; break;\n\t\t\tcase 5 : fLetterSpacing = - 4.15; break;\n\n\t\t}\n\n\t}\n\n\tif ( strResolution == \"medium\" ) {\n\n\t\tswitch ( iScale ) {\n\n\t\t\tcase 1 : fLetterSpacing = 0; break;\n\t\t\tcase 2 : fLetterSpacing = - 1; break;\n\t\t\tcase 3 : fLetterSpacing = - 1.04; break;\n\t\t\tcase 4 :\n\t\t\tcase 5 : fLetterSpacing = - 2.1; break;\n\n\t\t}\n\n\t}\n\n\tif ( strResolution == \"high\" ) {\n\n\t\tswitch ( iScale ) {\n\n\t\t\tcase 1 :\n\t\t\tcase 2 : fLetterSpacing = 0; break;\n\t\t\tcase 3 :\n\t\t\tcase 4 :\n\t\t\tcase 5 : fLetterSpacing = - 1; break;\n\n\t\t}\n\n\t}\n\n\n\t// can't get a span or div to flow like an img element, but a table works?\n\n\n\t// convert img element to ascii\n\n\tfunction asciifyImage( canvasRenderer, oAscii ) {\n\n\t\toCtx.clearRect( 0, 0, iWidth, iHeight );\n\t\toCtx.drawImage( oCanvasImg, 0, 0, iWidth, iHeight );\n\t\tvar oImgData = oCtx.getImageData( 0, 0, iWidth, iHeight ).data;\n\n\t\t// Coloring loop starts now\n\t\tvar strChars = \"\";\n\n\t\t// console.time('rendering');\n\n\t\tfor ( var y = 0; y < iHeight; y += 2 ) {\n\n\t\t\tfor ( var x = 0; x < iWidth; x ++ ) {\n\n\t\t\t\tvar iOffset = ( y * iWidth + x ) * 4;\n\n\t\t\t\tvar iRed = oImgData[ iOffset ];\n\t\t\t\tvar iGreen = oImgData[ iOffset + 1 ];\n\t\t\t\tvar iBlue = oImgData[ iOffset + 2 ];\n\t\t\t\tvar iAlpha = oImgData[ iOffset + 3 ];\n\t\t\t\tvar iCharIdx;\n\n\t\t\t\tvar fBrightness;\n\n\t\t\t\tfBrightness = ( 0.3 * iRed + 0.59 * iGreen + 0.11 * iBlue ) / 255;\n\t\t\t\t// fBrightness = (0.3*iRed + 0.5*iGreen + 0.3*iBlue) / 255;\n\n\t\t\t\tif ( iAlpha == 0 ) {\n\n\t\t\t\t\t// should calculate alpha instead, but quick hack :)\n\t\t\t\t\t//fBrightness *= (iAlpha / 255);\n\t\t\t\t\tfBrightness = 1;\n\n\t\t\t\t}\n\n\t\t\t\tiCharIdx = Math.floor( ( 1 - fBrightness ) * ( aCharList.length - 1 ) );\n\n\t\t\t\tif ( bInvert ) {\n\n\t\t\t\t\tiCharIdx = aCharList.length - iCharIdx - 1;\n\n\t\t\t\t}\n\n\t\t\t\t// good for debugging\n\t\t\t\t//fBrightness = Math.floor(fBrightness * 10);\n\t\t\t\t//strThisChar = fBrightness;\n\n\t\t\t\tvar strThisChar = aCharList[ iCharIdx ];\n\n\t\t\t\tif ( strThisChar === undefined || strThisChar == \" \" )\n\t\t\t\t\tstrThisChar = \"&nbsp;\";\n\n\t\t\t\tif ( bColor ) {\n\n\t\t\t\t\tstrChars += \"<span style='\"\n\t\t\t\t\t\t+ \"color:rgb(\" + iRed + \",\" + iGreen + \",\" + iBlue + \");\"\n\t\t\t\t\t\t+ ( bBlock ? \"background-color:rgb(\" + iRed + \",\" + iGreen + \",\" + iBlue + \");\" : \"\" )\n\t\t\t\t\t\t+ ( bAlpha ? \"opacity:\" + ( iAlpha / 255 ) + \";\" : \"\" )\n\t\t\t\t\t\t+ \"'>\" + strThisChar + \"</span>\";\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstrChars += strThisChar;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tstrChars += \"<br/>\";\n\n\t\t}\n\n\t\toAscii.innerHTML = \"<tr><td>\" + strChars + \"</td></tr>\";\n\n\t\t// console.timeEnd('rendering');\n\n\t\t// return oAscii;\n\n\t}\n\n\t// end modified asciifyImage block\n\n};\n\nexport { AsciiEffect };\n"]}